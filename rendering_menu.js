const _0x261d57=_0x465c;(function(_0x42c44b,_0x5032c1){const _0x5cd63b=_0x465c,_0x192b6d=_0x42c44b();while(!![]){try{const _0x54b110=parseInt(_0x5cd63b(0x19c))/0x1+parseInt(_0x5cd63b(0x224))/0x2+-parseInt(_0x5cd63b(0x1cd))/0x3+parseInt(_0x5cd63b(0x191))/0x4*(parseInt(_0x5cd63b(0x242))/0x5)+-parseInt(_0x5cd63b(0x1f8))/0x6*(parseInt(_0x5cd63b(0x216))/0x7)+-parseInt(_0x5cd63b(0x1b8))/0x8+parseInt(_0x5cd63b(0x1b2))/0x9*(parseInt(_0x5cd63b(0x1a3))/0xa);if(_0x54b110===_0x5032c1)break;else _0x192b6d['push'](_0x192b6d['shift']());}catch(_0x49b1c){_0x192b6d['push'](_0x192b6d['shift']());}}}(_0xbcef,0xb6fd5));const MENU_LOGO_APPROX_HEIGHT=0x55,MENU_SUBTITLE_TEXT=_0x261d57(0x205),MENU_SUBTITLE_FONT=_0x261d57(0x1d0),MENU_SUBTITLE_COLOR=_0x261d57(0x21c),MENU_BUTTON_FONT='22px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif',MENU_BUTTON_COLOR=_0x261d57(0x1ea),MENU_BUTTON_COLOR_HOVER=_0x261d57(0x1e4),MENU_BUTTON_WIDTH=0x12c,MENU_BUTTON_HEIGHT=0x37,MENU_LOGO_BOTTOM_TO_START_GAP=0x5,MENU_BUTTON_V_GAP=-0xf,MENU_BUTTON_SUBTITLE_V_GAP=-0x0,MENU_SCORE_FONT=_0x261d57(0x1d3),MENU_SCORE_COLOR=_0x261d57(0x1ea),MENU_SCORE_LABEL_COLOR=_0x261d57(0x21c),GAME_OVER_FONT=_0x261d57(0x1b6),GAME_OVER_COLOR=_0x261d57(0x1e4),GAME_OVER_SHADOW=!![],DEMO_TEXT_LINE1_FONT='bold\x2018px\x20\x27Press\x20Start\x202P\x27',DEMO_TEXT_COLOR=_0x261d57(0x1e4),DEMO_TEXT_BLINK_ON_MS=0x3e8,DEMO_TEXT_BLINK_OFF_MS=0x3e8,DEMO_TEXT_BLINK_CYCLE_MS=DEMO_TEXT_BLINK_ON_MS+DEMO_TEXT_BLINK_OFF_MS,LOGO_SCALE_FACTOR=0.45,MENU_LOGO_EXTRA_Y_OFFSET=0x0,MENU_GENERAL_Y_OFFSET=0x32,INTRO_TEXT_FONT=_0x261d57(0x1b6),INTRO_TEXT_COLOR_NORMAL=_0x261d57(0x1e4),INTRO_TEXT_COLOR_DARK_YELLOW=_0x261d57(0x1ca),INTRO_TEXT_COLOR_CS_TEXT=INTRO_TEXT_COLOR_NORMAL,PERFECT_TEXT_COLOR=_0x261d57(0x21c),EXTRA_LIFE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,READY_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_BONUS_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_DARK_YELLOW,CS_CLEAR_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_HITS_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_CLEAR_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_FONT=INTRO_TEXT_FONT,PAUSE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_SHADOW=!![],RESULTS_SCREEN_DURATION=0x4e20,PLAYER_GAME_OVER_MESSAGE_DURATION=0x1388,SCORE_SCREEN_TEXT_FONT=INTRO_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP=INTRO_TEXT_COLOR_NORMAL,SCORE_SCREEN_TEXT_COLOR_BONUS=INTRO_TEXT_COLOR_DARK_YELLOW,SCORE_SCREEN_LINE_V_SPACING=0x28,SCORE_SCREEN_ICON_TEXT_H_SPACING=0xf,SCORE_SCREEN_VERTICAL_OFFSET=0x4b,SCORE_SCREEN_PLATINI_TEXT=_0x261d57(0x1a0),RESULTS_HEADER_COLOR=_0x261d57(0x21c),RESULTS_VALUE_COLOR_YELLOW=INTRO_TEXT_COLOR_DARK_YELLOW,RESULTS_LABEL_COLOR=_0x261d57(0x1ea),RESULTS_VALUE_COLOR_CYAN=INTRO_TEXT_COLOR_NORMAL,RESULTS_LINE_V_SPACING_SINGLE=0x23,RESULTS_LINE_V_SPACING_DOUBLE=0x5a,RESULTS_START_Y=0xaf,RESULTS_FOOTER_FONT=MENU_SUBTITLE_FONT,RESULTS_FOOTER_COLOR=MENU_SUBTITLE_COLOR,RESULTS_PLATINI_TEXT=_0x261d57(0x18c),CS_MESSAGE_VERTICAL_OFFSET=0x1e;function getSubtitleApproxHeight(_0x58ce9c){const _0xb76344=_0x261d57,_0x5b7e08=_0x58ce9c[_0xb76344(0x21e)](/(\d+)px/);return _0x5b7e08?.[0x1]?parseInt(_0x5b7e08[0x1],0xa):0x19;}function formatMillisecondsToMMSS(_0x487c59){const _0x3c15eb=_0x261d57;if(_0x487c59<=0x0||typeof _0x487c59!==_0x3c15eb(0x1b0)||!isFinite(_0x487c59))return'00:00';const _0x4cb0c6=Math['floor'](_0x487c59/0x3e8),_0x1f1342=Math[_0x3c15eb(0x1d2)](_0x4cb0c6/0x3c),_0x4d3b2f=_0x4cb0c6%0x3c,_0x4436aa=String(_0x1f1342)[_0x3c15eb(0x232)](0x2,'0'),_0x597032=String(_0x4d3b2f)['padStart'](0x2,'0');return _0x4436aa+':'+_0x597032;}function getMenuButtonRect(_0x4fe035){const _0x44b730=_0x261d57;if(!gameCtx||!gameCanvas||gameCanvas[_0x44b730(0x198)]===0x0||gameCanvas['height']===0x0)return null;const _0x1d5c0e=gameCanvas['width'],_0x4c20a9=gameCanvas[_0x44b730(0x21b)],_0x1e4ea8=_0x1d5c0e/0x2-MENU_BUTTON_WIDTH/0x2-0x1;let _0x5d32d9=MENU_LOGO_APPROX_HEIGHT;typeof logoImage!==_0x44b730(0x1d9)&&logoImage[_0x44b730(0x1f0)]&&logoImage['naturalHeight']!==0x0&&(_0x5d32d9=logoImage[_0x44b730(0x22b)]*LOGO_SCALE_FACTOR);const _0x2485a0=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x1c7c7f=_0x5d32d9+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x2485a0;let _0x3c4bc3=(_0x4c20a9-_0x1c7c7f)/0x2-0x46;_0x3c4bc3+=MENU_GENERAL_Y_OFFSET;const _0x321dd6=_0x3c4bc3+_0x5d32d9+MENU_LOGO_BOTTOM_TO_START_GAP,_0x23a685=_0x321dd6+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP;if(_0x4fe035===0x0)return{'x':_0x1e4ea8,'y':Math[_0x44b730(0x245)](_0x321dd6),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};else{if(_0x4fe035===0x1)return{'x':_0x1e4ea8,'y':Math[_0x44b730(0x245)](_0x23a685),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};}return null;}function pollControllerForMenu(){const _0x3bde05=_0x261d57;try{if(connectedGamepadIndex===null&&connectedGamepadIndexP2===null){joystickMovedVerticallyLastFrame=![];if(previousButtonStates[_0x3bde05(0x210)]>0x0)previousButtonStates=[];if(previousGameButtonStates[_0x3bde05(0x210)]>0x0)previousGameButtonStates=[];if(previousGameButtonStatesP2[_0x3bde05(0x210)]>0x0)previousGameButtonStatesP2=[];return;}let _0x3d6e41=connectedGamepadIndex!==null?connectedGamepadIndex:connectedGamepadIndexP2;if(_0x3d6e41===null)return;const _0x1b0212=navigator[_0x3bde05(0x19b)]();if(!_0x1b0212?.[_0x3d6e41])return;const _0x5baa04=_0x1b0212[_0x3d6e41],_0xbaa8cd=_0x5baa04[_0x3bde05(0x1fa)][_0x3bde05(0x1e8)](_0x285e96=>_0x285e96[_0x3bde05(0x1f3)]),_0x2848ca=_0xbaa8cd,_0x2b1323=_0xbaa8cd;let _0x7d83fd=![];const _0x155cc0=Date[_0x3bde05(0x1c1)]();let _0x389df9=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x389df9=!![]);if(_0x389df9){connectedGamepadIndex!==null&&(previousButtonStates=_0x2848ca[_0x3bde05(0x1fb)](),previousGameButtonStates=_0x2b1323[_0x3bde05(0x1fb)]());if(connectedGamepadIndexP2!==null){const _0x51040f=navigator[_0x3bde05(0x19b)]();_0x51040f?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x51040f[connectedGamepadIndexP2][_0x3bde05(0x1fa)]['map'](_0x8540b6=>_0x8540b6[_0x3bde05(0x1f3)]));}return;}if(isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x4b49d9=_0x2b1323[PS5_BUTTON_TRIANGLE],_0x6a1832=previousGameButtonStates[PS5_BUTTON_TRIANGLE]??![];_0x4b49d9&&!_0x6a1832&&(stopGameAndShowMenu(),_0x7d83fd=!![]);}if(!_0x7d83fd&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x3dcd0b=_0x2b1323[PS5_BUTTON_R1],_0x36bcb9=previousGameButtonStates[PS5_BUTTON_R1]??![];if(_0x3dcd0b&&!_0x36bcb9){if(typeof togglePause==='function')togglePause();_0x7d83fd=!![];}}if(!_0x7d83fd){const _0x574871=isShowingScoreScreen||isShowingResultsScreen;if(_0x574871){let _0x2723e1=![];for(let _0xe9f564=0x0;_0xe9f564<_0x2848ca[_0x3bde05(0x210)];_0xe9f564++){if(_0xe9f564===PS5_BUTTON_R1||_0xe9f564===PS5_BUTTON_TRIANGLE)continue;const _0x7a0118=previousButtonStates[_0xe9f564]??![];if(_0x2848ca[_0xe9f564]&&!_0x7a0118){_0x2723e1=!![];break;}}if(_0x2723e1){if(typeof showMenuState==='function')showMenuState();_0x7d83fd=!![];}}else{if(!isInGameState&&!_0x7d83fd){const _0x3ee310=_0x2848ca[PS5_BUTTON_CROSS],_0x11ab38=previousButtonStates[PS5_BUTTON_CROSS]??![],_0x16fb94=_0x2848ca[PS5_BUTTON_CIRCLE],_0x4d8700=previousButtonStates[PS5_BUTTON_CIRCLE]??![],_0x1520c2=_0x5baa04[_0x3bde05(0x206)][PS5_LEFT_STICK_Y]??0x0,_0x55085e=_0x2848ca[PS5_DPAD_UP],_0x44e093=_0x2848ca[PS5_DPAD_DOWN];let _0x2d9ed2=0x0;if(_0x1520c2<-AXIS_DEAD_ZONE_MENU||_0x55085e)_0x2d9ed2=-0x1;else{if(_0x1520c2>AXIS_DEAD_ZONE_MENU||_0x44e093)_0x2d9ed2=0x1;}let _0x3115c0=_0x2d9ed2!==0x0;if(_0x3115c0&&!joystickMovedVerticallyLastFrame){let _0x4197e8=selectedButtonIndex;const _0x323743=0x2;_0x4197e8===-0x1?_0x4197e8=_0x2d9ed2===0x1?0x0:_0x323743-0x1:_0x4197e8+=_0x2d9ed2;if(_0x4197e8<0x0)_0x4197e8=_0x323743-0x1;if(_0x4197e8>=_0x323743)_0x4197e8=0x0;_0x4197e8!==selectedButtonIndex&&(selectedButtonIndex=_0x4197e8,startAutoDemoTimer());}joystickMovedVerticallyLastFrame=_0x3115c0;if(_0x3ee310&&!_0x11ab38){stopAutoDemoTimer();if(isFiringModeSelectMode)selectedButtonIndex===0x0?selectedFiringMode=_0x3bde05(0x235):selectedFiringMode=_0x3bde05(0x21a),baseStartGame(!![]),_0x7d83fd=!![];else{if(isPlayerSelectMode)selectedButtonIndex===0x0?startGame1P():startGame2P(),_0x7d83fd=!![];else{if(selectedButtonIndex===0x0)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x7d83fd=!![];else selectedButtonIndex===0x1&&(exitGame(),_0x7d83fd=!![]);}}}if(!_0x7d83fd&&_0x16fb94&&!_0x4d8700){stopAutoDemoTimer();if(isFiringModeSelectMode)isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x7d83fd=!![];else isPlayerSelectMode?(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x7d83fd=!![]):(triggerFullscreen(),playSound(menuMusicSound,!![]),_0x7d83fd=!![]);}}}}connectedGamepadIndex!==null&&(previousButtonStates=_0x2848ca[_0x3bde05(0x1fb)](),previousGameButtonStates=_0x2b1323[_0x3bde05(0x1fb)]());if(connectedGamepadIndexP2!==null){const _0x2fdd9e=navigator[_0x3bde05(0x19b)]();_0x2fdd9e?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x2fdd9e[connectedGamepadIndexP2]['buttons']['map'](_0x146810=>_0x146810[_0x3bde05(0x1f3)]));}}catch(_0x36ccb9){console[_0x3bde05(0x1ad)](_0x3bde05(0x226),_0x36ccb9),previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[],selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![];}}function startAutoDemoTimer(){const _0xe68996=_0x261d57;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x33d896){console[_0xe68996(0x1ad)](_0xe68996(0x248),_0x33d896);}}function stopAutoDemoTimer(){try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x586118){console['error']('Error\x20stopping\x20auto\x20demo\x20timer:',_0x586118);}}function showScoreScreen(){const _0x5d399b=_0x261d57;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x5d399b(0x1c1)](),selectedButtonIndex=-0x1;}function showMenuState(){const _0x2895a4=_0x261d57;try{wasLastGameAIDemo&&(highScore=0x4e20),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],scoreScreenStartTime=0x0,isManualControl=![],isShowingDemoText=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode='rapid',isTwoPlayerMode=![],currentPlayer=0x1,showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],stopAllGameSounds(),stopSound(resultsMusicSound),stopSound(startSound),stopSound(levelUpSound),stopSound(entranceSound),isGridSoundPlaying=![],playerLives=0x3,score=0x0,level=0x1,player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,scoreEarnedThisCS=0x0,enemies=[],bullets=[],enemyBullets=[],explosions=[],isShowingIntro=![],introStep=0x0,isChallengingStage=![],challengingStageEnemiesHit=0x0,currentGridOffsetX=0x0,gridMoveDirection=0x1,currentWaveDefinition=null,isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,typeof enemySpawnTimeouts!==_0x2895a4(0x1d9)&&Array[_0x2895a4(0x21f)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x2895a4(0x19a)](clearTimeout),enemySpawnTimeouts=[],lastEnemyDetachTime=0x0,selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],isShowingResultsScreen=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,forceCenterShipNextReset=![],player1CompletedLevel=-0x1,p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],ship&&gameCanvas&&gameCanvas[_0x2895a4(0x198)]>0x0&&gameCanvas[_0x2895a4(0x21b)]>0x0&&(ship['x']=Math[_0x2895a4(0x245)](gameCanvas['width']/0x2-SHIP_WIDTH/0x2),ship[_0x2895a4(0x24c)]=ship['x'],ship['y']=gameCanvas[_0x2895a4(0x21b)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0),playSound(menuMusicSound,!![]),startAutoDemoTimer();}catch(_0x3a58a4){console[_0x2895a4(0x1ad)](_0x2895a4(0x238),_0x3a58a4),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isTwoPlayerMode=![],currentPlayer=0x1,isShowingPlayerGameOverMessage=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null;if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x2895a4(0x20a)),document[_0x2895a4(0x23f)][_0x2895a4(0x22e)]=_0x2895a4(0x20f);}}function startAIDemo(){const _0x3fa8e1=_0x261d57;if(isInGameState)return;stopSound(menuMusicSound),isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0x3fa8e1(0x235),isTwoPlayerMode=![],isManualControl=![],isShowingDemoText=!![],wasLastGameAIDemo=!![],baseStartGame(![]),gameJustStarted=!![];}function startGame1P(){if(isInGameState)return;isTwoPlayerMode=![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function startGame2P(){if(isInGameState)return;isTwoPlayerMode=!![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function baseStartGame(_0x381fa8){const _0x56b24a=_0x261d57;try{if(!gameCanvas||!gameCtx){console[_0x56b24a(0x1ad)](_0x56b24a(0x207)),showMenuState();return;}stopSound(menuMusicSound),stopAutoDemoTimer(),isInGameState=!![],isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isManualControl=_0x381fa8,isShowingDemoText=!_0x381fa8,isPaused=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];_0x381fa8&&(wasLastGameAIDemo=![]);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(typeof resetGame===_0x56b24a(0x228))resetGame();else{console[_0x56b24a(0x1ad)](_0x56b24a(0x1a4)),alert(_0x56b24a(0x193)),showMenuState();return;}_0x381fa8&&playSound(coinSound),gameStartTime=Date[_0x56b24a(0x1c1)](),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],selectedButtonIndex=-0x1,ship&&gameCanvas&&gameCanvas[_0x56b24a(0x198)]>0x0&&gameCanvas[_0x56b24a(0x21b)]>0x0&&(ship['x']=Math[_0x56b24a(0x245)](gameCanvas[_0x56b24a(0x198)]/0x2-SHIP_WIDTH/0x2),ship[_0x56b24a(0x24c)]=ship['x'],ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),mainLoopId===null&&startMainLoop();}catch(_0x41e672){console['error'](_0x56b24a(0x190),_0x41e672),wasLastGameAIDemo=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null,alert(_0x56b24a(0x1de)),showMenuState();}}function stopGameAndShowMenu(){isPaused=![];if(isManualControl)saveHighScore();showMenuState();}function exitGame(){const _0x4336ad=_0x261d57;isPaused=![],stopAutoDemoTimer(),saveHighScore(),isInGameState=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],showMenuState();try{window[_0x4336ad(0x1fc)](),setTimeout(()=>{if(!isInGameState)showMenuState();},0xc8);}catch(_0x175494){console[_0x4336ad(0x1ad)](_0x4336ad(0x1c6),_0x175494),showMenuState();}}function triggerGameOver(){triggerFinalGameOverSequence();}function startAutoDemoTimer(){const _0x494193=_0x261d57;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x36738c){console['error'](_0x494193(0x248),_0x36738c);}}function stopAutoDemoTimer(){const _0x1c9bee=_0x261d57;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x4957f9){console[_0x1c9bee(0x1ad)]('Error\x20stopping\x20auto\x20demo\x20timer:',_0x4957f9);}}function showScoreScreen(){const _0x264a29=_0x261d57;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x264a29(0x1c1)](),selectedButtonIndex=-0x1,clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);}function processMenuInteraction(_0x3a398b,_0x557fd8){const _0x1d7bf4=_0x261d57;if(isShowingScoreScreen){if(typeof showMenuState===_0x1d7bf4(0x228))showMenuState();}else{const _0x5e5a95=getMenuButtonRect(0x0),_0x5e776d=getMenuButtonRect(0x1);let _0x27008d=_0x5e5a95&&checkCollision({'x':_0x3a398b,'y':_0x557fd8,'width':0x1,'height':0x1},_0x5e5a95),_0x3391b3=_0x5e776d&&checkCollision({'x':_0x3a398b,'y':_0x557fd8,'width':0x1,'height':0x1},_0x5e776d);if(isFiringModeSelectMode){if(_0x27008d)selectedFiringMode=_0x1d7bf4(0x235),baseStartGame(!![]),stopAutoDemoTimer();else _0x3391b3?(selectedFiringMode=_0x1d7bf4(0x21a),baseStartGame(!![]),stopAutoDemoTimer()):(isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(isPlayerSelectMode){if(_0x27008d)startGame1P(),stopAutoDemoTimer();else _0x3391b3?(startGame2P(),stopAutoDemoTimer()):(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(_0x27008d)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer();else{if(_0x3391b3){if(typeof exitGame===_0x1d7bf4(0x228))exitGame();stopAutoDemoTimer();}else triggerFullscreen(),playSound(menuMusicSound,!![]),stopAutoDemoTimer();}}}}}function handleCanvasClick(_0x151bd4){const _0x536ace=_0x261d57;if(!gameCanvas)return;const _0x1e6543=gameCanvas[_0x536ace(0x24f)](),_0x15ec64=gameCanvas[_0x536ace(0x198)]/_0x1e6543[_0x536ace(0x198)],_0x8d1ec3=gameCanvas[_0x536ace(0x21b)]/_0x1e6543['height'],_0x72429f=(_0x151bd4[_0x536ace(0x24d)]-_0x1e6543[_0x536ace(0x1bb)])*_0x15ec64,_0x2290c9=(_0x151bd4[_0x536ace(0x1e7)]-_0x1e6543['top'])*_0x8d1ec3;let _0x1a4e5f=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x1a4e5f=!![]);if(_0x1a4e5f)return;if(isInGameState){if(isPaused){if(typeof togglePause===_0x536ace(0x228))togglePause();return;}if(!isManualControl){if(typeof stopGameAndShowMenu==='function')stopGameAndShowMenu();}}else processMenuInteraction(_0x72429f,_0x2290c9);}function createExplosion(_0x4047a0,_0x497f33){const _0x473148=_0x261d57;try{playSound(explosionSound);let _0xe56072=[];for(let _0x4ad620=0x0;_0x4ad620<EXPLOSION_PARTICLE_COUNT;_0x4ad620++){const _0x2a5c09=Math['random']()*Math['PI']*0x2,_0x401d67=Math[_0x473148(0x200)]()*(EXPLOSION_MAX_SPEED-EXPLOSION_MIN_SPEED)+EXPLOSION_MIN_SPEED;_0xe56072[_0x473148(0x197)]({'x':_0x4047a0,'y':_0x497f33,'vx':Math[_0x473148(0x196)](_0x2a5c09)*_0x401d67,'vy':Math['sin'](_0x2a5c09)*_0x401d67,'radius':EXPLOSION_PARTICLE_RADIUS,'alpha':0x1});}explosions['push']({'creationTime':Date[_0x473148(0x1c1)](),'duration':EXPLOSION_DURATION,'particles':_0xe56072});}catch(_0x54cb17){console[_0x473148(0x1ad)](_0x473148(0x22a),_0x54cb17);}}function renderExplosions(){const _0x38db92=_0x261d57;try{if(!gameCtx)return;gameCtx['save'](),gameCtx[_0x38db92(0x18b)]=_0x38db92(0x202),explosions['forEach'](_0x14715b=>{const _0x211f00=_0x38db92;_0x14715b[_0x211f00(0x1d4)]['forEach'](_0x4c7baa=>{const _0x3b84a7=_0x211f00,_0x24aa13=_0x4c7baa[_0x3b84a7(0x18a)]*EXPLOSION_MAX_OPACITY;_0x24aa13>0.01&&(gameCtx[_0x3b84a7(0x227)](),gameCtx[_0x3b84a7(0x234)](Math[_0x3b84a7(0x245)](_0x4c7baa['x']),Math[_0x3b84a7(0x245)](_0x4c7baa['y']),_0x4c7baa['radius'],0x0,Math['PI']*0x2),gameCtx['fillStyle']=_0x3b84a7(0x1cf)+_0x24aa13[_0x3b84a7(0x218)](0x3)+')',gameCtx[_0x3b84a7(0x201)]());});}),gameCtx[_0x38db92(0x1a8)]();}catch(_0x45e0d3){console[_0x38db92(0x1ad)]('Error\x20rendering\x20explosions:',_0x45e0d3);}}function drawCanvasText(_0x5440fb,_0x56885b,_0x20c330,_0x46d558,_0x78f9c,_0x42f0f9='center',_0x321024=_0x261d57(0x19e),_0xa34386=![]){const _0x2cd386=_0x261d57;if(!gameCtx)return;gameCtx[_0x2cd386(0x1f6)](),gameCtx[_0x2cd386(0x1a2)]=_0x46d558,gameCtx[_0x2cd386(0x1ae)]=_0x78f9c,gameCtx[_0x2cd386(0x23b)]=_0x42f0f9,gameCtx['textBaseline']=_0x321024,_0xa34386&&(gameCtx[_0x2cd386(0x1e1)]='rgba(0,\x200,\x200,\x200.8)',gameCtx[_0x2cd386(0x1cc)]=0x8,gameCtx['shadowOffsetX']=0x3,gameCtx[_0x2cd386(0x1fd)]=0x3),gameCtx[_0x2cd386(0x1dc)](_0x5440fb,_0x56885b,_0x20c330),gameCtx['restore']();}function drawCanvasButton(_0x390773,_0x17c84d,_0x5478d4){const _0x4ee94a=_0x261d57;if(!gameCtx)return;const _0x3efcfc=getMenuButtonRect(_0x17c84d);if(!_0x3efcfc)return;gameCtx[_0x4ee94a(0x1f6)](),drawCanvasText(_0x390773,_0x3efcfc['x']+_0x3efcfc[_0x4ee94a(0x198)]/0x2,_0x3efcfc['y']+_0x3efcfc[_0x4ee94a(0x21b)]/0x2,MENU_BUTTON_FONT,_0x5478d4?MENU_BUTTON_COLOR_HOVER:MENU_BUTTON_COLOR,_0x4ee94a(0x214),_0x4ee94a(0x19e)),gameCtx['restore']();}function renderFloatingScores(){const _0x4340f1=_0x261d57;try{if(!gameCtx||!floatingScores||floatingScores[_0x4340f1(0x210)]===0x0)return;const _0x3342da=Date['now']();gameCtx[_0x4340f1(0x1f6)](),gameCtx['globalAlpha']=FLOATING_SCORE_OPACITY,floatingScores[_0x4340f1(0x19a)](_0x4b7603=>{const _0x281830=_0x4340f1;_0x3342da>=_0x4b7603['displayStartTime']&&drawCanvasText(_0x4b7603[_0x281830(0x24a)],_0x4b7603['x'],_0x4b7603['y'],FLOATING_SCORE_FONT,_0x4b7603[_0x281830(0x1aa)],_0x281830(0x214),'middle',![]);}),gameCtx['globalAlpha']=0x1,gameCtx['restore']();}catch(_0x4c24c5){console[_0x4340f1(0x1ad)](_0x4340f1(0x215),_0x4c24c5);}}function renderHitSparks(){const _0x4365c9=_0x261d57;if(!gameCtx||!hitSparks||hitSparks['length']===0x0)return;gameCtx[_0x4365c9(0x1f6)](),gameCtx['globalCompositeOperation']=_0x4365c9(0x202),hitSparks['forEach'](_0x5ba8a4=>{const _0x465a14=_0x4365c9;if(_0x5ba8a4&&_0x5ba8a4[_0x465a14(0x18a)]>0.01){gameCtx[_0x465a14(0x1ae)]=_0x5ba8a4['color'],gameCtx[_0x465a14(0x239)]=_0x5ba8a4[_0x465a14(0x18a)],gameCtx[_0x465a14(0x227)]();const _0x288056=_0x5ba8a4[_0x465a14(0x1ba)]*Math[_0x465a14(0x204)](_0x5ba8a4[_0x465a14(0x18a)]);gameCtx['arc'](Math[_0x465a14(0x245)](_0x5ba8a4['x']),Math[_0x465a14(0x245)](_0x5ba8a4['y']),Math[_0x465a14(0x1af)](0.5,_0x288056/0x2),0x0,Math['PI']*0x2),gameCtx[_0x465a14(0x201)]();}}),gameCtx['globalAlpha']=0x1,gameCtx[_0x4365c9(0x1a8)]();}function renderGame(){const _0x584296=_0x261d57;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x584296(0x21d)](0x0,0x0,gameCanvas[_0x584296(0x198)],gameCanvas[_0x584296(0x21b)]);const _0x234398=Date['now']();gameCtx[_0x584296(0x1f6)]();const _0x277813=_0x584296(0x1d3),_0x41cc4a=_0x584296(0x21c),_0x4cef2d=_0x584296(0x1ea);gameCtx['font']=_0x277813,gameCtx[_0x584296(0x1e9)]=_0x584296(0x1d1),ui2upRect=null;const _0x1e550b=(_0x57bd5f,_0x5e34b5,_0x45cbe1,_0x50ab84,_0x379461=![])=>{const _0xc39633=_0x584296;let _0x3d792d=!![],_0x54f672=UI_1UP_BLINK_ON_MS*1.5,_0x1f807a=UI_1UP_BLINK_CYCLE_MS*1.5,_0x1c5e74=_0x41cc4a;if(_0x57bd5f===_0xc39633(0x1a9))_0x54f672=DEMO_TEXT_BLINK_ON_MS*0.7,_0x1f807a=DEMO_TEXT_BLINK_CYCLE_MS;else{if(_0x57bd5f===_0xc39633(0x1a6)){_0x54f672=UI_1UP_BLINK_ON_MS*1.5,_0x1f807a=UI_1UP_BLINK_CYCLE_MS*1.5;if(isInGameState&&!isManualControl)_0x54f672=DEMO_TEXT_BLINK_ON_MS*0.7,_0x1f807a=DEMO_TEXT_BLINK_CYCLE_MS;else isInGameState&&isTwoPlayerMode&&currentPlayer===0x2&&(_0x54f672=UI_1UP_BLINK_ON_MS*1.5,_0x1f807a=UI_1UP_BLINK_CYCLE_MS*1.5);}}_0x379461&&((isPaused||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||!(_0x234398%_0x1f807a<_0x54f672))&&(_0x3d792d=![]));gameCtx['textAlign']=_0x45cbe1;const _0x3c4099=gameCtx['measureText'](_0x57bd5f),_0x1b7032=_0x3c4099[_0xc39633(0x198)],_0x1afb6a=0x14,_0x3d416a=MARGIN_TOP;_0x3d792d&&(gameCtx['fillStyle']=_0x1c5e74,gameCtx[_0xc39633(0x1dc)](_0x57bd5f,_0x50ab84,_0x3d416a));const _0x2b2efb=_0x5e34b5[_0xc39633(0x1fe)]();let _0x2349da;if(_0x45cbe1===_0xc39633(0x1bb))_0x2349da=_0x50ab84+_0x1b7032/0x2;else{if(_0x45cbe1==='right')_0x2349da=_0x50ab84-_0x1b7032/0x2;else _0x2349da=_0x50ab84;}gameCtx[_0xc39633(0x23b)]=_0xc39633(0x214);const _0xa8b5c0=gameCtx[_0xc39633(0x1b1)](_0x2b2efb),_0x486b26=_0xa8b5c0[_0xc39633(0x198)],_0x3f50be=0x14,_0x17977e=_0x3d416a+SCORE_OFFSET_Y+0x5;gameCtx[_0xc39633(0x1ae)]=_0x4cef2d,gameCtx[_0xc39633(0x1dc)](_0x2b2efb,_0x2349da,_0x17977e);let _0x2153a5,_0x3b7ede,_0x536d28,_0x274fb3;_0x536d28=_0x3d416a,_0x274fb3=_0x17977e+_0x3f50be;if(_0x45cbe1===_0xc39633(0x1bb))_0x2153a5=_0x50ab84,_0x3b7ede=Math[_0xc39633(0x1af)](_0x50ab84+_0x1b7032,_0x2349da+_0x486b26/0x2);else _0x45cbe1===_0xc39633(0x1da)?(_0x3b7ede=_0x50ab84,_0x2153a5=Math['min'](_0x50ab84-_0x1b7032,_0x2349da-_0x486b26/0x2)):(_0x2153a5=Math['min'](_0x50ab84-_0x1b7032/0x2,_0x2349da-_0x486b26/0x2),_0x3b7ede=Math[_0xc39633(0x1af)](_0x50ab84+_0x1b7032/0x2,_0x2349da+_0x486b26/0x2));const _0x408dc4=_0x3b7ede-_0x2153a5,_0x3b9617=_0x274fb3-_0x536d28;if(_0x57bd5f===_0xc39633(0x209)){const _0x155242=0x14,_0xbd7e8a=0xa;ui2upRect={'x':_0x2153a5-_0x155242,'y':_0x536d28-_0xbd7e8a,'width':_0x408dc4+_0x155242*0x2,'height':_0x3b9617+_0xbd7e8a*0x2};}};let _0x2114d8,_0x5ec8f3,_0x111a02,_0x4a78c5,_0x5237e6=![],_0x548763=![],_0x4c5f98=![];if(isShowingResultsScreen)_0x2114d8=player1Score||0x0,_0x5ec8f3=player2Score||0x0,_0x111a02=highScore||0x4e20,_0x111a02=Math[_0x584296(0x1af)](_0x111a02,_0x2114d8,_0x5ec8f3),_0x4a78c5=wasLastGameAIDemo?_0x584296(0x1a9):'1UP',_0x4c5f98=![],_0x5237e6=![],_0x548763=![];else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage)_0x2114d8=player1Score||0x0,_0x5ec8f3=player2Score||0x0,_0x111a02=highScore||0x4e20,_0x111a02=Math['max'](_0x111a02,_0x2114d8,_0x5ec8f3),_0x4a78c5=wasLastGameAIDemo?_0x584296(0x1a9):_0x584296(0x23d),_0x4c5f98=![],_0x5237e6=![],_0x548763=![];else{if(isShowingPlayerGameOverMessage)_0x2114d8=player1Score||0x0,_0x5ec8f3=player2Score||0x0,_0x111a02=highScore||0x4e20,_0x111a02=Math[_0x584296(0x1af)](_0x111a02,_0x2114d8,_0x5ec8f3),_0x4a78c5=_0x584296(0x23d),_0x4c5f98=![],_0x5237e6=![],_0x548763=![];else{if(!isInGameState)_0x2114d8=player1Score||0x0,_0x5ec8f3=player2Score||0x0,_0x111a02=highScore||0x4e20,_0x111a02=Math[_0x584296(0x1af)](_0x111a02,_0x2114d8,_0x5ec8f3),_0x4a78c5=_0x584296(0x23d),_0x4c5f98=![],_0x5237e6=![],_0x548763=![];else{_0x111a02=highScore||0x0;if(!isManualControl)_0x2114d8=score,_0x5ec8f3=0x0,_0x111a02=Math['max'](_0x111a02,score),_0x4a78c5=_0x584296(0x1a9),_0x5237e6=!isShowingIntro&&!isPaused&&!isShipCaptured,_0x4c5f98=!isPaused&&!isShowingIntro&&score>0x0&&_0x111a02>0x0&&score>=_0x111a02;else isTwoPlayerMode?(_0x2114d8=currentPlayer===0x1?score:player1Score,_0x5ec8f3=currentPlayer===0x2?score:player2Score,_0x111a02=Math['max'](_0x111a02,player1Score,player2Score,score),_0x4a78c5=_0x584296(0x23d),_0x5237e6=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured,_0x548763=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured,_0x4c5f98=!isPaused&&!isShowingIntro&&score>0x0&&_0x111a02>0x0&&score>=_0x111a02):(_0x2114d8=score,_0x5ec8f3=player2Score||0x0,_0x111a02=Math[_0x584296(0x1af)](_0x111a02,score),_0x4a78c5='1UP',_0x5237e6=!isShowingIntro&&!isPaused&&playerLives>0x0&&!isShipCaptured,_0x4c5f98=!isPaused&&!isShowingIntro&&score>0x0&&_0x111a02>0x0&&score>=_0x111a02);}}}}let _0x3003fe=![];if(_0x4c5f98){if(!isManualControl)_0x3003fe=_0x5237e6&&player1TriggeredHighScoreSound;else isTwoPlayerMode?currentPlayer===0x1?_0x3003fe=_0x5237e6&&player1TriggeredHighScoreSound:_0x3003fe=_0x548763&&player2TriggeredHighScoreSound:_0x3003fe=_0x5237e6&&player1TriggeredHighScoreSound;}typeof MARGIN_SIDE!==_0x584296(0x1d9)&&typeof MARGIN_TOP!==_0x584296(0x1d9)&&typeof SCORE_OFFSET_Y!==_0x584296(0x1d9)&&(_0x1e550b(_0x4a78c5,_0x2114d8,_0x584296(0x1bb),MARGIN_SIDE,_0x5237e6),_0x1e550b('HIGH\x20SCORE',_0x111a02,_0x584296(0x214),gameCanvas[_0x584296(0x198)]/0x2,_0x3003fe),_0x1e550b(_0x584296(0x209),_0x5ec8f3,_0x584296(0x1da),gameCanvas[_0x584296(0x198)]-MARGIN_SIDE,_0x548763));if(typeof shipImage!==_0x584296(0x1d9)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x584296(0x1d9)&&typeof LIFE_ICON_SIZE!=='undefined'&&typeof LIFE_ICON_MARGIN_LEFT!==_0x584296(0x1d9)&&typeof LIFE_ICON_SPACING!==_0x584296(0x1d9)){if(shipImage[_0x584296(0x1f0)]&&shipImage['naturalHeight']!==0x0){const _0x20059f=gameCanvas[_0x584296(0x21b)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x3a4864=0x0;if(isShowingResultsScreen||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x3a4864=0x2;else{if(!isInGameState||isShowingScoreScreen)_0x3a4864=0x2;else isInGameState&&playerLives>0x0?_0x3a4864=Math[_0x584296(0x1af)](0x0,playerLives-0x1):_0x3a4864=0x0;}const _0x2191c6=0x5;for(let _0x663f5f=0x0;_0x663f5f<Math[_0x584296(0x1c4)](_0x3a4864,_0x2191c6);_0x663f5f++){const _0x786092=LIFE_ICON_MARGIN_LEFT+_0x663f5f*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x584296(0x231)](shipImage,Math['round'](_0x786092),Math['round'](_0x20059f),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}let _0x627a92=0x1;if(gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x627a92=Math[_0x584296(0x1af)](0x1,player1MaxLevelReached,player2MaxLevelReached);else{if(!isInGameState||isShowingScoreScreen)_0x627a92=0x1;else isInGameState&&(_0x627a92=level);}if(_0x627a92>0x0&&typeof LEVEL_ICON_MARGIN_BOTTOM!=='undefined'&&typeof LEVEL_ICON_SIZE!==_0x584296(0x1d9)&&typeof LEVEL_ICON_MARGIN_RIGHT!==_0x584296(0x1d9)&&typeof LEVEL_ICON_SPACING!==_0x584296(0x1d9)){const _0x531033=[{'val':0x32,'img':level50Image},{'val':0x1e,'img':level30Image},{'val':0x14,'img':level20Image},{'val':0xa,'img':level10Image},{'val':0x5,'img':level5Image},{'val':0x1,'img':level1Image}];let _0x366b18=_0x627a92,_0x381249=[],_0x5b3f47=new Set();const _0x235094=(_0x584fad,_0x49279b,_0x377632)=>{const _0x1f48d7=_0x584296;let _0x43ce40=_0x584fad,_0x2ae923=new Set(_0x377632);for(let _0x19a3c2=_0x49279b;_0x19a3c2<_0x531033[_0x1f48d7(0x210)];_0x19a3c2++){const _0x375cd0=_0x531033[_0x19a3c2][_0x1f48d7(0x246)];if(_0x43ce40>=_0x375cd0){const _0x5448eb=_0x2ae923['size']<0x3||_0x2ae923['has'](_0x375cd0);if(!_0x5448eb)continue;const _0x4cee30=Math['floor'](_0x43ce40/_0x375cd0);_0x43ce40-=_0x4cee30*_0x375cd0,_0x2ae923['add'](_0x375cd0);if(_0x43ce40===0x0)return!![];}}return _0x43ce40===0x0;};for(let _0x4ea038=0x0;_0x4ea038<_0x531033[_0x584296(0x210)]-0x1;_0x4ea038++){const _0x52bebd=_0x531033[_0x4ea038],_0x453dcb=_0x52bebd[_0x584296(0x246)],_0x146738=_0x52bebd['img'];if(_0x366b18>=_0x453dcb){const _0x56a918=Math[_0x584296(0x1d2)](_0x366b18/_0x453dcb),_0x251a47=_0x366b18-_0x56a918*_0x453dcb;let _0xa3fca7=new Set(_0x5b3f47);_0xa3fca7[_0x584296(0x1e6)](_0x453dcb);if(_0x235094(_0x251a47,_0x4ea038+0x1,_0xa3fca7)){for(let _0xc27f3b=0x0;_0xc27f3b<_0x56a918;_0xc27f3b++){_0x381249[_0x584296(0x197)](_0x146738);}_0x366b18=_0x251a47,_0x5b3f47['add'](_0x453dcb);if(_0x366b18===0x0)break;}}}if(_0x366b18>0x0){const _0x14093a=_0x5b3f47['size']<0x3||_0x5b3f47['has'](0x1);if(_0x14093a){for(let _0x10e639=0x0;_0x10e639<_0x366b18;_0x10e639++){_0x381249['push'](level1Image);}_0x5b3f47['add'](0x1),_0x366b18=0x0;}else console[_0x584296(0x1df)](_0x584296(0x1d8)+_0x366b18+_0x584296(0x1f7),_0x5b3f47);}_0x381249[_0x584296(0x210)]===0x0&&_0x381249[_0x584296(0x197)](level1Image);const _0x3b6a1c=_0x381249[_0x584296(0x210)],_0xfdb22a=_0x3b6a1c*LEVEL_ICON_SIZE+Math['max'](0x0,_0x3b6a1c-0x1)*LEVEL_ICON_SPACING,_0x561d3f=gameCanvas[_0x584296(0x198)]-LEVEL_ICON_MARGIN_RIGHT,_0xfd5713=_0x561d3f-_0xfdb22a,_0x5f276d=gameCanvas[_0x584296(0x21b)]-LEVEL_ICON_MARGIN_BOTTOM-LEVEL_ICON_SIZE;let _0x3be46b=_0xfd5713;for(const _0x3be60b of _0x381249){_0x3be60b&&_0x3be60b[_0x584296(0x1f0)]&&_0x3be60b[_0x584296(0x22b)]!==0x0&&gameCtx[_0x584296(0x231)](_0x3be60b,Math[_0x584296(0x245)](_0x3be46b),Math[_0x584296(0x245)](_0x5f276d),LEVEL_ICON_SIZE,LEVEL_ICON_SIZE),_0x3be46b+=LEVEL_ICON_SIZE+LEVEL_ICON_SPACING;}}gameCtx['restore'](),gameCtx[_0x584296(0x1f6)]();if(ship&&!isShowingCaptureMessage){let _0x5c593b=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0x54ff19=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS,_0x573269=_0x234398%_0x54ff19;_0x573269>=INVINCIBILITY_BLINK_ON_MS&&(_0x5c593b=![]);}if(_0x5c593b){let _0x13c7f9=ship['x'],_0x4200aa=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x4200aa&&(_0x13c7f9=Math[_0x584296(0x245)](gameCanvas[_0x584296(0x198)]/0x2-ship[_0x584296(0x198)]/0x2));const _0x4b0987=gameCanvas[_0x584296(0x21b)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;typeof shipImage!==_0x584296(0x1d9)&&shipImage[_0x584296(0x1f0)]&&shipImage[_0x584296(0x22b)]!==0x0?gameCtx[_0x584296(0x231)](shipImage,Math['round'](_0x13c7f9),Math[_0x584296(0x245)](_0x4b0987),ship[_0x584296(0x198)],ship[_0x584296(0x21b)]):(gameCtx[_0x584296(0x1ae)]=_0x584296(0x22f),gameCtx['fillRect'](Math[_0x584296(0x245)](_0x13c7f9),Math[_0x584296(0x245)](_0x4b0987),ship['width'],ship['height']));if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&typeof shipImage!=='undefined'&&shipImage[_0x584296(0x1f0)]&&shipImage[_0x584296(0x22b)]!==0x0){const _0x410817=_0x13c7f9+DUAL_SHIP_OFFSET_X;gameCtx['drawImage'](shipImage,Math[_0x584296(0x245)](_0x410817),Math[_0x584296(0x245)](_0x4b0987),ship['width'],ship[_0x584296(0x21b)]);}}}fallingShips[_0x584296(0x210)]>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x584296(0x1f0)]&&fallingShips[_0x584296(0x19a)](_0x4c51f8=>{const _0x5ab3b9=_0x584296;if(_0x4c51f8){gameCtx[_0x5ab3b9(0x1f6)]();const _0x60346b=_0x4c51f8['x']+_0x4c51f8[_0x5ab3b9(0x198)]/0x2,_0x38b96b=_0x4c51f8['y']+_0x4c51f8[_0x5ab3b9(0x21b)]/0x2;gameCtx[_0x5ab3b9(0x236)](_0x60346b,_0x38b96b),gameCtx[_0x5ab3b9(0x192)](_0x4c51f8['rotation']||0x0);const _0x1eaf18=-_0x4c51f8[_0x5ab3b9(0x198)]/0x2,_0x32fe63=-_0x4c51f8[_0x5ab3b9(0x21b)]/0x2,_0x5aefad=_0x4c51f8[_0x5ab3b9(0x198)],_0x471e31=_0x4c51f8[_0x5ab3b9(0x21b)];gameCtx[_0x5ab3b9(0x231)](shipImage,_0x1eaf18,_0x32fe63,_0x5aefad,_0x471e31),typeof _0x4c51f8[_0x5ab3b9(0x1db)]==='number'&&_0x4c51f8[_0x5ab3b9(0x1db)]>0.01&&(gameCtx[_0x5ab3b9(0x1f6)](),gameCtx[_0x5ab3b9(0x239)]=_0x4c51f8['tintProgress'],gameCtx[_0x5ab3b9(0x1ae)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x5ab3b9(0x18b)]=_0x5ab3b9(0x1c0),gameCtx['fillRect'](_0x1eaf18,_0x32fe63,_0x5aefad,_0x471e31),gameCtx[_0x5ab3b9(0x1a8)]()),gameCtx[_0x5ab3b9(0x1a8)]();}});gameCtx[_0x584296(0x1a8)]();if(!isInGameState){if(isShowingScoreScreen){if(typeof LIFE_ICON_SIZE!==_0x584296(0x1d9)){gameCtx[_0x584296(0x1f6)]();const _0x5612ab=gameCanvas[_0x584296(0x198)]/0x2;let _0x1929f8=gameCanvas[_0x584296(0x21b)]*0.25+SCORE_SCREEN_VERTICAL_OFFSET,_0x1083b6=0x0,_0x26843e=_0x1929f8+0x0;drawCanvasText(_0x584296(0x1d6),_0x5612ab,_0x26843e-0x1e,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP,_0x584296(0x214),'middle',!![]);let _0x3503a2=_0x26843e+SCORE_SCREEN_LINE_V_SPACING*1.8;const _0x15140b=_0x584296(0x23a);gameCtx[_0x584296(0x1a2)]=SCORE_SCREEN_TEXT_FONT;const _0x4b6e2b=gameCtx[_0x584296(0x1b1)](_0x15140b)[_0x584296(0x198)],_0x38e962=LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING+_0x4b6e2b;_0x1083b6=_0x5612ab-_0x38e962/0x2-0x1e;typeof shipImage!=='undefined'&&shipImage[_0x584296(0x1f0)]&&shipImage['naturalHeight']!==0x0&&gameCtx[_0x584296(0x231)](shipImage,Math[_0x584296(0x245)](_0x1083b6),Math[_0x584296(0x245)](_0x3503a2-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x15140b,_0x1083b6+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x3503a2,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,'left','middle',![]);let _0x455fbc=_0x3503a2+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x222f08=_0x584296(0x222)+RECURRING_EXTRA_LIFE_INTERVAL+_0x584296(0x1c7);typeof shipImage!==_0x584296(0x1d9)&&shipImage[_0x584296(0x1f0)]&&shipImage[_0x584296(0x22b)]!==0x0&&gameCtx[_0x584296(0x231)](shipImage,Math[_0x584296(0x245)](_0x1083b6),Math[_0x584296(0x245)](_0x455fbc-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x222f08,_0x1083b6+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x455fbc,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x584296(0x1bb),'middle',![]);let _0x161dd3=_0x455fbc+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x5d95cf='\x20EXT\x20LIFE\x20FOR\x20EVERY\x20'+RECURRING_EXTRA_LIFE_INTERVAL+_0x584296(0x1c7);typeof shipImage!==_0x584296(0x1d9)&&shipImage[_0x584296(0x1f0)]&&shipImage[_0x584296(0x22b)]!==0x0&&gameCtx[_0x584296(0x231)](shipImage,Math['round'](_0x1083b6),Math[_0x584296(0x245)](_0x161dd3-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x5d95cf,_0x1083b6+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x161dd3,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x584296(0x1bb),'middle',![]);let _0x24246a=_0x161dd3+SCORE_SCREEN_LINE_V_SPACING*1.8;drawCanvasText(SCORE_SCREEN_PLATINI_TEXT,_0x5612ab-0xa,_0x24246a+0x1e,MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x584296(0x214),'middle',![]),gameCtx[_0x584296(0x1a8)]();}}else{gameCtx[_0x584296(0x1f6)]();const _0x4885f1=gameCanvas[_0x584296(0x198)],_0x2675e9=gameCanvas[_0x584296(0x21b)],_0x520968=_0x4885f1/0x2;selectedButtonIndex===-0x1&&(selectedButtonIndex=0x0);let _0x26a618=MENU_LOGO_APPROX_HEIGHT,_0x491e16=_0x26a618*(logoImage[_0x584296(0x1be)]/logoImage[_0x584296(0x22b)]||0x1);typeof logoImage!==_0x584296(0x1d9)&&logoImage[_0x584296(0x1f0)]&&logoImage[_0x584296(0x22b)]!==0x0&&(_0x26a618=logoImage[_0x584296(0x22b)]*LOGO_SCALE_FACTOR,_0x491e16=logoImage[_0x584296(0x1be)]*LOGO_SCALE_FACTOR);const _0x47ddec=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x575e38=_0x26a618+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x47ddec;let _0x59ba81=(_0x2675e9-_0x575e38)/0x2-0x46;_0x59ba81+=MENU_GENERAL_Y_OFFSET;const _0x1fbda8=_0x520968-_0x491e16/0x2,_0x577a04=_0x59ba81+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x584296(0x1d9)&&logoImage[_0x584296(0x1f0)]&&logoImage[_0x584296(0x22b)]!==0x0?gameCtx[_0x584296(0x231)](logoImage,Math['round'](_0x1fbda8),Math[_0x584296(0x245)](_0x577a04),_0x491e16,_0x26a618):drawCanvasText('LOGO',_0x520968,_0x577a04+_0x26a618/0x2,_0x584296(0x241),_0x584296(0x1bd));if(isFiringModeSelectMode)drawCanvasButton(_0x584296(0x1ef),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x584296(0x189),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x584296(0x1f9),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x584296(0x1b4),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x584296(0x244),0x0,selectedButtonIndex===0x0),drawCanvasButton('GAME\x20EXIT',0x1,selectedButtonIndex===0x1));const _0x13cd32=getMenuButtonRect(0x1);let _0x5297b9;_0x13cd32?_0x5297b9=_0x13cd32['y']+_0x13cd32[_0x584296(0x21b)]+MENU_BUTTON_SUBTITLE_V_GAP+_0x47ddec/0x2:_0x5297b9=_0x59ba81+_0x26a618+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0x47ddec/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x520968-0x1,Math[_0x584296(0x245)](_0x5297b9),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,'center',_0x584296(0x19e),!![]),gameCtx[_0x584296(0x1a8)]();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x584296(0x1f6)]();let _0x324e63=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x324e63&&(bullets[_0x584296(0x19a)](_0x52a417=>{const _0x5e758e=_0x584296;_0x52a417&&(typeof bulletImage!==_0x5e758e(0x1d9)&&bulletImage[_0x5e758e(0x1f0)]?gameCtx['drawImage'](bulletImage,Math[_0x5e758e(0x245)](_0x52a417['x']),Math[_0x5e758e(0x245)](_0x52a417['y']),_0x52a417['width'],_0x52a417[_0x5e758e(0x21b)]):(gameCtx[_0x5e758e(0x1ae)]='yellow',gameCtx[_0x5e758e(0x211)](Math['round'](_0x52a417['x']),Math['round'](_0x52a417['y']),_0x52a417[_0x5e758e(0x198)],_0x52a417[_0x5e758e(0x21b)])));}),enemyBullets[_0x584296(0x19a)](_0x2e7ef3=>{const _0x598ae2=_0x584296;_0x2e7ef3&&(typeof enemyBulletImage!==_0x598ae2(0x1d9)&&enemyBulletImage[_0x598ae2(0x1f0)]&&enemyBulletImage[_0x598ae2(0x1be)]>0x0?gameCtx['drawImage'](enemyBulletImage,Math[_0x598ae2(0x245)](_0x2e7ef3['x']),Math[_0x598ae2(0x245)](_0x2e7ef3['y']),_0x2e7ef3[_0x598ae2(0x198)],_0x2e7ef3[_0x598ae2(0x21b)]):(gameCtx[_0x598ae2(0x1ae)]=_0x598ae2(0x1ea),gameCtx[_0x598ae2(0x211)](Math[_0x598ae2(0x245)](_0x2e7ef3['x']),Math['round'](_0x2e7ef3['y']),_0x2e7ef3[_0x598ae2(0x198)],_0x2e7ef3['height'])));}));enemies[_0x584296(0x19a)](_0x5ed3f8=>{const _0x5190b1=_0x584296;if(_0x5ed3f8&&_0x5ed3f8['y']<gameCanvas[_0x5190b1(0x21b)]+_0x5ed3f8[_0x5190b1(0x21b)]*0x2&&_0x5ed3f8['y']>-_0x5ed3f8[_0x5190b1(0x21b)]*0x2){gameCtx['save']();try{let _0x3dff01=null,_0x136fb6=_0x5190b1(0x1bd);const _0x493304=!isPaused&&_0x234398%(ENEMY_ANIMATION_INTERVAL_MS*0x2)>=ENEMY_ANIMATION_INTERVAL_MS;if(_0x5ed3f8[_0x5190b1(0x213)]===ENEMY3_TYPE)_0x3dff01=_0x493304?bossGalagaImage2:bossGalagaImage,_0x136fb6=_0x5190b1(0x212);else _0x5ed3f8[_0x5190b1(0x213)]===ENEMY2_TYPE?(_0x3dff01=_0x493304?butterflyImage2:butterflyImage,_0x136fb6='cyan'):(_0x3dff01=_0x493304?beeImage2:beeImage,_0x136fb6=_0x5190b1(0x21c));const _0x41c9b4=Math[_0x5190b1(0x245)](_0x5ed3f8['x']),_0x33de8e=Math[_0x5190b1(0x245)](_0x5ed3f8['y']),_0x5d61cf=_0x5ed3f8[_0x5190b1(0x198)],_0x275e40=_0x5ed3f8[_0x5190b1(0x21b)],_0xb70fcb=_0x5ed3f8[_0x5190b1(0x213)]===ENEMY3_TYPE&&_0x5ed3f8[_0x5190b1(0x1dd)],_0x5edf7a=!isPaused&&(_0x5ed3f8[_0x5190b1(0x20e)]===_0x5190b1(0x1d7)||_0x5ed3f8[_0x5190b1(0x20e)]===_0x5190b1(0x221)||_0x5ed3f8[_0x5190b1(0x20e)]===_0x5190b1(0x1e2))&&_0x5ed3f8['y']>-_0x5ed3f8[_0x5190b1(0x21b)]*0.5&&(Math[_0x5190b1(0x1b9)](_0x5ed3f8[_0x5190b1(0x1c3)])>0.1||Math[_0x5190b1(0x1b9)](_0x5ed3f8['velocityY'])>0.1),_0x88f367=_0x5ed3f8['state']===_0x5190b1(0x1f1)&&_0x5ed3f8[_0x5190b1(0x213)]===ENEMY3_TYPE&&_0x5ed3f8[_0x5190b1(0x19f)]&&_0x5ed3f8[_0x5190b1(0x1ff)]&&typeof _0x5ed3f8['capturedShipX']===_0x5190b1(0x1b0)&&typeof _0x5ed3f8[_0x5190b1(0x18d)]==='number'&&typeof _0x5ed3f8[_0x5190b1(0x1e0)]===_0x5190b1(0x1b0),_0x456b34=_0x5ed3f8[_0x5190b1(0x20e)]!=='showing_capture_message'&&_0x5ed3f8[_0x5190b1(0x213)]===ENEMY3_TYPE&&_0x5ed3f8['hasCapturedShip']&&_0x5ed3f8[_0x5190b1(0x1ff)],_0x1104f0=_0x88f367||_0x456b34?_0x5ed3f8[_0x5190b1(0x1ff)]['width']:0x0,_0x3febe9=_0x88f367||_0x456b34?_0x5ed3f8[_0x5190b1(0x1ff)]['height']:0x0;let _0x375376=0x0,_0x1b6ae2=0x0;if(_0x88f367)_0x375376=Math[_0x5190b1(0x245)](_0x5ed3f8[_0x5190b1(0x1c2)]),_0x1b6ae2=Math[_0x5190b1(0x245)](_0x5ed3f8[_0x5190b1(0x18d)]);else _0x456b34&&(_0x375376=Math['round'](_0x5ed3f8['x']+CAPTURED_SHIP_OFFSET_X),_0x1b6ae2=Math['round'](_0x5ed3f8['y']+CAPTURED_SHIP_OFFSET_Y));const _0x167530=(_0xc20f4b,_0x55b771,_0x13ce50,_0x202194)=>{const _0x3afc26=_0x5190b1;typeof _0x3dff01!==_0x3afc26(0x1d9)&&_0x3dff01[_0x3afc26(0x1f0)]&&_0x3dff01[_0x3afc26(0x22b)]!==0x0?gameCtx['drawImage'](_0x3dff01,_0xc20f4b,_0x55b771,_0x13ce50,_0x202194):(gameCtx[_0x3afc26(0x1ae)]=_0x136fb6,gameCtx[_0x3afc26(0x211)](_0xc20f4b,_0x55b771,_0x13ce50,_0x202194)),_0xb70fcb&&(gameCtx[_0x3afc26(0x18b)]=_0x3afc26(0x1c0),gameCtx[_0x3afc26(0x1ae)]=_0x3afc26(0x223),gameCtx[_0x3afc26(0x211)](_0xc20f4b,_0x55b771,_0x13ce50,_0x202194),gameCtx['globalCompositeOperation']='source-over');};if(_0x5edf7a){const _0x5dbfd2=_0x41c9b4+_0x5d61cf/0x2,_0x1cc5cf=_0x33de8e+_0x275e40/0x2;gameCtx[_0x5190b1(0x236)](_0x5dbfd2,_0x1cc5cf);let _0x1e5d73=Math[_0x5190b1(0x1cb)](_0x5ed3f8['velocityY'],_0x5ed3f8[_0x5190b1(0x1c3)])+Math['PI']/0x2;if(_0x5ed3f8['type']===ENEMY3_TYPE&&_0x5ed3f8[_0x5190b1(0x20e)]===_0x5190b1(0x1d7))_0x1e5d73+=Math['PI'];gameCtx[_0x5190b1(0x192)](_0x1e5d73),_0x167530(-_0x5d61cf/0x2,-_0x275e40/0x2,_0x5d61cf,_0x275e40);if(_0x456b34&&typeof shipImage!==_0x5190b1(0x1d9)&&shipImage['complete']){gameCtx[_0x5190b1(0x239)]=0.8;const _0x3c24e0=CAPTURED_SHIP_OFFSET_X,_0x5d92bf=CAPTURED_SHIP_OFFSET_Y;gameCtx[_0x5190b1(0x231)](shipImage,_0x3c24e0-_0x1104f0/0x2,_0x5d92bf-_0x3febe9/0x2,_0x1104f0,_0x3febe9),gameCtx[_0x5190b1(0x239)]=0x1,gameCtx[_0x5190b1(0x1f6)](),gameCtx[_0x5190b1(0x1ae)]=CAPTURED_SHIP_TINT_COLOR,gameCtx['globalCompositeOperation']=_0x5190b1(0x1c0),gameCtx[_0x5190b1(0x211)](_0x3c24e0-_0x1104f0/0x2,_0x5d92bf-_0x3febe9/0x2,_0x1104f0,_0x3febe9),gameCtx['restore']();}gameCtx['rotate'](-_0x1e5d73),gameCtx[_0x5190b1(0x236)](-_0x5dbfd2,-_0x1cc5cf);}else _0x167530(_0x41c9b4,_0x33de8e,_0x5d61cf,_0x275e40),_0x456b34&&typeof shipImage!==_0x5190b1(0x1d9)&&shipImage[_0x5190b1(0x1f0)]&&(gameCtx[_0x5190b1(0x239)]=0.8,gameCtx[_0x5190b1(0x231)](shipImage,_0x375376,_0x1b6ae2,_0x1104f0,_0x3febe9),gameCtx[_0x5190b1(0x239)]=0x1,gameCtx[_0x5190b1(0x1f6)](),gameCtx[_0x5190b1(0x1ae)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x5190b1(0x18b)]=_0x5190b1(0x1c0),gameCtx[_0x5190b1(0x211)](_0x375376,_0x1b6ae2,_0x1104f0,_0x3febe9),gameCtx['restore']());if(_0x88f367&&typeof shipImage!==_0x5190b1(0x1d9)&&shipImage[_0x5190b1(0x1f0)]){gameCtx['save']();const _0x5771bc=_0x375376+_0x1104f0/0x2,_0x342123=_0x1b6ae2+_0x3febe9/0x2;gameCtx['translate'](_0x5771bc,_0x342123),gameCtx[_0x5190b1(0x192)](_0x5ed3f8['captureAnimationRotation']),gameCtx[_0x5190b1(0x239)]=0.8,gameCtx[_0x5190b1(0x231)](shipImage,-_0x1104f0/0x2,-_0x3febe9/0x2,_0x1104f0,_0x3febe9),gameCtx[_0x5190b1(0x239)]=0x1,gameCtx['save'](),gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x5190b1(0x18b)]=_0x5190b1(0x1c0),gameCtx[_0x5190b1(0x211)](-_0x1104f0/0x2,-_0x3febe9/0x2,_0x1104f0,_0x3febe9),gameCtx[_0x5190b1(0x1a8)](),gameCtx[_0x5190b1(0x1a8)]();}}catch(_0x1bd386){console[_0x5190b1(0x1ad)](_0x5190b1(0x1a5),_0x1bd386),gameCtx['fillStyle']=_0x5190b1(0x217),gameCtx[_0x5190b1(0x211)](Math[_0x5190b1(0x245)](_0x5ed3f8['x']),Math[_0x5190b1(0x245)](_0x5ed3f8['y']),_0x5ed3f8[_0x5190b1(0x198)],_0x5ed3f8[_0x5190b1(0x21b)]);}finally{gameCtx[_0x5190b1(0x1a8)]();}}});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){gameCtx['save']();const _0x3dd1bc=0.4+(Math[_0x584296(0x24b)](_0x234398*CAPTURE_BEAM_PULSE_SPEED)+0x1)/0x2*0.6,_0x23f154=captureBeamProgress;gameCtx[_0x584296(0x239)]=_0x23f154*_0x3dd1bc;const _0x688563=enemies[_0x584296(0x22c)](_0x3347e4=>_0x3347e4['id']===capturingBossId);if(_0x688563){const _0x38a037=_0x688563['x']+BOSS_WIDTH/0x2,_0x4db635=_0x688563['y']+BOSS_HEIGHT,_0xfb2e1a=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x36568d=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0xe09e99=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR;if(_0x4db635<_0xfb2e1a){const _0x52fbba=gameCtx[_0x584296(0x19d)](_0x38a037,_0x4db635,_0x38a037,_0xfb2e1a);_0x52fbba[_0x584296(0x240)](0x0,CAPTURE_BEAM_COLOR_START),_0x52fbba['addColorStop'](0x1,CAPTURE_BEAM_COLOR_END),gameCtx[_0x584296(0x1ae)]=_0x52fbba,gameCtx[_0x584296(0x227)](),gameCtx[_0x584296(0x194)](_0x38a037-_0x36568d/0x2,_0x4db635),gameCtx[_0x584296(0x1ac)](_0x38a037+_0x36568d/0x2,_0x4db635),gameCtx[_0x584296(0x1ac)](_0x38a037+_0xe09e99/0x2,_0xfb2e1a),gameCtx[_0x584296(0x1ac)](_0x38a037-_0xe09e99/0x2,_0xfb2e1a),gameCtx[_0x584296(0x23c)](),gameCtx[_0x584296(0x201)]();}}gameCtx[_0x584296(0x1a8)]();}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x3ae828=![];const _0x80fca1=gameCanvas[_0x584296(0x21b)]/0x2,_0x1b5a87=gameCanvas[_0x584296(0x198)]/0x2,_0x2c6631='NUMBER\x20OF\x20HITS\x20'+challengingStageEnemiesHit,_0x55a292=_0x584296(0x233)+scoreEarnedThisCS;if(isPaused)drawCanvasText(_0x584296(0x1e5),_0x1b5a87,_0x80fca1,PAUSE_TEXT_FONT,PAUSE_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),PAUSE_TEXT_SHADOW),_0x3ae828=!![];else{if(isShowingCaptureMessage)drawCanvasText('FIGHTER\x20CAPTURED',_0x1b5a87,_0x80fca1-0x28,INTRO_TEXT_FONT,_0x584296(0x21c),_0x584296(0x214),_0x584296(0x19e),!![]),_0x3ae828=!![];else{if(showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage)drawCanvasText(_0x2c6631,_0x1b5a87,_0x80fca1,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),!![]),_0x3ae828=!![],(showCsBonusScoreMessage||showPerfectMessage)&&drawCanvasText(_0x584296(0x230),_0x1b5a87,_0x80fca1-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,PERFECT_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),!![]),showCsBonusScoreMessage&&drawCanvasText(_0x584296(0x1d5),_0x1b5a87,_0x80fca1+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_BONUS_SCORE_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),!![]);else{if(showCSClearMessage)drawCanvasText(_0x584296(0x1ed),_0x1b5a87,_0x80fca1-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),!![]),_0x3ae828=!![],showCsHitsForClearMessage&&drawCanvasText(_0x2c6631,_0x1b5a87,_0x80fca1,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),!![]),showCsScoreForClearMessage&&drawCanvasText(_0x55a292,_0x1b5a87,_0x80fca1+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_SCORE_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),!![]);else{if(showExtraLifeMessage)drawCanvasText('EXTRA\x20LIFE',_0x1b5a87,_0x80fca1,INTRO_TEXT_FONT,EXTRA_LIFE_TEXT_COLOR,_0x584296(0x214),_0x584296(0x19e),!![]),_0x3ae828=!![];else{if(isShowingIntro){let _0x6b9d1c='',_0x28579e=INTRO_TEXT_COLOR_NORMAL;if(introStep===0x1)_0x6b9d1c=!isManualControl?_0x584296(0x1a9):_0x584296(0x18f)+(isTwoPlayerMode?currentPlayer:0x1);else{if(introStep===0x2)_0x6b9d1c='STAGE\x20'+level;else introStep===0x3&&(_0x6b9d1c=_0x584296(0x1ee),_0x28579e=INTRO_TEXT_COLOR_CS_TEXT,!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}_0x6b9d1c&&(drawCanvasText(_0x6b9d1c,_0x1b5a87,_0x80fca1,INTRO_TEXT_FONT,_0x28579e,_0x584296(0x214),_0x584296(0x19e),!![]),_0x3ae828=!![]);}else{if(!isManualControl&&isShowingDemoText&&!_0x3ae828&&!isEntrancePhaseActive&&!isCsCompletionDelayActive){const _0x17454e=DEMO_TEXT_BLINK_CYCLE_MS*1.5,_0x216b8b=DEMO_TEXT_BLINK_ON_MS*1.5;_0x234398%_0x17454e<_0x216b8b&&drawCanvasText('PUSH\x20START\x20BUTTON',_0x1b5a87,_0x80fca1,DEMO_TEXT_LINE1_FONT,DEMO_TEXT_COLOR,'center','middle',!![]);}}}}}}}gameCtx[_0x584296(0x1a8)]();}else{if(isShowingPlayerGameOverMessage){const _0x3c0846=_0x584296(0x18f)+playerWhoIsGameOver,_0x32ddb5=RESULTS_LINE_V_SPACING_SINGLE,_0x124b90=gameCanvas['height']*0.45;drawCanvasText(_0x3c0846,gameCanvas[_0x584296(0x198)]/0x2,_0x124b90-_0x32ddb5/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x584296(0x214),_0x584296(0x19e),!![]),drawCanvasText(_0x584296(0x237),gameCanvas[_0x584296(0x198)]/0x2,_0x124b90+_0x32ddb5/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x584296(0x214),_0x584296(0x19e),!![]);}else{if(gameOverSequenceStartTime>0x0){const _0x824fc8=_0x234398-gameOverSequenceStartTime,_0x52c6f9=_0x824fc8<GAME_OVER_DURATION,_0xf82bcb=_0x824fc8>=GAME_OVER_DURATION;if(_0x52c6f9)drawCanvasText(_0x584296(0x237),gameCanvas[_0x584296(0x198)]/0x2,gameCanvas[_0x584296(0x21b)]/0x2,GAME_OVER_FONT,GAME_OVER_COLOR,_0x584296(0x214),_0x584296(0x19e),GAME_OVER_SHADOW);else{if(_0xf82bcb){gameCtx[_0x584296(0x1f6)]();const _0x44d010=gameCanvas[_0x584296(0x198)]/0x2,_0x62f4bf=gameCanvas[_0x584296(0x198)];let _0x2dc792=RESULTS_START_Y+RESULTS_LINE_V_SPACING_SINGLE;const _0x546bb4=(_0x1dd587,_0x241f2d,_0x531a02,_0x316027,_0x273461,_0x503a1a,_0x5b055f,_0x2241c3)=>{const _0x45c8a2=_0x584296;let _0x34c3e4=_0x2241c3;const _0xfceecc=RESULTS_VALUE_COLOR_YELLOW,_0x44facb=RESULTS_VALUE_COLOR_CYAN;drawCanvasText(_0x45c8a2(0x1c9),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_HEADER_COLOR,_0x45c8a2(0x214),'top',!![]),_0x34c3e4+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x1dd587,_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,'white','center','middle',![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x45c8a2(0x22d),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,_0xfceecc,_0x45c8a2(0x214),'middle',![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x503a1a[_0x45c8a2(0x1fe)](),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,_0x44facb,_0x45c8a2(0x214),_0x45c8a2(0x19e),![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x45c8a2(0x1ec),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x45c8a2(0x214),'middle',![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x241f2d[_0x45c8a2(0x1fe)](),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x45c8a2(0x214),'middle',![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x45c8a2(0x225),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x45c8a2(0x214),_0x45c8a2(0x19e),![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x531a02[_0x45c8a2(0x1fe)](),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x45c8a2(0x214),_0x45c8a2(0x19e),![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText('NUMBER\x20OF\x20HITS',_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x45c8a2(0x214),_0x45c8a2(0x19e),![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x316027['toString'](),_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center',_0x45c8a2(0x19e),![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText('HIT-MISS-RATIO',_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0x45c8a2(0x19e),![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x273461,_0x5b055f,_0x34c3e4,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x45c8a2(0x214),_0x45c8a2(0x19e),![]),_0x34c3e4+=RESULTS_LINE_V_SPACING_SINGLE*1.5,drawCanvasText(RESULTS_PLATINI_TEXT,_0x5b055f,_0x34c3e4-0xa,RESULTS_FOOTER_FONT,RESULTS_FOOTER_COLOR,_0x45c8a2(0x214),_0x45c8a2(0x19e),![]);};if(isTwoPlayerMode){const _0x432b55=player1ShotsFired||0x0,_0x245b44=player1EnemiesHit||0x0,_0x191830=_0x432b55>0x0?Math[_0x584296(0x245)](_0x245b44/_0x432b55*0x64)+'%':'0%',_0x106a92=player2ShotsFired||0x0,_0x593f90=player2EnemiesHit||0x0,_0x536f7c=_0x106a92>0x0?Math[_0x584296(0x245)](_0x593f90/_0x106a92*0x64)+'%':'0%',_0x1eff8e=_0x62f4bf*0.4,_0x4e23f2=_0x62f4bf*0.1,_0x401020=_0x44d010-_0x4e23f2/0x2-_0x1eff8e/0x2+_0x1eff8e*0.1,_0x542a35=_0x44d010+_0x4e23f2/0x2+_0x1eff8e/0x2-_0x1eff8e*0.1,_0x103bcc=_0x584296(0x1b7);_0x546bb4(_0x103bcc,player1Score,_0x432b55,_0x245b44,_0x191830,player1MaxLevelReached,_0x401020,_0x2dc792),_0x546bb4('PLAYER\x202',player2Score,_0x106a92,_0x593f90,_0x536f7c,player2MaxLevelReached,_0x542a35,_0x2dc792);let _0x577e0c=0x0;if(player1Score>player2Score)_0x577e0c=0x1;else{if(player2Score>player1Score)_0x577e0c=0x2;}if(_0x577e0c>0x0){let _0x21e75b=_0x2dc792;_0x21e75b+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,_0x21e75b+=RESULTS_LINE_V_SPACING_SINGLE,_0x21e75b+=RESULTS_LINE_V_SPACING_SINGLE*0x2;const _0x43cc15=_0x584296(0x18f)+_0x577e0c,_0x3b9bfc=_0x584296(0x220);drawCanvasText(_0x43cc15,_0x44d010,_0x21e75b,INTRO_TEXT_FONT,_0x584296(0x1ea),_0x584296(0x214),_0x584296(0x19e),!![]),drawCanvasText(_0x3b9bfc,_0x44d010,_0x21e75b+RESULTS_LINE_V_SPACING_SINGLE,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center','middle',!![]);}}else{const _0x4d5ea8=player1ShotsFired||0x0,_0x4503c9=player1EnemiesHit||0x0,_0x2a2aff=wasLastGameAIDemo?score:player1Score,_0x44eb52=wasLastGameAIDemo?level:player1MaxLevelReached,_0x13aaba=_0x4d5ea8>0x0?Math[_0x584296(0x245)](_0x4503c9/_0x4d5ea8*0x64)+'%':'0%',_0x465359=wasLastGameAIDemo?_0x584296(0x1a9):_0x584296(0x1b7);_0x546bb4(_0x465359,_0x2a2aff,_0x4d5ea8,_0x4503c9,_0x13aaba,_0x44eb52,_0x44d010,_0x2dc792);}gameCtx[_0x584296(0x1a8)]();}}}}}}}catch(_0x347181){console[_0x584296(0x1ad)](_0x584296(0x1a7),_0x347181,_0x347181['stack']);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;try{gameCtx&&gameCanvas&&(gameCtx[_0x584296(0x1ae)]=_0x584296(0x21c),gameCtx['font']=_0x584296(0x243),gameCtx[_0x584296(0x23b)]=_0x584296(0x214),gameCtx[_0x584296(0x1dc)](_0x584296(0x1b3),gameCanvas[_0x584296(0x198)]/0x2,gameCanvas['height']/0x2));}catch(_0x21d284){}try{showMenuState();}catch(_0x53fe39){}}}function hideCursor(){const _0x544abe=_0x261d57;gameCanvas&&(gameCanvas['style'][_0x544abe(0x249)]=_0x544abe(0x24e)),mouseIdleTimerId=null;}function handleCanvasMouseMove(_0x1c8455){const _0x16fc7d=_0x261d57;if(!gameCanvas)return;let _0xbc6d8e=_0x16fc7d(0x208);const _0x2209b5=!isInGameState||isShowingScoreScreen||gameOverSequenceStartTime>0x0&&Date[_0x16fc7d(0x1c1)]()-gameOverSequenceStartTime>=GAME_OVER_DURATION;let _0x2d0734=![],_0x568a4e=selectedButtonIndex;if(_0x2209b5){const _0x33d39e=gameCanvas['getBoundingClientRect'](),_0x47baa3=gameCanvas[_0x16fc7d(0x198)]/_0x33d39e['width'],_0x2a8db0=gameCanvas[_0x16fc7d(0x21b)]/_0x33d39e[_0x16fc7d(0x21b)],_0x282e47=(_0x1c8455[_0x16fc7d(0x24d)]-_0x33d39e[_0x16fc7d(0x1bb)])*_0x47baa3,_0x41bc16=(_0x1c8455[_0x16fc7d(0x1e7)]-_0x33d39e[_0x16fc7d(0x1d1)])*_0x2a8db0,_0x57c34e=getMenuButtonRect(0x0),_0x167291=getMenuButtonRect(0x1);if(_0x57c34e&&checkCollision({'x':_0x282e47,'y':_0x41bc16,'width':0x1,'height':0x1},_0x57c34e))_0x568a4e=0x0,_0x2d0734=!![];else _0x167291&&checkCollision({'x':_0x282e47,'y':_0x41bc16,'width':0x1,'height':0x1},_0x167291)?(_0x568a4e=0x1,_0x2d0734=!![]):(_0x568a4e=-0x1,_0x2d0734=![]);_0x568a4e!==selectedButtonIndex&&(selectedButtonIndex=_0x568a4e,_0x2d0734&&stopAutoDemoTimer()),_0xbc6d8e=_0x2d0734?_0x16fc7d(0x23e):_0x16fc7d(0x208);}else _0xbc6d8e=_0x16fc7d(0x24e),selectedButtonIndex=-0x1;(gameCanvas[_0x16fc7d(0x1e3)]['cursor']===_0x16fc7d(0x24e)||gameCanvas[_0x16fc7d(0x1e3)][_0x16fc7d(0x249)]!==_0xbc6d8e)&&(gameCanvas[_0x16fc7d(0x1e3)][_0x16fc7d(0x249)]=_0xbc6d8e);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(!isInGameState){const _0x1ef8b3=Date[_0x16fc7d(0x1c1)]();if(_0x1ef8b3-lastMouseMoveResetTime>0x1f4){if(typeof startAutoDemoTimer===_0x16fc7d(0x228))startAutoDemoTimer();lastMouseMoveResetTime=_0x1ef8b3;}}}function getTouchPos(_0x51e6f8,_0x125a0f){const _0xc79ffb=_0x261d57,_0x5495eb=_0x125a0f[_0xc79ffb(0x1b5)]&&_0x125a0f[_0xc79ffb(0x1b5)][_0xc79ffb(0x210)]>0x0?_0x125a0f[_0xc79ffb(0x1b5)]:_0x125a0f['touches'];if(!_0x51e6f8||!_0x5495eb||_0x5495eb[_0xc79ffb(0x210)]===0x0)return null;const _0x147410=_0x51e6f8[_0xc79ffb(0x24f)](),_0x173639=_0x5495eb[0x0],_0x465777=_0x51e6f8[_0xc79ffb(0x198)]/_0x147410[_0xc79ffb(0x198)],_0x3fc029=_0x51e6f8['height']/_0x147410[_0xc79ffb(0x21b)];return{'x':(_0x173639[_0xc79ffb(0x24d)]-_0x147410[_0xc79ffb(0x1bb)])*_0x465777,'y':(_0x173639[_0xc79ffb(0x1e7)]-_0x147410[_0xc79ffb(0x1d1)])*_0x3fc029};}function handleTouchStart(_0x766554){const _0x79c2b1=_0x261d57;if(!gameCanvas)return;_0x766554[_0x79c2b1(0x1f5)]();const _0x589f42=getTouchPos(gameCanvas,_0x766554);if(!_0x589f42)return;isTouching=!![],touchStartX=_0x589f42['x'],touchCurrentX=_0x589f42['x'],isDraggingShip=![],lastTapTime=Date[_0x79c2b1(0x1c1)](),touchJustFiredSingle=![],isTouchFiringActive=![];const _0xab127a=isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage;if(_0xab127a){const _0x5a3b9c=ship['x']+ship[_0x79c2b1(0x198)]/0x2,_0x11beb6={'x':ship['x']-ship[_0x79c2b1(0x198)]*0.25,'y':ship['y']-ship[_0x79c2b1(0x21b)]*0.5,'width':ship[_0x79c2b1(0x198)]*1.5,'height':ship['height']*0x2};checkCollision({'x':_0x589f42['x'],'y':_0x589f42['y'],'width':0x1,'height':0x1},_0x11beb6)?shipTouchOffsetX=_0x589f42['x']-_0x5a3b9c:shipTouchOffsetX=0x0,selectedFiringMode==='rapid'&&(isTouchFiringActive=!![],typeof firePlayerBullet===_0x79c2b1(0x228)&&firePlayerBullet(![]));}else shipTouchOffsetX=0x0;}function handleTouchMove(_0x2017fb){const _0x5a6cd4=_0x261d57;if(!isTouching||!gameCanvas)return;_0x2017fb[_0x5a6cd4(0x1f5)]();const _0x982c98=getTouchPos(gameCanvas,_0x2017fb);if(!_0x982c98)return;touchCurrentX=_0x982c98['x'];const _0x2f4aad=Math[_0x5a6cd4(0x1b9)](touchCurrentX-touchStartX),_0x367416=Date[_0x5a6cd4(0x1c1)]()-lastTapTime;!isDraggingShip&&((_0x2f4aad>MIN_DRAG_DISTANCE_FOR_TAP_CANCEL||_0x367416>MIN_DRAG_TIME_FOR_TAP_CANCEL)&&(isDraggingShip=!![]));if(isDraggingShip&&isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive){let _0x4570a8=touchCurrentX-shipTouchOffsetX,_0x381044=_0x4570a8-ship[_0x5a6cd4(0x198)]/0x2;const _0xd5acca=isDualShipActive?ship[_0x5a6cd4(0x198)]+DUAL_SHIP_OFFSET_X:ship[_0x5a6cd4(0x198)];ship['x']=Math[_0x5a6cd4(0x1af)](0x0,Math['min'](gameCanvas[_0x5a6cd4(0x198)]-_0xd5acca,_0x381044)),ship[_0x5a6cd4(0x24c)]=ship['x'];}}function handleTouchEnd(_0x11bdf2){const _0x1c327b=_0x261d57;if(!isTouching||!gameCanvas)return;_0x11bdf2[_0x1c327b(0x1f5)]();const _0xbe2128=!isDraggingShip;if(_0xbe2128){const _0x16f111=getTouchPos(gameCanvas,_0x11bdf2);if(!_0x16f111){isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}if(isInGameState&&!isShowingIntro&&ui2upRect&&checkCollision({'x':_0x16f111['x'],'y':_0x16f111['y'],'width':0x1,'height':0x1},ui2upRect)){if(typeof stopGameAndShowMenu===_0x1c327b(0x228)){stopGameAndShowMenu(),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}}else{if(!isInGameState||isShowingScoreScreen)typeof processMenuInteraction===_0x1c327b(0x228)&&processMenuInteraction(_0x16f111['x'],_0x16f111['y']);else isInGameState&&!isShowingIntro&&isManualControl&&playerLives>0x0&&!isPaused&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!showExtraLifeMessage&&(selectedFiringMode===_0x1c327b(0x21a)&&(typeof firePlayerBullet===_0x1c327b(0x228)&&(!touchJustFiredSingle&&(firePlayerBullet(![])&&(touchJustFiredSingle=!![])))));}}isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];}function _0x465c(_0x5c4eb,_0x55e7b0){const _0xbcefe7=_0xbcef();return _0x465c=function(_0x465c6d,_0x3548b8){_0x465c6d=_0x465c6d-0x189;let _0x1982b4=_0xbcefe7[_0x465c6d];return _0x1982b4;},_0x465c(_0x5c4eb,_0x55e7b0);}function handleTouchCancel(_0x5e3727){if(!isTouching)return;_0x5e3727['preventDefault'](),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![],touchJustFiredSingle=![];}function mainLoop(_0x32f389){const _0xbf84fb=_0x261d57;try{drawStars();retroGridCtx&&retroGridCanvas&&drawRetroGrid();pollControllerForMenu();if(isInGameState&&!isPaused){if(!isManualControl&&connectedGamepadIndex!==null){const _0x3e2df5=navigator[_0xbf84fb(0x19b)]();if(_0x3e2df5?.[connectedGamepadIndex]){const _0x90bc37=_0x3e2df5[connectedGamepadIndex],_0x50ab61=_0x90bc37['buttons'][_0xbf84fb(0x1e8)](_0x2edb93=>_0x2edb93[_0xbf84fb(0x1f3)]);let _0x265a98=![];for(let _0x323490=0x0;_0x323490<_0x50ab61['length'];_0x323490++){if(_0x323490===PS5_BUTTON_R1||_0x323490===PS5_BUTTON_TRIANGLE)continue;if(_0x50ab61[_0x323490]&&!(previousDemoButtonStates[_0x323490]??![])){_0x265a98=!![];break;}}if(_0x265a98){stopSound(menuMusicSound),showMenuState(),requestAnimationFrame(mainLoop);return;}previousDemoButtonStates=_0x50ab61[_0xbf84fb(0x1fb)]();}else{if(previousDemoButtonStates[_0xbf84fb(0x210)]>0x0)previousDemoButtonStates=[];}}else{if(previousDemoButtonStates[_0xbf84fb(0x210)]>0x0)previousDemoButtonStates=[];}if(typeof runSingleGameUpdate===_0xbf84fb(0x228))runSingleGameUpdate(_0x32f389);else{console['error'](_0xbf84fb(0x247));if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,showMenuState(),requestAnimationFrame(mainLoop);return;}if(gameOverSequenceStartTime>0x0){const _0x2ed214=Date[_0xbf84fb(0x1c1)](),_0x39e277=_0x2ed214-gameOverSequenceStartTime,_0x506af7=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x39e277>=_0x506af7){showMenuState(),requestAnimationFrame(mainLoop);return;}}}else{if(isShowingScoreScreen){const _0x349a6f=Date[_0xbf84fb(0x1c1)]()-scoreScreenStartTime;if(_0x349a6f>=SCORE_SCREEN_DURATION){startAIDemo(),requestAnimationFrame(mainLoop);return;}if(typeof renderGame===_0xbf84fb(0x228))renderGame();}else{if(isInGameState&&gameOverSequenceStartTime>0x0){if(typeof renderGame===_0xbf84fb(0x228))renderGame();const _0x527735=Date[_0xbf84fb(0x1c1)](),_0x13c2c5=_0x527735-gameOverSequenceStartTime,_0x21a70a=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x13c2c5>=_0x21a70a){showMenuState(),requestAnimationFrame(mainLoop);return;}}else{if(isInGameState&&isPaused){if(typeof renderGame===_0xbf84fb(0x228))renderGame();}else{if(isInGameState&&isCsCompletionDelayActive){if(typeof runSingleGameUpdate===_0xbf84fb(0x228))runSingleGameUpdate(_0x32f389);else{if(typeof renderGame===_0xbf84fb(0x228))renderGame();}}else{if(isInGameState&&isShowingPlayerGameOverMessage){if(typeof runSingleGameUpdate==='function')runSingleGameUpdate(_0x32f389);else{if(typeof renderGame==='function')renderGame();}}else{if(typeof renderGame===_0xbf84fb(0x228))renderGame();}}}}}}mainLoopId=requestAnimationFrame(mainLoop);}catch(_0xd5a85c){console[_0xbf84fb(0x1ad)](_0xbf84fb(0x219),_0xd5a85c,_0xd5a85c[_0xbf84fb(0x1f4)]);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,isPaused=![],stopAllGameSounds(),isGridSoundPlaying=![];try{showMenuState();}catch(_0x505e74){console['error']('Failed\x20to\x20return\x20to\x20menu\x20after\x20loop\x20error:',_0x505e74),document[_0xbf84fb(0x23f)]['innerHTML']=_0xbf84fb(0x20b);}}}function startMainLoop(){mainLoopId===null&&(gridOffsetY=0x0,mainLoop());}function initializeGame(){const _0x2af30b=_0x261d57;try{if(typeof initializeDOMElements===_0x2af30b(0x228)){if(!initializeDOMElements()){console[_0x2af30b(0x1ad)](_0x2af30b(0x199));return;}}else{console[_0x2af30b(0x1ad)]('initializeDOMElements\x20function\x20not\x20found!');return;}if(typeof resizeCanvases==='function')resizeCanvases();else{console['error'](_0x2af30b(0x1c8));if(gameCanvas&&starrySkyCanvas&&retroGridCanvas){const _0x595302=window[_0x2af30b(0x203)],_0x2d5405=window[_0x2af30b(0x20d)];starrySkyCanvas['width']=_0x595302,starrySkyCanvas['height']=_0x2d5405,retroGridCanvas[_0x2af30b(0x198)]=_0x595302,retroGridCanvas[_0x2af30b(0x21b)]=_0x2d5405,gameCanvas[_0x2af30b(0x198)]=_0x595302,gameCanvas[_0x2af30b(0x21b)]=_0x2d5405;}else{console[_0x2af30b(0x1ad)]('Cannot\x20set\x20fallback\x20canvas\x20sizes.');return;}}typeof defineNormalWaveEntrancePaths===_0x2af30b(0x228)?defineNormalWaveEntrancePaths():console['error']('defineNormalWaveEntrancePaths\x20not\x20found!');typeof defineChallengingStagePaths===_0x2af30b(0x228)?defineChallengingStagePaths():console['error'](_0x2af30b(0x1ce));if(typeof loadHighScore===_0x2af30b(0x228))loadHighScore();else console['warn']('loadHighScore\x20function\x20not\x20found.');window[_0x2af30b(0x1bf)](_0x2af30b(0x1c5),handleKeyDown),window['addEventListener'](_0x2af30b(0x1a1),handleKeyUp),gameCanvas?(gameCanvas[_0x2af30b(0x1bf)](_0x2af30b(0x1eb),handleCanvasClick),gameCanvas['addEventListener'](_0x2af30b(0x1bc),handleCanvasMouseMove),gameCanvas['addEventListener'](_0x2af30b(0x1f2),handleTouchStart,{'passive':![]}),gameCanvas[_0x2af30b(0x1bf)]('touchmove',handleTouchMove,{'passive':![]}),gameCanvas[_0x2af30b(0x1bf)](_0x2af30b(0x18e),handleTouchEnd,{'passive':![]}),gameCanvas[_0x2af30b(0x1bf)](_0x2af30b(0x229),handleTouchCancel,{'passive':![]})):console[_0x2af30b(0x1ad)]('Cannot\x20add\x20canvas\x20listeners:\x20gameCanvas\x20not\x20found\x20during\x20init.'),window['addEventListener']('gamepadconnected',handleGamepadConnected),window[_0x2af30b(0x1bf)](_0x2af30b(0x20c),handleGamepadDisconnected),window[_0x2af30b(0x1bf)]('resize',resizeCanvases),showMenuState(),startMainLoop();}catch(_0x479d80){console[_0x2af30b(0x1ad)](_0x2af30b(0x195),_0x479d80,_0x479d80[_0x2af30b(0x1f4)]),document[_0x2af30b(0x23f)][_0x2af30b(0x22e)]='<div\x20style=\x22color:white;\x20padding:\x2020px;\x20font-family:\x20sans-serif;\x22><h1>Fatal\x20Initialization\x20Error</h1><p>The\x20game\x20could\x20not\x20be\x20started.\x20Please\x20check\x20the\x20browser\x20console\x20(F12)\x20for\x20details.</p><p>Error:\x20'+_0x479d80['message']+'</p></div>',mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);}}window[_0x261d57(0x1bf)](_0x261d57(0x1ab),initializeGame);function _0xbcef(){const _0x12deb5=['1818632pDzmOC','SHOTS\x20FIRED','Error\x20in\x20pollControllerForMenu:','beginPath','function','touchcancel','Error\x20creating\x20explosion:','naturalHeight','find','STAGE','innerHTML','blue','PERFECT\x20!','drawImage','padStart','BONUS\x20','arc','rapid','translate','GAME\x20OVER','Error\x20in\x20showMenuState:','globalAlpha','\x201ST\x20LIFE\x20BONUS\x20FOR\x2020000\x20PTS','textAlign','closePath','1UP','pointer','body','addColorStop','30px\x20Arial','5HyPPbC','20px\x20sans-serif','START\x20GAME','round','val','FATAL:\x20runSingleGameUpdate\x20is\x20not\x20defined!','Error\x20starting\x20auto\x20demo\x20timer:','cursor','text','sin','targetX','clientX','none','getBoundingClientRect','NORMAL','alpha','globalCompositeOperation','Platini2000(c)\x20LTD','capturedShipY','touchend','PLAYER\x20','Error\x20in\x20baseStartGame:','5239400JQProz','rotate','Critical\x20error:\x20Game\x20logic\x20not\x20loaded\x20correctly!','moveTo','FATAL\x20INITIALIZATION\x20ERROR:','cos','push','width','DOM\x20element\x20initialization\x20failed.','forEach','getGamepads','334902qtcXJq','createLinearGradient','middle','hasCapturedShip','2025\x20\x20\x20PLATINI2000(c)\x20\x20\x20LTD','keyup','font','12010KMdGBZ','FATAL:\x20resetGame\x20function\x20is\x20not\x20defined!\x20Cannot\x20start\x20game\x20properly.','Error\x20drawing\x20enemy:','HIGH\x20SCORE','Error\x20in\x20renderGame:','restore','DEMO','color','load','lineTo','error','fillStyle','max','number','measureText','5004vASrko','FATAL\x20RENDER\x20ERROR.','2\x20PLAYER','changedTouches','bold\x2018px\x20\x27Press\x20Start\x202P\x27','PLAYER\x201','10783216XEZvkU','abs','size','left','mousemove','grey','naturalWidth','addEventListener','source-atop','now','capturedShipX','velocityX','min','keydown','window.close()\x20failed:','\x20PTS','resizeCanvases\x20not\x20found!','-\x20RESULTS\x20-','yellow','atan2','shadowBlur','2236254AwPfha','defineChallengingStagePaths\x20not\x20found!','rgba(255,\x20200,\x2080,\x20','bold\x2018px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif','top','floor','20px\x20\x27Press\x20Start\x202P\x27','particles','SPECIAL\x20BONUS\x2010000\x20PTS','PUSH\x20START\x20BUTTON','attacking','Could\x20not\x20add\x20','undefined','right','tintProgress','fillText','isDamaged','Critical\x20error\x20starting\x20game!','warn','captureAnimationRotation','shadowColor','following_entrance_path','style','rgba(0,\x20191,\x20255,\x200.9)','PAUSED','add','clientY','map','textBaseline','white','click','SCORE','STAGE\x20CLEARED','CHALLENGING\x20STAGE','EASY','complete','showing_capture_message','touchstart','pressed','stack','preventDefault','save','\x20level\x201\x20icons\x20due\x20to\x203-type\x20limit.\x20Used\x20types:','23442hYQrif','1\x20PLAYER','buttons','slice','close','shadowOffsetY','toString','capturedShipDimensions','random','fill','lighter','innerWidth','sqrt','Written\x20By\x20Platini2000(c)','axes','Cannot\x20start\x20game\x20-\x20canvas\x20not\x20ready.','default','2UP','Error\x20returning\x20to\x20menu.\x20Please\x20refresh\x20the\x20page.','<p\x20style=\x22color:white;\x22>CRITICAL\x20LOOP\x20ERROR.\x20Please\x20refresh.</p>','gamepaddisconnected','innerHeight','state','<p\x20style=\x22color:white;\x22>Error\x20returning\x20to\x20menu.\x20Please\x20refresh.</p>','length','fillRect','purple','type','center','Error\x20rendering\x20floating\x20scores:','679TjtQez','orange','toFixed','!!!\x20CRITICAL\x20ERROR\x20IN\x20mainLoop:','single','height','red','clearRect','match','isArray','WINS','following_bezier_path','\x202ND\x20LIFE\x20BONUS\x20FOR\x20','rgba(0,\x200,\x20139,\x200.5)'];_0xbcef=function(){return _0x12deb5;};return _0xbcef();}