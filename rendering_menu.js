const _0x2dae6c=_0x58a1;(function(_0x3cab4c,_0x186579){const _0x4c3b05=_0x58a1,_0x567b67=_0x3cab4c();while(!![]){try{const _0x818d7d=parseInt(_0x4c3b05(0x28b))/0x1+parseInt(_0x4c3b05(0x287))/0x2+parseInt(_0x4c3b05(0x233))/0x3*(-parseInt(_0x4c3b05(0x25f))/0x4)+parseInt(_0x4c3b05(0x22d))/0x5*(-parseInt(_0x4c3b05(0x25b))/0x6)+-parseInt(_0x4c3b05(0x299))/0x7+parseInt(_0x4c3b05(0x24b))/0x8+-parseInt(_0x4c3b05(0x1ff))/0x9*(-parseInt(_0x4c3b05(0x277))/0xa);if(_0x818d7d===_0x186579)break;else _0x567b67['push'](_0x567b67['shift']());}catch(_0x3132c2){_0x567b67['push'](_0x567b67['shift']());}}}(_0x25cc,0x7a792));const MENU_LOGO_APPROX_HEIGHT=0x55,MENU_SUBTITLE_TEXT='Written\x20By\x20Platini2000(c)',MENU_SUBTITLE_FONT=_0x2dae6c(0x278),MENU_SUBTITLE_COLOR=_0x2dae6c(0x20a),MENU_BUTTON_FONT='22px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif',MENU_BUTTON_COLOR=_0x2dae6c(0x297),MENU_BUTTON_COLOR_HOVER=_0x2dae6c(0x298),MENU_BUTTON_WIDTH=0x12c,MENU_BUTTON_HEIGHT=0x37,MENU_LOGO_BOTTOM_TO_START_GAP=0x5,MENU_BUTTON_V_GAP=-0xf,MENU_BUTTON_SUBTITLE_V_GAP=-0x0,MENU_SCORE_FONT=_0x2dae6c(0x20f),MENU_SCORE_COLOR=_0x2dae6c(0x297),MENU_SCORE_LABEL_COLOR=_0x2dae6c(0x20a),GAME_OVER_FONT=_0x2dae6c(0x1fa),GAME_OVER_COLOR=_0x2dae6c(0x298),GAME_OVER_SHADOW=!![],DEMO_TEXT_LINE1_FONT=_0x2dae6c(0x1fa),DEMO_TEXT_COLOR=_0x2dae6c(0x298),DEMO_TEXT_BLINK_ON_MS=0x3e8,DEMO_TEXT_BLINK_OFF_MS=0x3e8,DEMO_TEXT_BLINK_CYCLE_MS=DEMO_TEXT_BLINK_ON_MS+DEMO_TEXT_BLINK_OFF_MS,LOGO_SCALE_FACTOR=0.45,MENU_LOGO_EXTRA_Y_OFFSET=0x0,MENU_GENERAL_Y_OFFSET=0x32,INTRO_TEXT_FONT=_0x2dae6c(0x1fa),INTRO_TEXT_COLOR_NORMAL='rgba(0,\x20191,\x20255,\x200.9)',INTRO_TEXT_COLOR_DARK_YELLOW=_0x2dae6c(0x26a),INTRO_TEXT_COLOR_CS_TEXT=INTRO_TEXT_COLOR_NORMAL,PERFECT_TEXT_COLOR=_0x2dae6c(0x20a),EXTRA_LIFE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,READY_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_BONUS_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_DARK_YELLOW,CS_CLEAR_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_HITS_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,CS_CLEAR_SCORE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_FONT=INTRO_TEXT_FONT,PAUSE_TEXT_COLOR=INTRO_TEXT_COLOR_NORMAL,PAUSE_TEXT_SHADOW=!![],RESULTS_SCREEN_DURATION=0x4e20,PLAYER_GAME_OVER_MESSAGE_DURATION=0x1388,SCORE_SCREEN_TEXT_FONT=INTRO_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP=INTRO_TEXT_COLOR_NORMAL,SCORE_SCREEN_TEXT_COLOR_BONUS=INTRO_TEXT_COLOR_DARK_YELLOW,SCORE_SCREEN_LINE_V_SPACING=0x28,SCORE_SCREEN_ICON_TEXT_H_SPACING=0xf,SCORE_SCREEN_VERTICAL_OFFSET=0x4b,SCORE_SCREEN_PLATINI_TEXT='2025\x20\x20\x20PLATINI2000(c)\x20\x20\x20LTD',RESULTS_HEADER_COLOR=_0x2dae6c(0x20a),RESULTS_VALUE_COLOR_YELLOW=INTRO_TEXT_COLOR_DARK_YELLOW,RESULTS_LABEL_COLOR='white',RESULTS_VALUE_COLOR_CYAN=INTRO_TEXT_COLOR_NORMAL,RESULTS_LINE_V_SPACING_SINGLE=0x23,RESULTS_LINE_V_SPACING_DOUBLE=0x5a,RESULTS_START_Y=0xaf,RESULTS_FOOTER_FONT=MENU_SUBTITLE_FONT,RESULTS_FOOTER_COLOR=MENU_SUBTITLE_COLOR,RESULTS_PLATINI_TEXT=_0x2dae6c(0x27b),CS_MESSAGE_VERTICAL_OFFSET=0x1e;function getSubtitleApproxHeight(_0x3b181c){const _0x4dc433=_0x2dae6c,_0x2fe5c4=_0x3b181c[_0x4dc433(0x276)](/(\d+)px/);return _0x2fe5c4?.[0x1]?parseInt(_0x2fe5c4[0x1],0xa):0x19;}function formatMillisecondsToMMSS(_0x365cd1){const _0x4e0ad2=_0x2dae6c;if(_0x365cd1<=0x0||typeof _0x365cd1!==_0x4e0ad2(0x225)||!isFinite(_0x365cd1))return'00:00';const _0x2fa12f=Math[_0x4e0ad2(0x257)](_0x365cd1/0x3e8),_0x4280fa=Math['floor'](_0x2fa12f/0x3c),_0x21c104=_0x2fa12f%0x3c,_0x18641b=String(_0x4280fa)[_0x4e0ad2(0x227)](0x2,'0'),_0x498ac3=String(_0x21c104)[_0x4e0ad2(0x227)](0x2,'0');return _0x18641b+':'+_0x498ac3;}function getMenuButtonRect(_0x28f778){const _0xe0b8ff=_0x2dae6c;if(!gameCtx||!gameCanvas||gameCanvas['width']===0x0||gameCanvas[_0xe0b8ff(0x205)]===0x0)return null;const _0x40a03f=gameCanvas[_0xe0b8ff(0x222)],_0x2e2657=gameCanvas['height'],_0x3d6edb=_0x40a03f/0x2-MENU_BUTTON_WIDTH/0x2-0x1;let _0x1f523e=MENU_LOGO_APPROX_HEIGHT;typeof logoImage!=='undefined'&&logoImage[_0xe0b8ff(0x2a5)]&&logoImage['naturalHeight']!==0x0&&(_0x1f523e=logoImage['naturalHeight']*LOGO_SCALE_FACTOR);const _0xcab197=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x3e53b6=_0x1f523e+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0xcab197;let _0xfdcea6=(_0x2e2657-_0x3e53b6)/0x2-0x46;_0xfdcea6+=MENU_GENERAL_Y_OFFSET;const _0x2163b9=_0xfdcea6+_0x1f523e+MENU_LOGO_BOTTOM_TO_START_GAP,_0x443dc9=_0x2163b9+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP;if(_0x28f778===0x0)return{'x':_0x3d6edb,'y':Math[_0xe0b8ff(0x221)](_0x2163b9),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};else{if(_0x28f778===0x1)return{'x':_0x3d6edb,'y':Math[_0xe0b8ff(0x221)](_0x443dc9),'width':MENU_BUTTON_WIDTH,'height':MENU_BUTTON_HEIGHT};}return null;}function pollControllerForMenu(){const _0x1b98b3=_0x2dae6c;try{if(connectedGamepadIndex===null&&connectedGamepadIndexP2===null){joystickMovedVerticallyLastFrame=![];if(previousButtonStates['length']>0x0)previousButtonStates=[];if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];if(previousGameButtonStatesP2[_0x1b98b3(0x212)]>0x0)previousGameButtonStatesP2=[];return;}let _0x18f8bd=connectedGamepadIndex!==null?connectedGamepadIndex:connectedGamepadIndexP2;if(_0x18f8bd===null)return;const _0x376eef=navigator[_0x1b98b3(0x226)]();if(!_0x376eef?.[_0x18f8bd])return;const _0x5a6a8d=_0x376eef[_0x18f8bd],_0x5e27f5=_0x5a6a8d[_0x1b98b3(0x1f6)][_0x1b98b3(0x24e)](_0x134a0d=>_0x134a0d[_0x1b98b3(0x1f5)]),_0xa662ef=_0x5e27f5,_0x178a64=_0x5e27f5;let _0x2d1348=![];const _0x5bfd86=Date[_0x1b98b3(0x27c)]();let _0x281783=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x281783=!![]);if(_0x281783){connectedGamepadIndex!==null&&(previousButtonStates=_0xa662ef[_0x1b98b3(0x241)](),previousGameButtonStates=_0x178a64[_0x1b98b3(0x241)]());if(connectedGamepadIndexP2!==null){const _0x4ccee1=navigator[_0x1b98b3(0x226)]();_0x4ccee1?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x4ccee1[connectedGamepadIndexP2][_0x1b98b3(0x1f6)]['map'](_0x1c272b=>_0x1c272b[_0x1b98b3(0x1f5)]));}return;}if(isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x866049=_0x178a64[PS5_BUTTON_TRIANGLE],_0x4fc503=previousGameButtonStates[PS5_BUTTON_TRIANGLE]??![];_0x866049&&!_0x4fc503&&(stopGameAndShowMenu(),_0x2d1348=!![]);}if(!_0x2d1348&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){const _0x35aca8=_0x178a64[PS5_BUTTON_R1],_0x410193=previousGameButtonStates[PS5_BUTTON_R1]??![];if(_0x35aca8&&!_0x410193){if(typeof togglePause===_0x1b98b3(0x234))togglePause();_0x2d1348=!![];}}if(!_0x2d1348){const _0x296f98=isShowingScoreScreen||isShowingResultsScreen;if(_0x296f98){let _0x1be381=![];for(let _0x2a33b5=0x0;_0x2a33b5<_0xa662ef['length'];_0x2a33b5++){if(_0x2a33b5===PS5_BUTTON_R1||_0x2a33b5===PS5_BUTTON_TRIANGLE)continue;const _0x21cd85=previousButtonStates[_0x2a33b5]??![];if(_0xa662ef[_0x2a33b5]&&!_0x21cd85){_0x1be381=!![];break;}}if(_0x1be381){if(typeof showMenuState==='function')showMenuState();_0x2d1348=!![];}}else{if(!isInGameState&&!_0x2d1348){const _0x1601ff=_0xa662ef[PS5_BUTTON_CROSS],_0x42d3e6=previousButtonStates[PS5_BUTTON_CROSS]??![],_0x5d17ca=_0xa662ef[PS5_BUTTON_CIRCLE],_0x336b33=previousButtonStates[PS5_BUTTON_CIRCLE]??![],_0x52aad2=_0x5a6a8d[_0x1b98b3(0x223)][PS5_LEFT_STICK_Y]??0x0,_0x4a9f17=_0xa662ef[PS5_DPAD_UP],_0x53ed9b=_0xa662ef[PS5_DPAD_DOWN];let _0x4a509f=0x0;if(_0x52aad2<-AXIS_DEAD_ZONE_MENU||_0x4a9f17)_0x4a509f=-0x1;else{if(_0x52aad2>AXIS_DEAD_ZONE_MENU||_0x53ed9b)_0x4a509f=0x1;}let _0x1954f5=_0x4a509f!==0x0;if(_0x1954f5&&!joystickMovedVerticallyLastFrame){let _0x14e2c1=selectedButtonIndex;const _0x10bdef=0x2;_0x14e2c1===-0x1?_0x14e2c1=_0x4a509f===0x1?0x0:_0x10bdef-0x1:_0x14e2c1+=_0x4a509f;if(_0x14e2c1<0x0)_0x14e2c1=_0x10bdef-0x1;if(_0x14e2c1>=_0x10bdef)_0x14e2c1=0x0;_0x14e2c1!==selectedButtonIndex&&(selectedButtonIndex=_0x14e2c1,startAutoDemoTimer());}joystickMovedVerticallyLastFrame=_0x1954f5;if(_0x1601ff&&!_0x42d3e6){stopAutoDemoTimer();if(isFiringModeSelectMode)selectedButtonIndex===0x0?selectedFiringMode='rapid':selectedFiringMode=_0x1b98b3(0x24c),baseStartGame(!![]),_0x2d1348=!![];else{if(isPlayerSelectMode)selectedButtonIndex===0x0?startGame1P():startGame2P(),_0x2d1348=!![];else{if(selectedButtonIndex===0x0)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x2d1348=!![];else selectedButtonIndex===0x1&&(exitGame(),_0x2d1348=!![]);}}}if(!_0x2d1348&&_0x5d17ca&&!_0x336b33){stopAutoDemoTimer();if(isFiringModeSelectMode)isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x2d1348=!![];else isPlayerSelectMode?(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer(),_0x2d1348=!![]):(triggerFullscreen(),playSound(menuMusicSound,!![]),_0x2d1348=!![]);}}}}connectedGamepadIndex!==null&&(previousButtonStates=_0xa662ef['slice'](),previousGameButtonStates=_0x178a64[_0x1b98b3(0x241)]());if(connectedGamepadIndexP2!==null){const _0x4c185d=navigator[_0x1b98b3(0x226)]();_0x4c185d?.[connectedGamepadIndexP2]&&(previousGameButtonStatesP2=_0x4c185d[connectedGamepadIndexP2][_0x1b98b3(0x1f6)]['map'](_0x2508dc=>_0x2508dc[_0x1b98b3(0x1f5)]));}}catch(_0xb567a8){console[_0x1b98b3(0x228)](_0x1b98b3(0x285),_0xb567a8),previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[],selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![];}}function startAutoDemoTimer(){const _0x547445=_0x2dae6c;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x38ba9e){console[_0x547445(0x228)]('Error\x20starting\x20auto\x20demo\x20timer:',_0x38ba9e);}}function stopAutoDemoTimer(){const _0x25b587=_0x2dae6c;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x4eca6a){console[_0x25b587(0x228)](_0x25b587(0x1f4),_0x4eca6a);}}function showScoreScreen(){const _0x2cc122=_0x2dae6c;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x2cc122(0x27c)](),selectedButtonIndex=-0x1;}function showMenuState(){const _0x435cba=_0x2dae6c;try{wasLastGameAIDemo&&(highScore=0x4e20),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],scoreScreenStartTime=0x0,isManualControl=![],isShowingDemoText=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode='rapid',isTwoPlayerMode=![],currentPlayer=0x1,showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],stopAllGameSounds(),stopSound(resultsMusicSound),stopSound(startSound),stopSound(levelUpSound),stopSound(entranceSound),isGridSoundPlaying=![],playerLives=0x3,score=0x0,level=0x1,player1Lives=0x3,player2Lives=0x3,player1Score=0x0,player2Score=0x0,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,scoreEarnedThisCS=0x0,enemies=[],bullets=[],enemyBullets=[],explosions=[],isShowingIntro=![],introStep=0x0,isChallengingStage=![],challengingStageEnemiesHit=0x0,currentGridOffsetX=0x0,gridMoveDirection=0x1,currentWaveDefinition=null,isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,typeof enemySpawnTimeouts!==_0x435cba(0x26c)&&Array[_0x435cba(0x282)](enemySpawnTimeouts)&&enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],lastEnemyDetachTime=0x0,selectedButtonIndex=-0x1,joystickMovedVerticallyLastFrame=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],isShowingResultsScreen=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,forceCenterShipNextReset=![],player1CompletedLevel=-0x1,p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],ship&&gameCanvas&&gameCanvas[_0x435cba(0x222)]>0x0&&gameCanvas[_0x435cba(0x205)]>0x0&&(ship['x']=Math['round'](gameCanvas[_0x435cba(0x222)]/0x2-SHIP_WIDTH/0x2),ship[_0x435cba(0x23f)]=ship['x'],ship['y']=gameCanvas[_0x435cba(0x205)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0),playSound(menuMusicSound,!![]),startAutoDemoTimer();}catch(_0x47af88){console['error']('Error\x20in\x20showMenuState:',_0x47af88),wasLastGameAIDemo=![],isInGameState=![],isShowingScoreScreen=![],isPaused=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isTwoPlayerMode=![],currentPlayer=0x1,isShowingPlayerGameOverMessage=![],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],isTouching=![],touchCurrentX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null;if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x435cba(0x245)),document[_0x435cba(0x235)][_0x435cba(0x266)]='<p\x20style=\x22color:white;\x22>Error\x20returning\x20to\x20menu.\x20Please\x20refresh.</p>';}}function startAIDemo(){const _0x1b65f7=_0x2dae6c;if(isInGameState)return;stopSound(menuMusicSound),isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedFiringMode=_0x1b65f7(0x263),isTwoPlayerMode=![],isManualControl=![],isShowingDemoText=!![],wasLastGameAIDemo=!![],baseStartGame(![]),gameJustStarted=!![];}function startGame1P(){if(isInGameState)return;isTwoPlayerMode=![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function startGame2P(){if(isInGameState)return;isTwoPlayerMode=!![],isPlayerSelectMode=![],isFiringModeSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer();}function baseStartGame(_0x36cfda){const _0x2d1de3=_0x2dae6c;try{if(!gameCanvas||!gameCtx){console[_0x2d1de3(0x228)]('Cannot\x20start\x20game\x20-\x20canvas\x20not\x20ready.'),showMenuState();return;}stopSound(menuMusicSound),stopAutoDemoTimer(),isInGameState=!![],isShowingScoreScreen=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],isManualControl=_0x36cfda,isShowingDemoText=!_0x36cfda,isPaused=![],previousButtonStates=[],previousGameButtonStates=[],previousDemoButtonStates=[],previousGameButtonStatesP2=[],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];_0x36cfda&&(wasLastGameAIDemo=![]);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(typeof resetGame===_0x2d1de3(0x234))resetGame();else{console[_0x2d1de3(0x228)](_0x2d1de3(0x2a6)),alert(_0x2d1de3(0x216)),showMenuState();return;}_0x36cfda&&playSound(coinSound),gameStartTime=Date[_0x2d1de3(0x27c)](),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],selectedButtonIndex=-0x1,ship&&gameCanvas&&gameCanvas['width']>0x0&&gameCanvas['height']>0x0&&(ship['x']=Math['round'](gameCanvas[_0x2d1de3(0x222)]/0x2-SHIP_WIDTH/0x2),ship[_0x2d1de3(0x23f)]=ship['x'],ship['y']=gameCanvas[_0x2d1de3(0x205)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN),mainLoopId===null&&startMainLoop();}catch(_0x194f0b){console[_0x2d1de3(0x228)](_0x2d1de3(0x1fb),_0x194f0b),wasLastGameAIDemo=![],clearTimeout(mouseIdleTimerId),mouseIdleTimerId=null,alert('Critical\x20error\x20starting\x20game!'),showMenuState();}}function stopGameAndShowMenu(){isPaused=![];if(isManualControl)saveHighScore();showMenuState();}function exitGame(){const _0x4e5eb0=_0x2dae6c;isPaused=![],stopAutoDemoTimer(),saveHighScore(),isInGameState=![],isPlayerSelectMode=![],isFiringModeSelectMode=![],showMenuState();try{window['close'](),setTimeout(()=>{if(!isInGameState)showMenuState();},0xc8);}catch(_0x19e191){console[_0x4e5eb0(0x228)](_0x4e5eb0(0x21f),_0x19e191),showMenuState();}}function triggerGameOver(){triggerFinalGameOverSequence();}function startAutoDemoTimer(){const _0x25a41c=_0x2dae6c;try{stopAutoDemoTimer(),autoStartTimerId=setTimeout(()=>{!isInGameState&&!isShowingScoreScreen?(isPlayerSelectMode=![],isFiringModeSelectMode=![],showScoreScreen()):autoStartTimerId=null;},MENU_INACTIVITY_TIMEOUT);}catch(_0x5c83f1){console['error'](_0x25a41c(0x271),_0x5c83f1);}}function stopAutoDemoTimer(){const _0x4d86ac=_0x2dae6c;try{autoStartTimerId&&(clearTimeout(autoStartTimerId),autoStartTimerId=null);}catch(_0x4da2ea){console[_0x4d86ac(0x228)](_0x4d86ac(0x1f4),_0x4da2ea);}}function showScoreScreen(){const _0x188bd1=_0x2dae6c;if(isInGameState||isShowingScoreScreen)return;stopAutoDemoTimer(),isShowingScoreScreen=!![],isPlayerSelectMode=![],isFiringModeSelectMode=![],scoreScreenStartTime=Date[_0x188bd1(0x27c)](),selectedButtonIndex=-0x1,clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);}function processMenuInteraction(_0x14eb96,_0x413935){const _0x486dea=_0x2dae6c;if(isShowingScoreScreen){if(typeof showMenuState==='function')showMenuState();}else{const _0x3b25b9=getMenuButtonRect(0x0),_0x5cc163=getMenuButtonRect(0x1);let _0x5574f3=_0x3b25b9&&checkCollision({'x':_0x14eb96,'y':_0x413935,'width':0x1,'height':0x1},_0x3b25b9),_0x2eda17=_0x5cc163&&checkCollision({'x':_0x14eb96,'y':_0x413935,'width':0x1,'height':0x1},_0x5cc163);if(isFiringModeSelectMode){if(_0x5574f3)selectedFiringMode=_0x486dea(0x263),baseStartGame(!![]),stopAutoDemoTimer();else _0x2eda17?(selectedFiringMode=_0x486dea(0x24c),baseStartGame(!![]),stopAutoDemoTimer()):(isFiringModeSelectMode=![],isPlayerSelectMode=!![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(isPlayerSelectMode){if(_0x5574f3)startGame1P(),stopAutoDemoTimer();else _0x2eda17?(startGame2P(),stopAutoDemoTimer()):(isPlayerSelectMode=![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer());}else{if(_0x5574f3)isPlayerSelectMode=!![],isFiringModeSelectMode=![],selectedButtonIndex=0x0,startAutoDemoTimer();else{if(_0x2eda17){if(typeof exitGame===_0x486dea(0x234))exitGame();stopAutoDemoTimer();}else triggerFullscreen(),playSound(menuMusicSound,!![]),stopAutoDemoTimer();}}}}}function handleCanvasClick(_0x18b774){const _0x599567=_0x2dae6c;if(!gameCanvas)return;const _0x37b940=gameCanvas['getBoundingClientRect'](),_0x4e326a=gameCanvas[_0x599567(0x222)]/_0x37b940[_0x599567(0x222)],_0x2fe309=gameCanvas[_0x599567(0x205)]/_0x37b940[_0x599567(0x205)],_0x4e941a=(_0x18b774['clientX']-_0x37b940[_0x599567(0x292)])*_0x4e326a,_0x588951=(_0x18b774[_0x599567(0x1fc)]-_0x37b940[_0x599567(0x242)])*_0x2fe309;let _0x206c4b=![];(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0)&&(_0x206c4b=!![]);if(_0x206c4b)return;if(isInGameState){if(isPaused){if(typeof togglePause===_0x599567(0x234))togglePause();return;}if(!isManualControl){if(typeof stopGameAndShowMenu===_0x599567(0x234))stopGameAndShowMenu();}}else processMenuInteraction(_0x4e941a,_0x588951);}function createExplosion(_0x55674d,_0x82135a){const _0x148672=_0x2dae6c;try{playSound(explosionSound);let _0x5ee224=[];for(let _0x2e68de=0x0;_0x2e68de<EXPLOSION_PARTICLE_COUNT;_0x2e68de++){const _0x7394a8=Math[_0x148672(0x272)]()*Math['PI']*0x2,_0x274851=Math['random']()*(EXPLOSION_MAX_SPEED-EXPLOSION_MIN_SPEED)+EXPLOSION_MIN_SPEED;_0x5ee224['push']({'x':_0x55674d,'y':_0x82135a,'vx':Math['cos'](_0x7394a8)*_0x274851,'vy':Math['sin'](_0x7394a8)*_0x274851,'radius':EXPLOSION_PARTICLE_RADIUS,'alpha':0x1});}explosions['push']({'creationTime':Date[_0x148672(0x27c)](),'duration':EXPLOSION_DURATION,'particles':_0x5ee224});}catch(_0x286ed2){console[_0x148672(0x228)](_0x148672(0x2a2),_0x286ed2);}}function renderExplosions(){const _0x18329e=_0x2dae6c;try{if(!gameCtx)return;gameCtx['save'](),gameCtx['globalCompositeOperation']='lighter',explosions[_0x18329e(0x202)](_0x37bd78=>{const _0x432b8c=_0x18329e;_0x37bd78[_0x432b8c(0x203)][_0x432b8c(0x202)](_0x101cc5=>{const _0x3fed95=_0x432b8c,_0x4bc9cb=_0x101cc5[_0x3fed95(0x244)]*EXPLOSION_MAX_OPACITY;_0x4bc9cb>0.01&&(gameCtx[_0x3fed95(0x21b)](),gameCtx['arc'](Math[_0x3fed95(0x221)](_0x101cc5['x']),Math[_0x3fed95(0x221)](_0x101cc5['y']),_0x101cc5['radius'],0x0,Math['PI']*0x2),gameCtx['fillStyle']='rgba(255,\x20200,\x2080,\x20'+_0x4bc9cb[_0x3fed95(0x269)](0x3)+')',gameCtx[_0x3fed95(0x284)]());});}),gameCtx['restore']();}catch(_0x4bc971){console['error'](_0x18329e(0x261),_0x4bc971);}}function drawCanvasText(_0x2ae56e,_0x348e17,_0x1599d0,_0x5e8c82,_0xdf138,_0x4b5411='center',_0x103d74=_0x2dae6c(0x232),_0x1b6755=![]){const _0x4cce27=_0x2dae6c;if(!gameCtx)return;gameCtx[_0x4cce27(0x22e)](),gameCtx[_0x4cce27(0x2b4)]=_0x5e8c82,gameCtx[_0x4cce27(0x224)]=_0xdf138,gameCtx[_0x4cce27(0x289)]=_0x4b5411,gameCtx[_0x4cce27(0x20c)]=_0x103d74,_0x1b6755&&(gameCtx['shadowColor']=_0x4cce27(0x2aa),gameCtx[_0x4cce27(0x2a1)]=0x8,gameCtx[_0x4cce27(0x2b1)]=0x3,gameCtx[_0x4cce27(0x258)]=0x3),gameCtx[_0x4cce27(0x210)](_0x2ae56e,_0x348e17,_0x1599d0),gameCtx[_0x4cce27(0x249)]();}function drawCanvasButton(_0x2b30dc,_0x1104c0,_0x1d2e1d){const _0x5415ad=_0x2dae6c;if(!gameCtx)return;const _0x2b6463=getMenuButtonRect(_0x1104c0);if(!_0x2b6463)return;gameCtx['save'](),drawCanvasText(_0x2b30dc,_0x2b6463['x']+_0x2b6463[_0x5415ad(0x222)]/0x2,_0x2b6463['y']+_0x2b6463[_0x5415ad(0x205)]/0x2,MENU_BUTTON_FONT,_0x1d2e1d?MENU_BUTTON_COLOR_HOVER:MENU_BUTTON_COLOR,_0x5415ad(0x2a9),_0x5415ad(0x232)),gameCtx[_0x5415ad(0x249)]();}function renderFloatingScores(){const _0x314e2b=_0x2dae6c;try{if(!gameCtx||!floatingScores||floatingScores[_0x314e2b(0x212)]===0x0)return;const _0x42aa25=Date[_0x314e2b(0x27c)]();gameCtx['save'](),gameCtx[_0x314e2b(0x1fe)]=FLOATING_SCORE_OPACITY,floatingScores[_0x314e2b(0x202)](_0x53c585=>{const _0x1a13f2=_0x314e2b;_0x42aa25>=_0x53c585[_0x1a13f2(0x275)]&&drawCanvasText(_0x53c585[_0x1a13f2(0x251)],_0x53c585['x'],_0x53c585['y'],FLOATING_SCORE_FONT,_0x53c585['color'],_0x1a13f2(0x2a9),_0x1a13f2(0x232),![]);}),gameCtx[_0x314e2b(0x1fe)]=0x1,gameCtx[_0x314e2b(0x249)]();}catch(_0x3838f4){console[_0x314e2b(0x228)]('Error\x20rendering\x20floating\x20scores:',_0x3838f4);}}function renderHitSparks(){const _0x333f18=_0x2dae6c;if(!gameCtx||!hitSparks||hitSparks[_0x333f18(0x212)]===0x0)return;gameCtx[_0x333f18(0x22e)](),gameCtx['globalCompositeOperation']=_0x333f18(0x294),hitSparks[_0x333f18(0x202)](_0x4b7c5d=>{const _0x717405=_0x333f18;if(_0x4b7c5d&&_0x4b7c5d[_0x717405(0x244)]>0.01){gameCtx[_0x717405(0x224)]=_0x4b7c5d[_0x717405(0x22c)],gameCtx[_0x717405(0x1fe)]=_0x4b7c5d['alpha'],gameCtx[_0x717405(0x21b)]();const _0x4e69e2=_0x4b7c5d[_0x717405(0x2a7)]*Math[_0x717405(0x218)](_0x4b7c5d[_0x717405(0x244)]);gameCtx[_0x717405(0x279)](Math[_0x717405(0x221)](_0x4b7c5d['x']),Math[_0x717405(0x221)](_0x4b7c5d['y']),Math[_0x717405(0x29c)](0.5,_0x4e69e2/0x2),0x0,Math['PI']*0x2),gameCtx['fill']();}}),gameCtx['globalAlpha']=0x1,gameCtx[_0x333f18(0x249)]();}function renderGame(){const _0x28b056=_0x2dae6c;try{if(!gameCtx||!gameCanvas){if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;return;}gameCtx[_0x28b056(0x21a)](0x0,0x0,gameCanvas[_0x28b056(0x222)],gameCanvas[_0x28b056(0x205)]);const _0x485392=Date[_0x28b056(0x27c)]();gameCtx[_0x28b056(0x22e)]();const _0x53cb93='20px\x20\x27Press\x20Start\x202P\x27',_0x53b2ae=_0x28b056(0x20a),_0x10f9b5=_0x28b056(0x297);gameCtx[_0x28b056(0x2b4)]=_0x53cb93,gameCtx['textBaseline']='top';const _0x20838e=(_0x5185fe,_0x553832,_0x2277c3,_0x30406a,_0x2033c2=![])=>{const _0x114f39=_0x28b056;let _0x4435a7=!![],_0xd6e5aa=UI_1UP_BLINK_ON_MS*1.5,_0x258393=UI_1UP_BLINK_CYCLE_MS*1.5,_0x2b4bc9=_0x53b2ae;if(_0x5185fe===_0x114f39(0x27f))_0xd6e5aa=DEMO_TEXT_BLINK_ON_MS*0.7,_0x258393=DEMO_TEXT_BLINK_CYCLE_MS;else{if(_0x5185fe===_0x114f39(0x23b)){_0xd6e5aa=UI_1UP_BLINK_ON_MS*1.5,_0x258393=UI_1UP_BLINK_CYCLE_MS*1.5;if(isInGameState&&!isManualControl)_0xd6e5aa=DEMO_TEXT_BLINK_ON_MS*0.7,_0x258393=DEMO_TEXT_BLINK_CYCLE_MS;else isInGameState&&isTwoPlayerMode&&currentPlayer===0x2&&(_0xd6e5aa=UI_1UP_BLINK_ON_MS*1.5,_0x258393=UI_1UP_BLINK_CYCLE_MS*1.5);}}_0x2033c2&&((isPaused||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||!(_0x485392%_0x258393<_0xd6e5aa))&&(_0x4435a7=![]));_0x4435a7&&(gameCtx[_0x114f39(0x224)]=_0x2b4bc9,gameCtx[_0x114f39(0x289)]=_0x2277c3,gameCtx[_0x114f39(0x210)](_0x5185fe,_0x30406a,MARGIN_TOP));const _0x4285e9=gameCtx['measureText'](_0x5185fe)[_0x114f39(0x222)];let _0x34f408;if(_0x2277c3===_0x114f39(0x292))_0x34f408=_0x30406a+_0x4285e9/0x2;else{if(_0x2277c3===_0x114f39(0x214))_0x34f408=_0x30406a-_0x4285e9/0x2;else _0x34f408=_0x30406a;}gameCtx[_0x114f39(0x224)]=_0x10f9b5,gameCtx[_0x114f39(0x289)]='center';let _0x2869c5=MARGIN_TOP+SCORE_OFFSET_Y+0x5;_0x5185fe==='HIGH\x20SCORE'&&(_0x34f408=_0x30406a),gameCtx[_0x114f39(0x210)](_0x553832[_0x114f39(0x211)](),_0x34f408,_0x2869c5);};let _0xdf4ea7,_0x19902c,_0x83e575,_0x3e4ec8,_0x1f5722=![],_0x4d4184=![],_0x5d64f3=![];if(isShowingResultsScreen)_0xdf4ea7=player1Score||0x0,_0x19902c=player2Score||0x0,_0x83e575=highScore||0x4e20,_0x83e575=Math[_0x28b056(0x29c)](_0x83e575,_0xdf4ea7,_0x19902c),_0x3e4ec8=wasLastGameAIDemo?_0x28b056(0x27f):_0x28b056(0x206),_0x5d64f3=![],_0x1f5722=![],_0x4d4184=![];else{if(gameOverSequenceStartTime>0x0&&!isShowingPlayerGameOverMessage)_0xdf4ea7=player1Score||0x0,_0x19902c=player2Score||0x0,_0x83e575=highScore||0x4e20,_0x83e575=Math[_0x28b056(0x29c)](_0x83e575,_0xdf4ea7,_0x19902c),_0x3e4ec8=wasLastGameAIDemo?'DEMO':_0x28b056(0x206),_0x5d64f3=![],_0x1f5722=![],_0x4d4184=![];else{if(isShowingPlayerGameOverMessage)_0xdf4ea7=player1Score||0x0,_0x19902c=player2Score||0x0,_0x83e575=highScore||0x4e20,_0x83e575=Math[_0x28b056(0x29c)](_0x83e575,_0xdf4ea7,_0x19902c),_0x3e4ec8=_0x28b056(0x206),_0x5d64f3=![],_0x1f5722=![],_0x4d4184=![];else{if(!isInGameState)_0xdf4ea7=player1Score||0x0,_0x19902c=player2Score||0x0,_0x83e575=highScore||0x4e20,_0x83e575=Math[_0x28b056(0x29c)](_0x83e575,_0xdf4ea7,_0x19902c),_0x3e4ec8=_0x28b056(0x206),_0x5d64f3=![],_0x1f5722=![],_0x4d4184=![];else{_0x83e575=highScore||0x0;if(!isManualControl)_0xdf4ea7=score,_0x19902c=0x0,_0x83e575=Math[_0x28b056(0x29c)](_0x83e575,score),_0x3e4ec8=_0x28b056(0x27f),_0x1f5722=!isShowingIntro&&!isPaused&&!isShipCaptured,_0x5d64f3=!isPaused&&!isShowingIntro&&score>0x0&&_0x83e575>0x0&&score>=_0x83e575;else isTwoPlayerMode?(_0xdf4ea7=currentPlayer===0x1?score:player1Score,_0x19902c=currentPlayer===0x2?score:player2Score,_0x83e575=Math[_0x28b056(0x29c)](_0x83e575,player1Score,player2Score,score),_0x3e4ec8='1UP',_0x1f5722=!isShowingIntro&&!isPaused&&currentPlayer===0x1&&playerLives>0x0&&!isShipCaptured,_0x4d4184=!isShowingIntro&&!isPaused&&currentPlayer===0x2&&playerLives>0x0&&!isShipCaptured,_0x5d64f3=!isPaused&&!isShowingIntro&&score>0x0&&_0x83e575>0x0&&score>=_0x83e575):(_0xdf4ea7=score,_0x19902c=player2Score||0x0,_0x83e575=Math[_0x28b056(0x29c)](_0x83e575,score),_0x3e4ec8=_0x28b056(0x206),_0x1f5722=!isShowingIntro&&!isPaused&&playerLives>0x0&&!isShipCaptured,_0x5d64f3=!isPaused&&!isShowingIntro&&score>0x0&&_0x83e575>0x0&&score>=_0x83e575);}}}}let _0x46f7b5=![];if(_0x5d64f3){if(!isManualControl)_0x46f7b5=_0x1f5722&&player1TriggeredHighScoreSound;else isTwoPlayerMode?currentPlayer===0x1?_0x46f7b5=_0x1f5722&&player1TriggeredHighScoreSound:_0x46f7b5=_0x4d4184&&player2TriggeredHighScoreSound:_0x46f7b5=_0x1f5722&&player1TriggeredHighScoreSound;}typeof MARGIN_SIDE!==_0x28b056(0x26c)&&typeof MARGIN_TOP!==_0x28b056(0x26c)&&typeof SCORE_OFFSET_Y!==_0x28b056(0x26c)&&(_0x20838e(_0x3e4ec8,_0xdf4ea7,_0x28b056(0x292),MARGIN_SIDE,_0x1f5722),_0x20838e(_0x28b056(0x23b),_0x83e575,_0x28b056(0x2a9),gameCanvas[_0x28b056(0x222)]/0x2,_0x46f7b5),_0x20838e(_0x28b056(0x240),_0x19902c,_0x28b056(0x214),gameCanvas[_0x28b056(0x222)]-MARGIN_SIDE,_0x4d4184));if(typeof shipImage!==_0x28b056(0x26c)&&typeof LIFE_ICON_MARGIN_BOTTOM!==_0x28b056(0x26c)&&typeof LIFE_ICON_SIZE!==_0x28b056(0x26c)&&typeof LIFE_ICON_MARGIN_LEFT!==_0x28b056(0x26c)&&typeof LIFE_ICON_SPACING!==_0x28b056(0x26c)){if(shipImage['complete']&&shipImage[_0x28b056(0x29f)]!==0x0){const _0x266211=gameCanvas[_0x28b056(0x205)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE;let _0x2b876f=0x0;if(isShowingResultsScreen||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x2b876f=0x2;else{if(!isInGameState||isShowingScoreScreen)_0x2b876f=0x2;else isInGameState&&playerLives>0x0?_0x2b876f=Math[_0x28b056(0x29c)](0x0,playerLives-0x1):_0x2b876f=0x0;}const _0x4f497d=0x5;for(let _0x2fcc31=0x0;_0x2fcc31<Math[_0x28b056(0x27d)](_0x2b876f,_0x4f497d);_0x2fcc31++){const _0x624342=LIFE_ICON_MARGIN_LEFT+_0x2fcc31*(LIFE_ICON_SIZE+LIFE_ICON_SPACING);gameCtx[_0x28b056(0x1fd)](shipImage,Math[_0x28b056(0x221)](_0x624342),Math[_0x28b056(0x221)](_0x266211),LIFE_ICON_SIZE,LIFE_ICON_SIZE);}}}let _0x38db9c=0x1;if(gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage)_0x38db9c=Math[_0x28b056(0x29c)](0x1,player1MaxLevelReached,player2MaxLevelReached);else{if(!isInGameState||isShowingScoreScreen)_0x38db9c=0x1;else isInGameState&&(_0x38db9c=level);}if(_0x38db9c>0x0&&typeof LEVEL_ICON_MARGIN_BOTTOM!==_0x28b056(0x26c)&&typeof LEVEL_ICON_SIZE!==_0x28b056(0x26c)&&typeof LEVEL_ICON_MARGIN_RIGHT!==_0x28b056(0x26c)&&typeof LEVEL_ICON_SPACING!==_0x28b056(0x26c)){const _0x58eae7=[{'val':0x32,'img':level50Image},{'val':0x1e,'img':level30Image},{'val':0x14,'img':level20Image},{'val':0xa,'img':level10Image},{'val':0x5,'img':level5Image},{'val':0x1,'img':level1Image}];let _0x37a023=_0x38db9c,_0x339e6d=[],_0x3db177=new Set();const _0xe229a9=(_0x59bc34,_0x214058,_0x2e8c9e)=>{const _0xb8ca3f=_0x28b056;let _0x336530=_0x59bc34,_0x3be0bb=new Set(_0x2e8c9e);for(let _0x2d4347=_0x214058;_0x2d4347<_0x58eae7[_0xb8ca3f(0x212)];_0x2d4347++){const _0x583810=_0x58eae7[_0x2d4347][_0xb8ca3f(0x24a)];if(_0x336530>=_0x583810){const _0x2f6f5c=_0x3be0bb['size']<0x3||_0x3be0bb['has'](_0x583810);if(!_0x2f6f5c)continue;const _0x1cef0a=Math['floor'](_0x336530/_0x583810);_0x336530-=_0x1cef0a*_0x583810,_0x3be0bb['add'](_0x583810);if(_0x336530===0x0)return!![];}}return _0x336530===0x0;};for(let _0x5dd936=0x0;_0x5dd936<_0x58eae7[_0x28b056(0x212)]-0x1;_0x5dd936++){const _0x2a79c2=_0x58eae7[_0x5dd936],_0x4095a5=_0x2a79c2[_0x28b056(0x24a)],_0x487187=_0x2a79c2[_0x28b056(0x25c)];if(_0x37a023>=_0x4095a5){const _0x1b9eb1=Math['floor'](_0x37a023/_0x4095a5),_0x485138=_0x37a023-_0x1b9eb1*_0x4095a5;let _0x52836=new Set(_0x3db177);_0x52836[_0x28b056(0x29d)](_0x4095a5);if(_0xe229a9(_0x485138,_0x5dd936+0x1,_0x52836)){for(let _0x252961=0x0;_0x252961<_0x1b9eb1;_0x252961++){_0x339e6d['push'](_0x487187);}_0x37a023=_0x485138,_0x3db177[_0x28b056(0x29d)](_0x4095a5);if(_0x37a023===0x0)break;}}}if(_0x37a023>0x0){const _0x270f64=_0x3db177[_0x28b056(0x2a7)]<0x3||_0x3db177[_0x28b056(0x22b)](0x1);if(_0x270f64){for(let _0x396910=0x0;_0x396910<_0x37a023;_0x396910++){_0x339e6d[_0x28b056(0x1f2)](level1Image);}_0x3db177['add'](0x1),_0x37a023=0x0;}else console[_0x28b056(0x2a0)](_0x28b056(0x286)+_0x37a023+_0x28b056(0x24d),_0x3db177);}_0x339e6d['length']===0x0&&_0x339e6d[_0x28b056(0x1f2)](level1Image);const _0x2c9228=_0x339e6d[_0x28b056(0x212)],_0xdca619=_0x2c9228*LEVEL_ICON_SIZE+Math['max'](0x0,_0x2c9228-0x1)*LEVEL_ICON_SPACING,_0x57e07d=gameCanvas[_0x28b056(0x222)]-LEVEL_ICON_MARGIN_RIGHT,_0x152479=_0x57e07d-_0xdca619,_0x44bd79=gameCanvas[_0x28b056(0x205)]-LEVEL_ICON_MARGIN_BOTTOM-LEVEL_ICON_SIZE;let _0x2e3360=_0x152479;for(const _0xea9e11 of _0x339e6d){_0xea9e11&&_0xea9e11[_0x28b056(0x2a5)]&&_0xea9e11['naturalHeight']!==0x0&&gameCtx[_0x28b056(0x1fd)](_0xea9e11,Math[_0x28b056(0x221)](_0x2e3360),Math['round'](_0x44bd79),LEVEL_ICON_SIZE,LEVEL_ICON_SIZE),_0x2e3360+=LEVEL_ICON_SIZE+LEVEL_ICON_SPACING;}}gameCtx[_0x28b056(0x249)](),gameCtx[_0x28b056(0x22e)]();if(ship&&!isShowingCaptureMessage){let _0x195d7a=!![];if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isInvincible){const _0xa5a828=INVINCIBILITY_BLINK_ON_MS+INVINCIBILITY_BLINK_OFF_MS,_0x281f3e=_0x485392%_0xa5a828;_0x281f3e>=INVINCIBILITY_BLINK_ON_MS&&(_0x195d7a=![]);}if(_0x195d7a){let _0xbec0a9=ship['x'],_0x10254e=(isShowingPlayerGameOverMessage||gameOverSequenceStartTime>0x0||!isInGameState||isShowingScoreScreen||isInGameState&&isShowingIntro&&!isManualControl&&(introStep===0x1||introStep===0x2||introStep===0x3))&&!isDualShipActive;_0x10254e&&(_0xbec0a9=Math['round'](gameCanvas['width']/0x2-ship[_0x28b056(0x222)]/0x2));const _0x7f68ec=gameCanvas[_0x28b056(0x205)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN;typeof shipImage!==_0x28b056(0x26c)&&shipImage[_0x28b056(0x2a5)]&&shipImage['naturalHeight']!==0x0?gameCtx[_0x28b056(0x1fd)](shipImage,Math[_0x28b056(0x221)](_0xbec0a9),Math[_0x28b056(0x221)](_0x7f68ec),ship[_0x28b056(0x222)],ship[_0x28b056(0x205)]):(gameCtx['fillStyle']=_0x28b056(0x260),gameCtx[_0x28b056(0x25d)](Math[_0x28b056(0x221)](_0xbec0a9),Math[_0x28b056(0x221)](_0x7f68ec),ship[_0x28b056(0x222)],ship['height']));if(isInGameState&&!gameOverSequenceStartTime&&!isShowingPlayerGameOverMessage&&isDualShipActive&&!isShipCaptured&&typeof shipImage!==_0x28b056(0x26c)&&shipImage['complete']&&shipImage[_0x28b056(0x29f)]!==0x0){const _0x46b005=_0xbec0a9+DUAL_SHIP_OFFSET_X;gameCtx['drawImage'](shipImage,Math[_0x28b056(0x221)](_0x46b005),Math[_0x28b056(0x221)](_0x7f68ec),ship[_0x28b056(0x222)],ship[_0x28b056(0x205)]);}}}fallingShips[_0x28b056(0x212)]>0x0&&typeof shipImage!=='undefined'&&shipImage[_0x28b056(0x2a5)]&&fallingShips['forEach'](_0x307b53=>{const _0xb6a2e3=_0x28b056;if(_0x307b53){gameCtx[_0xb6a2e3(0x22e)]();const _0x3873cd=_0x307b53['x']+_0x307b53[_0xb6a2e3(0x222)]/0x2,_0x4f5a25=_0x307b53['y']+_0x307b53['height']/0x2;gameCtx[_0xb6a2e3(0x229)](_0x3873cd,_0x4f5a25),gameCtx['rotate'](_0x307b53[_0xb6a2e3(0x21e)]||0x0);const _0x16f320=-_0x307b53[_0xb6a2e3(0x222)]/0x2,_0x5738c9=-_0x307b53[_0xb6a2e3(0x205)]/0x2,_0x34753c=_0x307b53[_0xb6a2e3(0x222)],_0xc464d1=_0x307b53[_0xb6a2e3(0x205)];gameCtx['drawImage'](shipImage,_0x16f320,_0x5738c9,_0x34753c,_0xc464d1),typeof _0x307b53[_0xb6a2e3(0x215)]===_0xb6a2e3(0x225)&&_0x307b53['tintProgress']>0.01&&(gameCtx[_0xb6a2e3(0x22e)](),gameCtx[_0xb6a2e3(0x1fe)]=_0x307b53[_0xb6a2e3(0x215)],gameCtx[_0xb6a2e3(0x224)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0xb6a2e3(0x264)]=_0xb6a2e3(0x255),gameCtx[_0xb6a2e3(0x25d)](_0x16f320,_0x5738c9,_0x34753c,_0xc464d1),gameCtx[_0xb6a2e3(0x249)]()),gameCtx[_0xb6a2e3(0x249)]();}});gameCtx[_0x28b056(0x249)]();if(!isInGameState){if(isShowingScoreScreen){if(typeof LIFE_ICON_SIZE!==_0x28b056(0x26c)){gameCtx[_0x28b056(0x22e)]();const _0x27eee1=gameCanvas[_0x28b056(0x222)]/0x2;let _0x453e72=gameCanvas['height']*0.25+SCORE_SCREEN_VERTICAL_OFFSET,_0x22ed82=0x0,_0x355278=_0x453e72+0x0;drawCanvasText(_0x28b056(0x2ad),_0x27eee1,_0x355278-0x1e,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_TOP,'center',_0x28b056(0x232),!![]);let _0x850162=_0x355278+SCORE_SCREEN_LINE_V_SPACING*1.8;const _0x243424=_0x28b056(0x253);gameCtx['font']=SCORE_SCREEN_TEXT_FONT;const _0x2fad8e=gameCtx[_0x28b056(0x209)](_0x243424)[_0x28b056(0x222)],_0x3d11ef=LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING+_0x2fad8e;_0x22ed82=_0x27eee1-_0x3d11ef/0x2-0x1e;typeof shipImage!==_0x28b056(0x26c)&&shipImage['complete']&&shipImage['naturalHeight']!==0x0&&gameCtx['drawImage'](shipImage,Math['round'](_0x22ed82),Math[_0x28b056(0x221)](_0x850162-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x243424,_0x22ed82+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x850162,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,'left',_0x28b056(0x232),![]);let _0x1cb169=_0x850162+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x2b5e6f=_0x28b056(0x2b3)+RECURRING_EXTRA_LIFE_INTERVAL+_0x28b056(0x28c);typeof shipImage!==_0x28b056(0x26c)&&shipImage[_0x28b056(0x2a5)]&&shipImage['naturalHeight']!==0x0&&gameCtx[_0x28b056(0x1fd)](shipImage,Math[_0x28b056(0x221)](_0x22ed82),Math[_0x28b056(0x221)](_0x1cb169-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x2b5e6f,_0x22ed82+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x1cb169,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x28b056(0x292),'middle',![]);let _0x154985=_0x1cb169+SCORE_SCREEN_LINE_V_SPACING*0x1;const _0x3e5482=_0x28b056(0x296)+RECURRING_EXTRA_LIFE_INTERVAL+'\x20PTS';typeof shipImage!=='undefined'&&shipImage[_0x28b056(0x2a5)]&&shipImage[_0x28b056(0x29f)]!==0x0&&gameCtx[_0x28b056(0x1fd)](shipImage,Math[_0x28b056(0x221)](_0x22ed82),Math[_0x28b056(0x221)](_0x154985-LIFE_ICON_SIZE/0x2-0x5),LIFE_ICON_SIZE,LIFE_ICON_SIZE);drawCanvasText(_0x3e5482,_0x22ed82+LIFE_ICON_SIZE+SCORE_SCREEN_ICON_TEXT_H_SPACING,_0x154985,SCORE_SCREEN_TEXT_FONT,SCORE_SCREEN_TEXT_COLOR_BONUS,_0x28b056(0x292),_0x28b056(0x232),![]);let _0x2ff356=_0x154985+SCORE_SCREEN_LINE_V_SPACING*1.8;drawCanvasText(SCORE_SCREEN_PLATINI_TEXT,_0x27eee1-0xa,_0x2ff356+0x1e,MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),![]),gameCtx[_0x28b056(0x249)]();}}else{gameCtx['save']();const _0x80c6b3=gameCanvas[_0x28b056(0x222)],_0x1bc345=gameCanvas['height'],_0x3a5efb=_0x80c6b3/0x2;selectedButtonIndex===-0x1&&(selectedButtonIndex=0x0);let _0x3f9963=MENU_LOGO_APPROX_HEIGHT,_0x17c861=_0x3f9963*(logoImage['naturalWidth']/logoImage[_0x28b056(0x29f)]||0x1);typeof logoImage!==_0x28b056(0x26c)&&logoImage[_0x28b056(0x2a5)]&&logoImage[_0x28b056(0x29f)]!==0x0&&(_0x3f9963=logoImage[_0x28b056(0x29f)]*LOGO_SCALE_FACTOR,_0x17c861=logoImage[_0x28b056(0x250)]*LOGO_SCALE_FACTOR);const _0xcf6b6=getSubtitleApproxHeight(MENU_SUBTITLE_FONT),_0x52bc1b=_0x3f9963+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0xcf6b6;let _0x11eeb7=(_0x1bc345-_0x52bc1b)/0x2-0x46;_0x11eeb7+=MENU_GENERAL_Y_OFFSET;const _0x470e30=_0x3a5efb-_0x17c861/0x2,_0x284fac=_0x11eeb7+MENU_LOGO_EXTRA_Y_OFFSET;typeof logoImage!==_0x28b056(0x26c)&&logoImage[_0x28b056(0x2a5)]&&logoImage[_0x28b056(0x29f)]!==0x0?gameCtx['drawImage'](logoImage,Math[_0x28b056(0x221)](_0x470e30),Math[_0x28b056(0x221)](_0x284fac),_0x17c861,_0x3f9963):drawCanvasText(_0x28b056(0x28a),_0x3a5efb,_0x284fac+_0x3f9963/0x2,_0x28b056(0x27e),_0x28b056(0x259));if(isFiringModeSelectMode)drawCanvasButton(_0x28b056(0x2b0),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x28b056(0x201),0x1,selectedButtonIndex===0x1);else isPlayerSelectMode?(drawCanvasButton(_0x28b056(0x1f7),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x28b056(0x27a),0x1,selectedButtonIndex===0x1)):(drawCanvasButton(_0x28b056(0x22f),0x0,selectedButtonIndex===0x0),drawCanvasButton(_0x28b056(0x217),0x1,selectedButtonIndex===0x1));const _0x59a3d2=getMenuButtonRect(0x1);let _0x33c923;_0x59a3d2?_0x33c923=_0x59a3d2['y']+_0x59a3d2[_0x28b056(0x205)]+MENU_BUTTON_SUBTITLE_V_GAP+_0xcf6b6/0x2:_0x33c923=_0x11eeb7+_0x3f9963+MENU_LOGO_BOTTOM_TO_START_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_V_GAP+MENU_BUTTON_HEIGHT+MENU_BUTTON_SUBTITLE_V_GAP+_0xcf6b6/0x2,drawCanvasText(MENU_SUBTITLE_TEXT,_0x3a5efb-0x1,Math[_0x28b056(0x221)](_0x33c923),MENU_SUBTITLE_FONT,MENU_SUBTITLE_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),!![]),gameCtx['restore']();}}else{if(gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage){gameCtx[_0x28b056(0x22e)]();let _0x25ee42=!showReadyMessage&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!isCsCompletionDelayActive&&!isShowingIntro&&!isShowingCaptureMessage;_0x25ee42&&(bullets[_0x28b056(0x202)](_0x2adc13=>{const _0xf8a427=_0x28b056;_0x2adc13&&(typeof bulletImage!==_0xf8a427(0x26c)&&bulletImage[_0xf8a427(0x2a5)]?gameCtx[_0xf8a427(0x1fd)](bulletImage,Math[_0xf8a427(0x221)](_0x2adc13['x']),Math[_0xf8a427(0x221)](_0x2adc13['y']),_0x2adc13[_0xf8a427(0x222)],_0x2adc13[_0xf8a427(0x205)]):(gameCtx[_0xf8a427(0x224)]=_0xf8a427(0x26a),gameCtx[_0xf8a427(0x25d)](Math[_0xf8a427(0x221)](_0x2adc13['x']),Math[_0xf8a427(0x221)](_0x2adc13['y']),_0x2adc13[_0xf8a427(0x222)],_0x2adc13[_0xf8a427(0x205)])));}),enemyBullets[_0x28b056(0x202)](_0x18d3fe=>{const _0x355284=_0x28b056;_0x18d3fe&&(typeof enemyBulletImage!==_0x355284(0x26c)&&enemyBulletImage[_0x355284(0x2a5)]&&enemyBulletImage[_0x355284(0x250)]>0x0?gameCtx[_0x355284(0x1fd)](enemyBulletImage,Math[_0x355284(0x221)](_0x18d3fe['x']),Math[_0x355284(0x221)](_0x18d3fe['y']),_0x18d3fe['width'],_0x18d3fe[_0x355284(0x205)]):(gameCtx[_0x355284(0x224)]='white',gameCtx['fillRect'](Math[_0x355284(0x221)](_0x18d3fe['x']),Math[_0x355284(0x221)](_0x18d3fe['y']),_0x18d3fe[_0x355284(0x222)],_0x18d3fe[_0x355284(0x205)])));}));enemies[_0x28b056(0x202)](_0x107452=>{const _0x1d3d0a=_0x28b056;if(_0x107452&&_0x107452['y']<gameCanvas['height']+_0x107452[_0x1d3d0a(0x205)]*0x2&&_0x107452['y']>-_0x107452[_0x1d3d0a(0x205)]*0x2){gameCtx['save']();try{let _0x59d41e=null,_0x21359a=_0x1d3d0a(0x259);const _0x34124f=!isPaused&&_0x485392%(ENEMY_ANIMATION_INTERVAL_MS*0x2)>=ENEMY_ANIMATION_INTERVAL_MS;if(_0x107452['type']===ENEMY3_TYPE)_0x59d41e=_0x34124f?bossGalagaImage2:bossGalagaImage,_0x21359a=_0x1d3d0a(0x29e);else _0x107452[_0x1d3d0a(0x21c)]===ENEMY2_TYPE?(_0x59d41e=_0x34124f?butterflyImage2:butterflyImage,_0x21359a=_0x1d3d0a(0x23a)):(_0x59d41e=_0x34124f?beeImage2:beeImage,_0x21359a=_0x1d3d0a(0x20a));const _0x33d123=Math[_0x1d3d0a(0x221)](_0x107452['x']),_0x386124=Math[_0x1d3d0a(0x221)](_0x107452['y']),_0x1af040=_0x107452[_0x1d3d0a(0x222)],_0x1210d2=_0x107452[_0x1d3d0a(0x205)],_0x2bc7a3=_0x107452['type']===ENEMY3_TYPE&&_0x107452[_0x1d3d0a(0x2ae)],_0x518a5e=!isPaused&&(_0x107452[_0x1d3d0a(0x239)]==='attacking'||_0x107452['state']===_0x1d3d0a(0x238)||_0x107452[_0x1d3d0a(0x239)]===_0x1d3d0a(0x28e))&&_0x107452['y']>-_0x107452['height']*0.5&&(Math[_0x1d3d0a(0x2b2)](_0x107452[_0x1d3d0a(0x26e)])>0.1||Math[_0x1d3d0a(0x2b2)](_0x107452[_0x1d3d0a(0x23e)])>0.1),_0x57e64b=_0x107452[_0x1d3d0a(0x239)]===_0x1d3d0a(0x291)&&_0x107452['type']===ENEMY3_TYPE&&_0x107452[_0x1d3d0a(0x1f0)]&&_0x107452[_0x1d3d0a(0x230)]&&typeof _0x107452[_0x1d3d0a(0x28d)]===_0x1d3d0a(0x225)&&typeof _0x107452['capturedShipY']===_0x1d3d0a(0x225)&&typeof _0x107452[_0x1d3d0a(0x208)]==='number',_0x3d7276=_0x107452[_0x1d3d0a(0x239)]!==_0x1d3d0a(0x291)&&_0x107452[_0x1d3d0a(0x21c)]===ENEMY3_TYPE&&_0x107452[_0x1d3d0a(0x1f0)]&&_0x107452[_0x1d3d0a(0x230)],_0x507a36=_0x57e64b||_0x3d7276?_0x107452[_0x1d3d0a(0x230)][_0x1d3d0a(0x222)]:0x0,_0x5749ee=_0x57e64b||_0x3d7276?_0x107452[_0x1d3d0a(0x230)][_0x1d3d0a(0x205)]:0x0;let _0xc9bd46=0x0,_0x37b7a0=0x0;if(_0x57e64b)_0xc9bd46=Math[_0x1d3d0a(0x221)](_0x107452[_0x1d3d0a(0x28d)]),_0x37b7a0=Math[_0x1d3d0a(0x221)](_0x107452['capturedShipY']);else _0x3d7276&&(_0xc9bd46=Math[_0x1d3d0a(0x221)](_0x107452['x']+CAPTURED_SHIP_OFFSET_X),_0x37b7a0=Math[_0x1d3d0a(0x221)](_0x107452['y']+CAPTURED_SHIP_OFFSET_Y));const _0x551cc5=(_0x45df07,_0x4bade0,_0x522ca6,_0x2bee85)=>{const _0x56e32a=_0x1d3d0a;typeof _0x59d41e!=='undefined'&&_0x59d41e[_0x56e32a(0x2a5)]&&_0x59d41e[_0x56e32a(0x29f)]!==0x0?gameCtx[_0x56e32a(0x1fd)](_0x59d41e,_0x45df07,_0x4bade0,_0x522ca6,_0x2bee85):(gameCtx[_0x56e32a(0x224)]=_0x21359a,gameCtx[_0x56e32a(0x25d)](_0x45df07,_0x4bade0,_0x522ca6,_0x2bee85)),_0x2bc7a3&&(gameCtx[_0x56e32a(0x264)]='source-atop',gameCtx[_0x56e32a(0x224)]=_0x56e32a(0x262),gameCtx['fillRect'](_0x45df07,_0x4bade0,_0x522ca6,_0x2bee85),gameCtx[_0x56e32a(0x264)]='source-over');};if(_0x518a5e){const _0xc35d6d=_0x33d123+_0x1af040/0x2,_0x50b963=_0x386124+_0x1210d2/0x2;gameCtx[_0x1d3d0a(0x229)](_0xc35d6d,_0x50b963);let _0xfb7a74=Math[_0x1d3d0a(0x1f9)](_0x107452[_0x1d3d0a(0x23e)],_0x107452[_0x1d3d0a(0x26e)])+Math['PI']/0x2;if(_0x107452['type']===ENEMY3_TYPE&&_0x107452[_0x1d3d0a(0x239)]===_0x1d3d0a(0x268))_0xfb7a74+=Math['PI'];gameCtx[_0x1d3d0a(0x20e)](_0xfb7a74),_0x551cc5(-_0x1af040/0x2,-_0x1210d2/0x2,_0x1af040,_0x1210d2);if(_0x3d7276&&typeof shipImage!==_0x1d3d0a(0x26c)&&shipImage[_0x1d3d0a(0x2a5)]){gameCtx[_0x1d3d0a(0x1fe)]=0.8;const _0x1cd8b1=CAPTURED_SHIP_OFFSET_X,_0x101d53=CAPTURED_SHIP_OFFSET_Y;gameCtx['drawImage'](shipImage,_0x1cd8b1-_0x507a36/0x2,_0x101d53-_0x5749ee/0x2,_0x507a36,_0x5749ee),gameCtx[_0x1d3d0a(0x1fe)]=0x1,gameCtx[_0x1d3d0a(0x22e)](),gameCtx[_0x1d3d0a(0x224)]=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x1d3d0a(0x264)]=_0x1d3d0a(0x255),gameCtx[_0x1d3d0a(0x25d)](_0x1cd8b1-_0x507a36/0x2,_0x101d53-_0x5749ee/0x2,_0x507a36,_0x5749ee),gameCtx[_0x1d3d0a(0x249)]();}gameCtx[_0x1d3d0a(0x20e)](-_0xfb7a74),gameCtx['translate'](-_0xc35d6d,-_0x50b963);}else _0x551cc5(_0x33d123,_0x386124,_0x1af040,_0x1210d2),_0x3d7276&&typeof shipImage!==_0x1d3d0a(0x26c)&&shipImage['complete']&&(gameCtx[_0x1d3d0a(0x1fe)]=0.8,gameCtx[_0x1d3d0a(0x1fd)](shipImage,_0xc9bd46,_0x37b7a0,_0x507a36,_0x5749ee),gameCtx['globalAlpha']=0x1,gameCtx[_0x1d3d0a(0x22e)](),gameCtx[_0x1d3d0a(0x224)]=CAPTURED_SHIP_TINT_COLOR,gameCtx['globalCompositeOperation']=_0x1d3d0a(0x255),gameCtx['fillRect'](_0xc9bd46,_0x37b7a0,_0x507a36,_0x5749ee),gameCtx['restore']());if(_0x57e64b&&typeof shipImage!=='undefined'&&shipImage['complete']){gameCtx[_0x1d3d0a(0x22e)]();const _0x3dd223=_0xc9bd46+_0x507a36/0x2,_0x1c5726=_0x37b7a0+_0x5749ee/0x2;gameCtx[_0x1d3d0a(0x229)](_0x3dd223,_0x1c5726),gameCtx[_0x1d3d0a(0x20e)](_0x107452[_0x1d3d0a(0x208)]),gameCtx[_0x1d3d0a(0x1fe)]=0.8,gameCtx[_0x1d3d0a(0x1fd)](shipImage,-_0x507a36/0x2,-_0x5749ee/0x2,_0x507a36,_0x5749ee),gameCtx[_0x1d3d0a(0x1fe)]=0x1,gameCtx[_0x1d3d0a(0x22e)](),gameCtx['fillStyle']=CAPTURED_SHIP_TINT_COLOR,gameCtx[_0x1d3d0a(0x264)]=_0x1d3d0a(0x255),gameCtx[_0x1d3d0a(0x25d)](-_0x507a36/0x2,-_0x5749ee/0x2,_0x507a36,_0x5749ee),gameCtx['restore'](),gameCtx['restore']();}}catch(_0x3c6fc0){console[_0x1d3d0a(0x228)](_0x1d3d0a(0x254),_0x3c6fc0),gameCtx[_0x1d3d0a(0x224)]=_0x1d3d0a(0x281),gameCtx[_0x1d3d0a(0x25d)](Math[_0x1d3d0a(0x221)](_0x107452['x']),Math[_0x1d3d0a(0x221)](_0x107452['y']),_0x107452['width'],_0x107452['height']);}finally{gameCtx[_0x1d3d0a(0x249)]();}}});if(captureBeamActive&&capturingBossId&&captureBeamProgress>0x0){gameCtx[_0x28b056(0x22e)]();const _0x2456d4=0.4+(Math['sin'](_0x485392*CAPTURE_BEAM_PULSE_SPEED)+0x1)/0x2*0.6,_0x5c3111=captureBeamProgress;gameCtx[_0x28b056(0x1fe)]=_0x5c3111*_0x2456d4;const _0x57524f=enemies[_0x28b056(0x213)](_0x230569=>_0x230569['id']===capturingBossId);if(_0x57524f){const _0x23ea19=_0x57524f['x']+BOSS_WIDTH/0x2,_0x56016d=_0x57524f['y']+BOSS_HEIGHT,_0x336c0c=gameCanvas['height']-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x2b384c=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x1caf77=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR;if(_0x56016d<_0x336c0c){const _0x5b432e=gameCtx[_0x28b056(0x236)](_0x23ea19,_0x56016d,_0x23ea19,_0x336c0c);_0x5b432e['addColorStop'](0x0,CAPTURE_BEAM_COLOR_START),_0x5b432e[_0x28b056(0x248)](0x1,CAPTURE_BEAM_COLOR_END),gameCtx[_0x28b056(0x224)]=_0x5b432e,gameCtx[_0x28b056(0x21b)](),gameCtx[_0x28b056(0x20d)](_0x23ea19-_0x2b384c/0x2,_0x56016d),gameCtx[_0x28b056(0x200)](_0x23ea19+_0x2b384c/0x2,_0x56016d),gameCtx[_0x28b056(0x200)](_0x23ea19+_0x1caf77/0x2,_0x336c0c),gameCtx[_0x28b056(0x200)](_0x23ea19-_0x1caf77/0x2,_0x336c0c),gameCtx['closePath'](),gameCtx['fill']();}}gameCtx[_0x28b056(0x249)]();}renderExplosions(),renderFloatingScores(),renderHitSparks();let _0x5af28e=![];const _0x4077db=gameCanvas[_0x28b056(0x205)]/0x2,_0x4b737d=gameCanvas[_0x28b056(0x222)]/0x2,_0x6eeda0=_0x28b056(0x2ab)+challengingStageEnemiesHit,_0x12bb80=_0x28b056(0x21d)+scoreEarnedThisCS;if(isPaused)drawCanvasText('PAUSED',_0x4b737d,_0x4077db,PAUSE_TEXT_FONT,PAUSE_TEXT_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),PAUSE_TEXT_SHADOW),_0x5af28e=!![];else{if(isShowingCaptureMessage)drawCanvasText(_0x28b056(0x1f3),_0x4b737d,_0x4077db-0x28,INTRO_TEXT_FONT,'red',_0x28b056(0x2a9),_0x28b056(0x232),!![]),_0x5af28e=!![];else{if(showCsBonusScoreMessage||showPerfectMessage||showCsHitsMessage)drawCanvasText(_0x6eeda0,_0x4b737d,_0x4077db,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),!![]),_0x5af28e=!![],(showCsBonusScoreMessage||showPerfectMessage)&&drawCanvasText(_0x28b056(0x207),_0x4b737d,_0x4077db-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,PERFECT_TEXT_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),!![]),showCsBonusScoreMessage&&drawCanvasText(_0x28b056(0x280),_0x4b737d,_0x4077db+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_BONUS_SCORE_TEXT_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),!![]);else{if(showCSClearMessage)drawCanvasText(_0x28b056(0x29a),_0x4b737d,_0x4077db-CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_TEXT_COLOR,'center',_0x28b056(0x232),!![]),_0x5af28e=!![],showCsHitsForClearMessage&&drawCanvasText(_0x6eeda0,_0x4b737d,_0x4077db,INTRO_TEXT_FONT,CS_HITS_TEXT_COLOR,'center','middle',!![]),showCsScoreForClearMessage&&drawCanvasText(_0x12bb80,_0x4b737d,_0x4077db+CS_MESSAGE_VERTICAL_OFFSET,INTRO_TEXT_FONT,CS_CLEAR_SCORE_TEXT_COLOR,'center','middle',!![]);else{if(showExtraLifeMessage)drawCanvasText(_0x28b056(0x295),_0x4b737d,_0x4077db,INTRO_TEXT_FONT,EXTRA_LIFE_TEXT_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),!![]),_0x5af28e=!![];else{if(isShowingIntro){let _0x38f090='',_0x93240=INTRO_TEXT_COLOR_NORMAL;if(introStep===0x1)_0x38f090=!isManualControl?'DEMO':_0x28b056(0x2a8)+(isTwoPlayerMode?currentPlayer:0x1);else{if(introStep===0x2)_0x38f090='STAGE\x20'+level;else introStep===0x3&&(_0x38f090=_0x28b056(0x231),_0x93240=INTRO_TEXT_COLOR_CS_TEXT,!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}_0x38f090&&(drawCanvasText(_0x38f090,_0x4b737d,_0x4077db,INTRO_TEXT_FONT,_0x93240,'center',_0x28b056(0x232),!![]),_0x5af28e=!![]);}else{if(!isManualControl&&isShowingDemoText&&!_0x5af28e&&!isEntrancePhaseActive&&!isCsCompletionDelayActive){const _0x48aeaa=DEMO_TEXT_BLINK_CYCLE_MS*1.5,_0x187e10=DEMO_TEXT_BLINK_ON_MS*1.5;_0x485392%_0x48aeaa<_0x187e10&&drawCanvasText('PUSH\x20START\x20BUTTON',_0x4b737d,_0x4077db,DEMO_TEXT_LINE1_FONT,DEMO_TEXT_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),!![]);}}}}}}}gameCtx[_0x28b056(0x249)]();}else{if(isShowingPlayerGameOverMessage){const _0x3e34d2=_0x28b056(0x2a8)+playerWhoIsGameOver,_0x4df280=RESULTS_LINE_V_SPACING_SINGLE,_0x36670f=gameCanvas[_0x28b056(0x205)]*0.45;drawCanvasText(_0x3e34d2,gameCanvas[_0x28b056(0x222)]/0x2,_0x36670f-_0x4df280/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x28b056(0x2a9),_0x28b056(0x232),!![]),drawCanvasText('GAME\x20OVER',gameCanvas[_0x28b056(0x222)]/0x2,_0x36670f+_0x4df280/0x2,INTRO_TEXT_FONT,INTRO_TEXT_COLOR_NORMAL,_0x28b056(0x2a9),_0x28b056(0x232),!![]);}else{if(gameOverSequenceStartTime>0x0){const _0x2e38d1=_0x485392-gameOverSequenceStartTime,_0x256a1=_0x2e38d1<GAME_OVER_DURATION,_0x1b830d=_0x2e38d1>=GAME_OVER_DURATION;if(_0x256a1)drawCanvasText(_0x28b056(0x25e),gameCanvas[_0x28b056(0x222)]/0x2,gameCanvas[_0x28b056(0x205)]/0x2,GAME_OVER_FONT,GAME_OVER_COLOR,_0x28b056(0x2a9),_0x28b056(0x232),GAME_OVER_SHADOW);else{if(_0x1b830d){gameCtx[_0x28b056(0x22e)]();const _0x5ef1c0=gameCanvas[_0x28b056(0x222)]/0x2,_0x2db239=gameCanvas[_0x28b056(0x222)];let _0x351f5d=RESULTS_START_Y+RESULTS_LINE_V_SPACING_SINGLE;const _0x1d9581=(_0xa7ea4f,_0x412f26,_0x4627c4,_0x1f3377,_0xddc7a5,_0x4262e7,_0x3a8970,_0xf312fc)=>{const _0x538168=_0x28b056;let _0x4f2952=_0xf312fc;const _0x37e196=RESULTS_VALUE_COLOR_YELLOW,_0x105de9=RESULTS_VALUE_COLOR_CYAN;drawCanvasText('-\x20RESULTS\x20-',_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_HEADER_COLOR,'center','top',!![]),_0x4f2952+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0xa7ea4f,_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,_0x538168(0x297),_0x538168(0x2a9),_0x538168(0x232),![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x538168(0x246),_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,_0x37e196,_0x538168(0x2a9),_0x538168(0x232),![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x4262e7['toString'](),_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,_0x105de9,_0x538168(0x2a9),'middle',![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText(_0x538168(0x265),_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x538168(0x2a9),'middle',![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x412f26['toString'](),_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center','middle',![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText('SHOTS\x20FIRED',_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x538168(0x2a9),'middle',![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x4627c4[_0x538168(0x211)](),_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x538168(0x2a9),'middle',![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText('NUMBER\x20OF\x20HITS',_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,_0x538168(0x2a9),'middle',![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0x1f3377[_0x538168(0x211)](),_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x538168(0x2a9),'middle',![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE,drawCanvasText('HIT-MISS-RATIO',_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_YELLOW,'center',_0x538168(0x232),![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE*0.8,drawCanvasText(_0xddc7a5,_0x3a8970,_0x4f2952,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,'center',_0x538168(0x232),![]),_0x4f2952+=RESULTS_LINE_V_SPACING_SINGLE*1.5,drawCanvasText(RESULTS_PLATINI_TEXT,_0x3a8970,_0x4f2952-0xa,RESULTS_FOOTER_FONT,RESULTS_FOOTER_COLOR,'center',_0x538168(0x232),![]);};if(isTwoPlayerMode){const _0xb1a21=player1ShotsFired||0x0,_0x1ebef6=player1EnemiesHit||0x0,_0x255c59=_0xb1a21>0x0?Math[_0x28b056(0x221)](_0x1ebef6/_0xb1a21*0x64)+'%':'0%',_0x1ea0f3=player2ShotsFired||0x0,_0x48c18c=player2EnemiesHit||0x0,_0x1b0717=_0x1ea0f3>0x0?Math[_0x28b056(0x221)](_0x48c18c/_0x1ea0f3*0x64)+'%':'0%',_0x89942c=_0x2db239*0.4,_0x1b3d29=_0x2db239*0.1,_0x550725=_0x5ef1c0-_0x1b3d29/0x2-_0x89942c/0x2+_0x89942c*0.1,_0x366b73=_0x5ef1c0+_0x1b3d29/0x2+_0x89942c/0x2-_0x89942c*0.1,_0x51a4f8=_0x28b056(0x23d);_0x1d9581(_0x51a4f8,player1Score,_0xb1a21,_0x1ebef6,_0x255c59,player1MaxLevelReached,_0x550725,_0x351f5d),_0x1d9581(_0x28b056(0x2ac),player2Score,_0x1ea0f3,_0x48c18c,_0x1b0717,player2MaxLevelReached,_0x366b73,_0x351f5d);let _0x270982=0x0;if(player1Score>player2Score)_0x270982=0x1;else{if(player2Score>player1Score)_0x270982=0x2;}if(_0x270982>0x0){let _0x13c16a=_0x351f5d;_0x13c16a+=getSubtitleApproxHeight(INTRO_TEXT_FONT)+RESULTS_LINE_V_SPACING_SINGLE,_0x13c16a+=RESULTS_LINE_V_SPACING_SINGLE,_0x13c16a+=RESULTS_LINE_V_SPACING_SINGLE*0x2;const _0x42df09='PLAYER\x20'+_0x270982,_0x4d5d5f=_0x28b056(0x270);drawCanvasText(_0x42df09,_0x5ef1c0,_0x13c16a,INTRO_TEXT_FONT,_0x28b056(0x297),_0x28b056(0x2a9),_0x28b056(0x232),!![]),drawCanvasText(_0x4d5d5f,_0x5ef1c0,_0x13c16a+RESULTS_LINE_V_SPACING_SINGLE,INTRO_TEXT_FONT,RESULTS_VALUE_COLOR_CYAN,_0x28b056(0x2a9),_0x28b056(0x232),!![]);}}else{const _0xad8282=player1ShotsFired||0x0,_0x92c1a1=player1EnemiesHit||0x0,_0x392ed1=wasLastGameAIDemo?score:player1Score,_0x1698bb=wasLastGameAIDemo?level:player1MaxLevelReached,_0x484f67=_0xad8282>0x0?Math[_0x28b056(0x221)](_0x92c1a1/_0xad8282*0x64)+'%':'0%',_0x43f7a3=wasLastGameAIDemo?_0x28b056(0x27f):_0x28b056(0x23d);_0x1d9581(_0x43f7a3,_0x392ed1,_0xad8282,_0x92c1a1,_0x484f67,_0x1698bb,_0x5ef1c0,_0x351f5d);}gameCtx[_0x28b056(0x249)]();}}}}}}}catch(_0x53df5d){console[_0x28b056(0x228)](_0x28b056(0x1f1),_0x53df5d,_0x53df5d[_0x28b056(0x290)]);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null;try{gameCtx&&gameCanvas&&(gameCtx[_0x28b056(0x224)]=_0x28b056(0x20a),gameCtx[_0x28b056(0x2b4)]='20px\x20sans-serif',gameCtx[_0x28b056(0x289)]=_0x28b056(0x2a9),gameCtx[_0x28b056(0x210)](_0x28b056(0x26b),gameCanvas[_0x28b056(0x222)]/0x2,gameCanvas[_0x28b056(0x205)]/0x2));}catch(_0x412b6e){}try{showMenuState();}catch(_0x2dd65b){}}}function hideCursor(){const _0x194e79=_0x2dae6c;gameCanvas&&(gameCanvas[_0x194e79(0x20b)][_0x194e79(0x2a4)]=_0x194e79(0x288)),mouseIdleTimerId=null;}function handleCanvasMouseMove(_0x29aaa7){const _0x12698f=_0x2dae6c;if(!gameCanvas)return;let _0x50557=_0x12698f(0x24f);const _0x577d1a=!isInGameState||isShowingScoreScreen||gameOverSequenceStartTime>0x0&&Date['now']()-gameOverSequenceStartTime>=GAME_OVER_DURATION;let _0x26b346=![],_0x5500cc=selectedButtonIndex;if(_0x577d1a){const _0x1e4a8c=gameCanvas[_0x12698f(0x26d)](),_0x202184=gameCanvas[_0x12698f(0x222)]/_0x1e4a8c[_0x12698f(0x222)],_0x2496ba=gameCanvas[_0x12698f(0x205)]/_0x1e4a8c['height'],_0x189514=(_0x29aaa7[_0x12698f(0x237)]-_0x1e4a8c[_0x12698f(0x292)])*_0x202184,_0x59ffca=(_0x29aaa7[_0x12698f(0x1fc)]-_0x1e4a8c[_0x12698f(0x242)])*_0x2496ba,_0x31d968=getMenuButtonRect(0x0),_0x17e5ab=getMenuButtonRect(0x1);if(_0x31d968&&checkCollision({'x':_0x189514,'y':_0x59ffca,'width':0x1,'height':0x1},_0x31d968))_0x5500cc=0x0,_0x26b346=!![];else _0x17e5ab&&checkCollision({'x':_0x189514,'y':_0x59ffca,'width':0x1,'height':0x1},_0x17e5ab)?(_0x5500cc=0x1,_0x26b346=!![]):(_0x5500cc=-0x1,_0x26b346=![]);_0x5500cc!==selectedButtonIndex&&(selectedButtonIndex=_0x5500cc,_0x26b346&&stopAutoDemoTimer()),_0x50557=_0x26b346?'pointer':_0x12698f(0x24f);}else _0x50557=_0x12698f(0x288),selectedButtonIndex=-0x1;(gameCanvas[_0x12698f(0x20b)]['cursor']===_0x12698f(0x288)||gameCanvas[_0x12698f(0x20b)][_0x12698f(0x2a4)]!==_0x50557)&&(gameCanvas[_0x12698f(0x20b)][_0x12698f(0x2a4)]=_0x50557);clearTimeout(mouseIdleTimerId),mouseIdleTimerId=setTimeout(hideCursor,0x7d0);if(!isInGameState){const _0x335ca9=Date[_0x12698f(0x27c)]();if(_0x335ca9-lastMouseMoveResetTime>0x1f4){if(typeof startAutoDemoTimer===_0x12698f(0x234))startAutoDemoTimer();lastMouseMoveResetTime=_0x335ca9;}}}function getTouchPos(_0x1886a0,_0x1cbe70){const _0x4747c8=_0x2dae6c,_0x23e3ac=_0x1cbe70[_0x4747c8(0x283)]&&_0x1cbe70[_0x4747c8(0x283)][_0x4747c8(0x212)]>0x0?_0x1cbe70[_0x4747c8(0x283)]:_0x1cbe70[_0x4747c8(0x23c)];if(!_0x1886a0||!_0x23e3ac||_0x23e3ac['length']===0x0)return null;const _0x5a103e=_0x1886a0['getBoundingClientRect'](),_0x153c25=_0x23e3ac[0x0],_0x343061=_0x1886a0['width']/_0x5a103e['width'],_0x55b4bd=_0x1886a0['height']/_0x5a103e[_0x4747c8(0x205)];return{'x':(_0x153c25[_0x4747c8(0x237)]-_0x5a103e[_0x4747c8(0x292)])*_0x343061,'y':(_0x153c25[_0x4747c8(0x1fc)]-_0x5a103e[_0x4747c8(0x242)])*_0x55b4bd};}function handleTouchStart(_0x4e055a){const _0x695d03=_0x2dae6c;if(!gameCanvas)return;_0x4e055a[_0x695d03(0x252)]();const _0x1e609e=getTouchPos(gameCanvas,_0x4e055a);if(!_0x1e609e)return;isTouching=!![],touchStartX=_0x1e609e['x'],touchCurrentX=_0x1e609e['x'],isDraggingShip=![],lastTapTime=Date[_0x695d03(0x27c)](),touchJustFiredSingle=![],isTouchFiringActive=![];const _0x94d1e4=isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage;if(_0x94d1e4){const _0x33d75c=ship['x']+ship['width']/0x2,_0x59e0ca={'x':ship['x']-ship[_0x695d03(0x222)]*0.25,'y':ship['y']-ship[_0x695d03(0x205)]*0.5,'width':ship[_0x695d03(0x222)]*1.5,'height':ship[_0x695d03(0x205)]*0x2};checkCollision({'x':_0x1e609e['x'],'y':_0x1e609e['y'],'width':0x1,'height':0x1},_0x59e0ca)?shipTouchOffsetX=_0x1e609e['x']-_0x33d75c:shipTouchOffsetX=0x0,selectedFiringMode===_0x695d03(0x263)&&(isTouchFiringActive=!![],typeof firePlayerBullet===_0x695d03(0x234)&&firePlayerBullet(![]));}else shipTouchOffsetX=0x0;}function handleTouchMove(_0x3f17bc){const _0x12ed4=_0x2dae6c;if(!isTouching||!gameCanvas)return;_0x3f17bc['preventDefault']();const _0x351e6c=getTouchPos(gameCanvas,_0x3f17bc);if(!_0x351e6c)return;touchCurrentX=_0x351e6c['x'];const _0x1128aa=Math['abs'](touchCurrentX-touchStartX),_0x287d99=Date['now']()-lastTapTime;!isDraggingShip&&((_0x1128aa>MIN_DRAG_DISTANCE_FOR_TAP_CANCEL||_0x287d99>MIN_DRAG_TIME_FOR_TAP_CANCEL)&&(isDraggingShip=!![]));if(isDraggingShip&&isInGameState&&!isPaused&&ship&&isManualControl&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive){let _0x472699=touchCurrentX-shipTouchOffsetX,_0x4925a8=_0x472699-ship[_0x12ed4(0x222)]/0x2;const _0x3760b2=isDualShipActive?ship[_0x12ed4(0x222)]+DUAL_SHIP_OFFSET_X:ship[_0x12ed4(0x222)];ship['x']=Math['max'](0x0,Math[_0x12ed4(0x27d)](gameCanvas['width']-_0x3760b2,_0x4925a8)),ship[_0x12ed4(0x23f)]=ship['x'];}}function handleTouchEnd(_0x4f9d28){const _0x56cf42=_0x2dae6c;if(!isTouching||!gameCanvas)return;_0x4f9d28[_0x56cf42(0x252)]();const _0x212b3e=!isDraggingShip;if(_0x212b3e){const _0x4a4a2a=getTouchPos(gameCanvas,_0x4f9d28);if(!_0x4a4a2a){isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];return;}if(isShowingIntro&&isInGameState)typeof stopGameAndShowMenu===_0x56cf42(0x234)&&stopGameAndShowMenu();else{if(!isInGameState||isShowingScoreScreen)typeof processMenuInteraction===_0x56cf42(0x234)&&processMenuInteraction(_0x4a4a2a['x'],_0x4a4a2a['y']);else isInGameState&&isManualControl&&playerLives>0x0&&!isPaused&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isWaitingForRespawn&&!isCsCompletionDelayActive&&!showCsHitsMessage&&!showPerfectMessage&&!showCsBonusScoreMessage&&!showCSClearMessage&&!showExtraLifeMessage&&(selectedFiringMode===_0x56cf42(0x24c)&&(typeof firePlayerBullet==='function'&&(!touchJustFiredSingle&&(firePlayerBullet(![])&&(touchJustFiredSingle=!![])))));}}isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![];}function handleTouchCancel(_0x102a16){const _0x430000=_0x2dae6c;if(!isTouching)return;_0x102a16[_0x430000(0x252)](),isTouching=![],isDraggingShip=![],shipTouchOffsetX=0x0,touchStartX=0x0,isTouchFiringActive=![],touchJustFiredSingle=![];}function _0x58a1(_0x4a6d92,_0x51e6be){const _0x25cc19=_0x25cc();return _0x58a1=function(_0x58a1e7,_0x5c3fe5){_0x58a1e7=_0x58a1e7-0x1f0;let _0xebc686=_0x25cc19[_0x58a1e7];return _0xebc686;},_0x58a1(_0x4a6d92,_0x51e6be);}function mainLoop(_0x58725a){const _0x11da84=_0x2dae6c;try{drawStars();retroGridCtx&&retroGridCanvas&&drawRetroGrid();pollControllerForMenu();if(isInGameState&&!isPaused){if(!isManualControl&&connectedGamepadIndex!==null){const _0x4da694=navigator[_0x11da84(0x226)]();if(_0x4da694?.[connectedGamepadIndex]){const _0x1d7cfa=_0x4da694[connectedGamepadIndex],_0x302d30=_0x1d7cfa[_0x11da84(0x1f6)]['map'](_0x5b1711=>_0x5b1711[_0x11da84(0x1f5)]);let _0x54e678=![];for(let _0x585dce=0x0;_0x585dce<_0x302d30['length'];_0x585dce++){if(_0x585dce===PS5_BUTTON_R1||_0x585dce===PS5_BUTTON_TRIANGLE)continue;if(_0x302d30[_0x585dce]&&!(previousDemoButtonStates[_0x585dce]??![])){_0x54e678=!![];break;}}if(_0x54e678){stopSound(menuMusicSound),showMenuState(),requestAnimationFrame(mainLoop);return;}previousDemoButtonStates=_0x302d30['slice']();}else{if(previousDemoButtonStates[_0x11da84(0x212)]>0x0)previousDemoButtonStates=[];}}else{if(previousDemoButtonStates['length']>0x0)previousDemoButtonStates=[];}if(typeof runSingleGameUpdate===_0x11da84(0x234))runSingleGameUpdate(_0x58725a);else{console[_0x11da84(0x228)]('FATAL:\x20runSingleGameUpdate\x20is\x20not\x20defined!');if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,showMenuState(),requestAnimationFrame(mainLoop);return;}if(gameOverSequenceStartTime>0x0){const _0x1b8fa4=Date[_0x11da84(0x27c)](),_0x7fefad=_0x1b8fa4-gameOverSequenceStartTime,_0xaa535a=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0x7fefad>=_0xaa535a){showMenuState(),requestAnimationFrame(mainLoop);return;}}}else{if(isShowingScoreScreen){const _0x1141d6=Date[_0x11da84(0x27c)]()-scoreScreenStartTime;if(_0x1141d6>=SCORE_SCREEN_DURATION){startAIDemo(),requestAnimationFrame(mainLoop);return;}if(typeof renderGame==='function')renderGame();}else{if(isInGameState&&gameOverSequenceStartTime>0x0){if(typeof renderGame===_0x11da84(0x234))renderGame();const _0x746cf=Date['now'](),_0xf15a93=_0x746cf-gameOverSequenceStartTime,_0x35d723=GAME_OVER_DURATION+RESULTS_SCREEN_DURATION;if(_0xf15a93>=_0x35d723){showMenuState(),requestAnimationFrame(mainLoop);return;}}else{if(isInGameState&&isPaused){if(typeof renderGame===_0x11da84(0x234))renderGame();}else{if(isInGameState&&isCsCompletionDelayActive){if(typeof runSingleGameUpdate===_0x11da84(0x234))runSingleGameUpdate(_0x58725a);else{if(typeof renderGame===_0x11da84(0x234))renderGame();}}else{if(isInGameState&&isShowingPlayerGameOverMessage){if(typeof runSingleGameUpdate===_0x11da84(0x234))runSingleGameUpdate(_0x58725a);else{if(typeof renderGame===_0x11da84(0x234))renderGame();}}else{if(typeof renderGame===_0x11da84(0x234))renderGame();}}}}}}mainLoopId=requestAnimationFrame(mainLoop);}catch(_0x27ccb3){console[_0x11da84(0x228)](_0x11da84(0x247),_0x27ccb3,_0x27ccb3[_0x11da84(0x290)]);if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,isPaused=![],stopAllGameSounds(),isGridSoundPlaying=![];try{showMenuState();}catch(_0xecb347){console[_0x11da84(0x228)](_0x11da84(0x256),_0xecb347),document['body']['innerHTML']='<p\x20style=\x22color:white;\x22>CRITICAL\x20LOOP\x20ERROR.\x20Please\x20refresh.</p>';}}}function startMainLoop(){mainLoopId===null&&(gridOffsetY=0x0,mainLoop());}function initializeGame(){const _0x1350a0=_0x2dae6c;try{if(typeof initializeDOMElements===_0x1350a0(0x234)){if(!initializeDOMElements()){console[_0x1350a0(0x228)](_0x1350a0(0x267));return;}}else{console[_0x1350a0(0x228)](_0x1350a0(0x204));return;}if(typeof resizeCanvases===_0x1350a0(0x234))resizeCanvases();else{console[_0x1350a0(0x228)](_0x1350a0(0x293));if(gameCanvas&&starrySkyCanvas&&retroGridCanvas){const _0x56332d=window[_0x1350a0(0x1f8)],_0x463d3f=window[_0x1350a0(0x274)];starrySkyCanvas[_0x1350a0(0x222)]=_0x56332d,starrySkyCanvas['height']=_0x463d3f,retroGridCanvas[_0x1350a0(0x222)]=_0x56332d,retroGridCanvas[_0x1350a0(0x205)]=_0x463d3f,gameCanvas['width']=_0x56332d,gameCanvas[_0x1350a0(0x205)]=_0x463d3f;}else{console[_0x1350a0(0x228)](_0x1350a0(0x243));return;}}typeof defineNormalWaveEntrancePaths==='function'?defineNormalWaveEntrancePaths():console[_0x1350a0(0x228)]('defineNormalWaveEntrancePaths\x20not\x20found!');typeof defineChallengingStagePaths===_0x1350a0(0x234)?defineChallengingStagePaths():console[_0x1350a0(0x228)](_0x1350a0(0x26f));if(typeof loadHighScore===_0x1350a0(0x234))loadHighScore();else console['warn'](_0x1350a0(0x273));window['addEventListener'](_0x1350a0(0x2a3),handleKeyDown),window[_0x1350a0(0x29b)](_0x1350a0(0x219),handleKeyUp),gameCanvas?(gameCanvas[_0x1350a0(0x29b)]('click',handleCanvasClick),gameCanvas[_0x1350a0(0x29b)]('mousemove',handleCanvasMouseMove),gameCanvas[_0x1350a0(0x29b)]('touchstart',handleTouchStart,{'passive':![]}),gameCanvas['addEventListener'](_0x1350a0(0x25a),handleTouchMove,{'passive':![]}),gameCanvas[_0x1350a0(0x29b)](_0x1350a0(0x28f),handleTouchEnd,{'passive':![]}),gameCanvas[_0x1350a0(0x29b)]('touchcancel',handleTouchCancel,{'passive':![]})):console[_0x1350a0(0x228)]('Cannot\x20add\x20canvas\x20listeners:\x20gameCanvas\x20not\x20found\x20during\x20init.'),window[_0x1350a0(0x29b)]('gamepadconnected',handleGamepadConnected),window[_0x1350a0(0x29b)](_0x1350a0(0x220),handleGamepadDisconnected),window['addEventListener']('resize',resizeCanvases),showMenuState(),startMainLoop();}catch(_0x4dd4b1){console[_0x1350a0(0x228)](_0x1350a0(0x22a),_0x4dd4b1,_0x4dd4b1[_0x1350a0(0x290)]),document[_0x1350a0(0x235)][_0x1350a0(0x266)]='<div\x20style=\x22color:white;\x20padding:\x2020px;\x20font-family:\x20sans-serif;\x22><h1>Fatal\x20Initialization\x20Error</h1><p>The\x20game\x20could\x20not\x20be\x20started.\x20Please\x20check\x20the\x20browser\x20console\x20(F12)\x20for\x20details.</p><p>Error:\x20'+_0x4dd4b1['message']+_0x1350a0(0x2af),mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);}}window[_0x2dae6c(0x29b)]('load',initializeGame);function _0x25cc(){const _0x140607=['\x20PTS','capturedShipX','following_entrance_path','touchend','stack','showing_capture_message','left','resizeCanvases\x20not\x20found!','lighter','EXTRA\x20LIFE','\x20EXT\x20LIFE\x20FOR\x20EVERY\x20','white','rgba(0,\x20191,\x20255,\x200.9)','2787526LXUioJ','STAGE\x20CLEARED','addEventListener','max','add','purple','naturalHeight','warn','shadowBlur','Error\x20creating\x20explosion:','keydown','cursor','complete','FATAL:\x20resetGame\x20function\x20is\x20not\x20defined!\x20Cannot\x20start\x20game\x20properly.','size','PLAYER\x20','center','rgba(0,\x200,\x200,\x200.8)','NUMBER\x20OF\x20HITS\x20','PLAYER\x202','PUSH\x20START\x20BUTTON','isDamaged','</p></div>','EASY','shadowOffsetX','abs','\x202ND\x20LIFE\x20BONUS\x20FOR\x20','font','hasCapturedShip','Error\x20in\x20renderGame:','push','FIGHTER\x20CAPTURED','Error\x20stopping\x20auto\x20demo\x20timer:','pressed','buttons','1\x20PLAYER','innerWidth','atan2','bold\x2018px\x20\x27Press\x20Start\x202P\x27','Error\x20in\x20baseStartGame:','clientY','drawImage','globalAlpha','45VGopCH','lineTo','NORMAL','forEach','particles','initializeDOMElements\x20function\x20not\x20found!','height','1UP','PERFECT\x20!','captureAnimationRotation','measureText','red','style','textBaseline','moveTo','rotate','20px\x20\x27Press\x20Start\x202P\x27','fillText','toString','length','find','right','tintProgress','Critical\x20error:\x20Game\x20logic\x20not\x20loaded\x20correctly!','GAME\x20EXIT','sqrt','keyup','clearRect','beginPath','type','BONUS\x20','rotation','window.close()\x20failed:','gamepaddisconnected','round','width','axes','fillStyle','number','getGamepads','padStart','error','translate','FATAL\x20INITIALIZATION\x20ERROR:','has','color','921255eOZMMh','save','START\x20GAME','capturedShipDimensions','CHALLENGING\x20STAGE','middle','3pVNppS','function','body','createLinearGradient','clientX','following_bezier_path','state','cyan','HIGH\x20SCORE','touches','PLAYER\x201','velocityY','targetX','2UP','slice','top','Cannot\x20set\x20fallback\x20canvas\x20sizes.','alpha','Error\x20returning\x20to\x20menu.\x20Please\x20refresh\x20the\x20page.','STAGE','!!!\x20CRITICAL\x20ERROR\x20IN\x20mainLoop:','addColorStop','restore','val','5644248XjPmck','single','\x20level\x201\x20icons\x20due\x20to\x203-type\x20limit.\x20Used\x20types:','map','default','naturalWidth','text','preventDefault','\x201ST\x20LIFE\x20BONUS\x20FOR\x2020000\x20PTS','Error\x20drawing\x20enemy:','source-atop','Failed\x20to\x20return\x20to\x20menu\x20after\x20loop\x20error:','floor','shadowOffsetY','grey','touchmove','6qRNpDb','img','fillRect','GAME\x20OVER','3587468hbAQIU','blue','Error\x20rendering\x20explosions:','rgba(0,\x200,\x20139,\x200.5)','rapid','globalCompositeOperation','SCORE','innerHTML','DOM\x20element\x20initialization\x20failed.','attacking','toFixed','yellow','FATAL\x20RENDER\x20ERROR.','undefined','getBoundingClientRect','velocityX','defineChallengingStagePaths\x20not\x20found!','WINS','Error\x20starting\x20auto\x20demo\x20timer:','random','loadHighScore\x20function\x20not\x20found.','innerHeight','displayStartTime','match','364430tCAUMU','bold\x2018px\x20\x27Arial\x20Black\x27,\x20Gadget,\x20sans-serif','arc','2\x20PLAYER','Platini2000(c)\x20LTD','now','min','30px\x20Arial','DEMO','SPECIAL\x20BONUS\x2010000\x20PTS','orange','isArray','changedTouches','fill','Error\x20in\x20pollControllerForMenu:','Could\x20not\x20add\x20','540812YRakOJ','none','textAlign','LOGO','822834cfvwvE'];_0x25cc=function(){return _0x140607;};return _0x25cc();}