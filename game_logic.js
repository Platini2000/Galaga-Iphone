(function(_0x4946d6,_0x4cdb3b){const _0x39045b=_0xca07,_0x3c9c61=_0x4946d6();while(!![]){try{const _0x939a50=parseInt(_0x39045b(0x218))/0x1+-parseInt(_0x39045b(0x1cd))/0x2*(parseInt(_0x39045b(0x254))/0x3)+parseInt(_0x39045b(0x198))/0x4*(parseInt(_0x39045b(0x22e))/0x5)+parseInt(_0x39045b(0x20e))/0x6*(-parseInt(_0x39045b(0x18f))/0x7)+-parseInt(_0x39045b(0x224))/0x8*(-parseInt(_0x39045b(0x1af))/0x9)+parseInt(_0x39045b(0x1e2))/0xa*(parseInt(_0x39045b(0x180))/0xb)+parseInt(_0x39045b(0x1a0))/0xc;if(_0x939a50===_0x4cdb3b)break;else _0x3c9c61['push'](_0x3c9c61['shift']());}catch(_0x5846ce){_0x3c9c61['push'](_0x3c9c61['shift']());}}}(_0xc88d,0xdd195));let currentWavePatternIndex=-0x1,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined;function resetGame(){const _0x2a7f07=_0xca07;try{level=0x1,currentWavePatternIndex=-0x1,isPaused=![],isShowingIntro=![],introStep=0x0,isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,enemySpawnTimeouts[_0x2a7f07(0x19e)](clearTimeout),enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,stopAllGameSounds(),player1CompletedLevel=-0x1,forceCenterShipNextReset=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,player1Score=0x0,player2Score=0x0,player1Lives=0x3,player2Lives=0x3,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),currentPlayer=0x1,score=player1Score,playerLives=player1Lives,player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],scoreEarnedThisCS=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![],resetAllMessages(),explosions=[],isChallengingStage=![],challengingStageEnemiesHit=0x0,isShowingResultsScreen=![],currentWaveDefinition=null,isFullGridWave=![],hitSparks=[],resetWave();}catch(_0x221528){console['error']('FATAL\x20Error\x20in\x20resetGame:',_0x221528),isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,player1CompletedLevel=-0x1,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,resetAllMessages(),forceCenterShipNextReset=![],player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isFullGridWave=![],hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];typeof enemySpawnTimeouts!==_0x2a7f07(0x1c9)&&Array[_0x2a7f07(0x227)](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x2a7f07(0x19e)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x2a7f07(0x1ef))showMenuState();}}function resetAllMessages(){showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![];}function stopAllGameSounds(){const _0x2de278=_0xca07;if(typeof playingLoopSources===_0x2de278(0x270)&&playingLoopSources!==null){const _0x333b14=Object[_0x2de278(0x199)](playingLoopSources);_0x333b14['forEach'](_0x42329f=>{stopSound(_0x42329f);});}isGridSoundPlaying=![],stopSound(captureSound),stopSound(entranceSound);}function getWaveType(_0x4244cc){const _0x11ca9a=_0xca07,_0x4b60fb=(_0x4244cc-0x1)%0x4;switch(_0x4b60fb){case 0x0:return _0x11ca9a(0x258);case 0x1:return'entrance_flight_1';case 0x2:return _0x11ca9a(0x230);case 0x3:return _0x11ca9a(0x222);default:console[_0x11ca9a(0x20a)](_0x11ca9a(0x1f5)+_0x4b60fb+_0x11ca9a(0x1f1)+_0x4244cc);return'unknown';}}function generateWaveDefinition(_0x18ff60){const _0x2ef6da=_0xca07;let _0x49e3ce=[];currentWavePatternIndex=-0x1;const _0x3a2336=getWaveType(_0x18ff60);if(typeof waveEntrancePatterns==='undefined'||!Array[_0x2ef6da(0x227)](waveEntrancePatterns)||waveEntrancePatterns[_0x2ef6da(0x18d)]<0x2)return console[_0x2ef6da(0x20a)](_0x2ef6da(0x1c8)+_0x18ff60+')!'),[];if(_0x3a2336===_0x2ef6da(0x230))_0x49e3ce=[];else{if(_0x3a2336==='full_grid'){currentWavePatternIndex=0x0;const _0x395833=waveEntrancePatterns[0x0];if(!_0x395833||_0x395833['length']===0x0)console[_0x2ef6da(0x20a)](_0x2ef6da(0x1e9)+_0x18ff60+_0x2ef6da(0x1d8)),_0x49e3ce=[];else try{_0x49e3ce=JSON['parse'](JSON['stringify'](_0x395833),(_0x3e186a,_0xbd41fc)=>{const _0x13926d=_0x2ef6da;return _0xbd41fc&&typeof _0xbd41fc===_0x13926d(0x270)&&_0xbd41fc['type']===ENEMY3_TYPE&&typeof _0xbd41fc[_0x13926d(0x195)]==='undefined'&&(_0xbd41fc[_0x13926d(0x195)]=![]),_0xbd41fc;});}catch(_0x3d7c86){console['error'](_0x2ef6da(0x216),_0x3d7c86),_0x49e3ce=[];}}else{if(_0x3a2336==='entrance_flight_1'){currentWavePatternIndex=0x0;const _0x1d147e=waveEntrancePatterns[0x0];if(!_0x1d147e||_0x1d147e[_0x2ef6da(0x18d)]===0x0)console[_0x2ef6da(0x20a)](_0x2ef6da(0x1e9)+_0x18ff60+_0x2ef6da(0x181)),_0x49e3ce=[];else try{_0x49e3ce=JSON[_0x2ef6da(0x23a)](JSON[_0x2ef6da(0x206)](_0x1d147e),(_0x3379bc,_0x1af99c)=>{const _0x564d07=_0x2ef6da;return _0x1af99c&&typeof _0x1af99c===_0x564d07(0x270)&&_0x1af99c['type']===ENEMY3_TYPE&&typeof _0x1af99c[_0x564d07(0x195)]==='undefined'&&(_0x1af99c[_0x564d07(0x195)]=![]),_0x1af99c;});}catch(_0x1cf115){console[_0x2ef6da(0x20a)](_0x2ef6da(0x1d3),_0x1cf115),_0x49e3ce=[];}}else{if(_0x3a2336===_0x2ef6da(0x222)){currentWavePatternIndex=0x1;const _0x247638=waveEntrancePatterns[0x1];if(!_0x247638||_0x247638[_0x2ef6da(0x18d)]===0x0)console[_0x2ef6da(0x20a)](_0x2ef6da(0x1e9)+_0x18ff60+_0x2ef6da(0x232)),_0x49e3ce=[];else try{_0x49e3ce=JSON[_0x2ef6da(0x23a)](JSON[_0x2ef6da(0x206)](_0x247638),(_0x7346e,_0x11f41c)=>{const _0x70e81d=_0x2ef6da;return _0x11f41c&&typeof _0x11f41c===_0x70e81d(0x270)&&_0x11f41c[_0x70e81d(0x278)]===ENEMY3_TYPE&&typeof _0x11f41c['hasCapturedShip']===_0x70e81d(0x1c9)&&(_0x11f41c['hasCapturedShip']=![]),_0x11f41c;});}catch(_0x2bc405){console[_0x2ef6da(0x20a)](_0x2ef6da(0x1f6),_0x2bc405),_0x49e3ce=[];}}else _0x49e3ce=[];}}}if(_0x3a2336!==_0x2ef6da(0x230)){if(typeof normalWaveEntrancePaths===_0x2ef6da(0x1c9)||Object['keys'](normalWaveEntrancePaths)[_0x2ef6da(0x18d)]===0x0)return console[_0x2ef6da(0x20a)](_0x2ef6da(0x213)+_0x18ff60+_0x2ef6da(0x1c7)),_0x49e3ce;for(let _0x261947=_0x49e3ce[_0x2ef6da(0x18d)]-0x1;_0x261947>=0x0;_0x261947--){const _0xe8606=_0x49e3ce[_0x261947];if(!normalWaveEntrancePaths?.[_0xe8606[_0x2ef6da(0x273)]]){console[_0x2ef6da(0x20f)](_0x2ef6da(0x1e9)+_0x18ff60+_0x2ef6da(0x1ff)+currentWavePatternIndex+_0x2ef6da(0x21d)+_0xe8606['pathId']+'\x22\x20does\x20not\x20exist\x20in\x20normalWaveEntrancePaths!\x20Removing\x20squadron.'),_0x49e3ce[_0x2ef6da(0x275)](_0x261947,0x1);continue;}if(_0xe8606[_0x2ef6da(0x26b)]&&Array[_0x2ef6da(0x227)](_0xe8606[_0x2ef6da(0x26b)])){for(let _0x5d28cd=_0xe8606[_0x2ef6da(0x26b)][_0x2ef6da(0x18d)]-0x1;_0x5d28cd>=0x0;_0x5d28cd--){const _0x399019=_0xe8606[_0x2ef6da(0x26b)][_0x5d28cd];(!_0x399019||!normalWaveEntrancePaths?.[_0x399019[_0x2ef6da(0x277)]])&&(console[_0x2ef6da(0x20f)](_0x2ef6da(0x1e9)+_0x18ff60+_0x2ef6da(0x1ff)+currentWavePatternIndex+_0x2ef6da(0x234)+_0xe8606['pathId']+':\x20Enemy\x20entrancePathId\x20\x22'+_0x399019?.['entrancePathId']+_0x2ef6da(0x26f)),_0xe8606[_0x2ef6da(0x26b)][_0x2ef6da(0x275)](_0x5d28cd,0x1)),_0x399019&&_0x399019[_0x2ef6da(0x278)]===ENEMY3_TYPE&&typeof _0x399019[_0x2ef6da(0x195)]===_0x2ef6da(0x1c9)&&(_0x399019[_0x2ef6da(0x195)]=![]);}_0xe8606[_0x2ef6da(0x26b)][_0x2ef6da(0x18d)]===0x0&&(console['warn'](_0x2ef6da(0x1e9)+_0x18ff60+_0x2ef6da(0x1ff)+currentWavePatternIndex+_0x2ef6da(0x1a9)+_0xe8606[_0x2ef6da(0x273)]+_0x2ef6da(0x27c)),_0x49e3ce[_0x2ef6da(0x275)](_0x261947,0x1));}else console['warn'](_0x2ef6da(0x1e9)+_0x18ff60+_0x2ef6da(0x1ff)+currentWavePatternIndex+_0x2ef6da(0x1a9)+_0xe8606[_0x2ef6da(0x273)]+_0x2ef6da(0x257)),_0x49e3ce['splice'](_0x261947,0x1);}}return _0x49e3ce;}function resetWave(){const _0x369c23=_0xca07;stopAllGameSounds(),isWaveTransitioning=![],isGridSoundPlaying=![],scoreEarnedThisCS=0x0,resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];const _0x33615f=player1Score,_0x2eb7f5=player2Score;_0x33615f<highScore&&(player1TriggeredHighScoreSound=![]);_0x2eb7f5<highScore&&(player2TriggeredHighScoreSound=![]);bullets=[],enemyBullets=[],enemies=[],explosions=[],gridMoveDirection=0x1,lastEnemyDetachTime=0x0,currentGridOffsetX=0x0,isEntrancePhaseActive=![],currentWaveDefinition=null,currentWavePatternIndex=-0x1,enemySpawnTimeouts[_0x369c23(0x19e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,hitSparks=[],isFullGridWave=![],isChallengingStage=![];try{const _0x5ab81a=getWaveType(level);isChallengingStage=_0x5ab81a===_0x369c23(0x230),isFullGridWave=_0x5ab81a==='full_grid',challengingStageEnemiesHit=0x0,isShowingIntro=!![],introDisplayStartTime=Date[_0x369c23(0x21f)]();if(isChallengingStage)isTwoPlayerMode?introStep=0x1:introStep=0x3;else{if(isFullGridWave){if(isTwoPlayerMode)introStep=0x1;else level===0x1?introStep=0x1:introStep=0x2;}else isTwoPlayerMode?introStep=0x1:introStep=0x2;}level===0x1&&currentPlayer===0x1&&playSound(startSound),gameCanvas?.[_0x369c23(0x1a8)]>0x0&&ship?(ship['y']=gameCanvas[_0x369c23(0x267)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,(!isManualControl||forceCenterShipNextReset)&&(isDualShipActive?ship['x']=gameCanvas['width']/0x2-ship[_0x369c23(0x1a8)]:ship['x']=gameCanvas[_0x369c23(0x1a8)]/0x2-ship[_0x369c23(0x1a8)]/0x2,ship[_0x369c23(0x22c)]=ship['x'],smoothedShipX=ship['x'],aiNeedsStabilization=!![])):console[_0x369c23(0x20f)](_0x369c23(0x1fc)),forceCenterShipNextReset=![];}catch(_0x2ebe40){console['error'](_0x369c23(0x1ac),_0x2ebe40),isWaveTransitioning=![],isGridSoundPlaying=![],isShowingIntro=![],introStep=0x0,isChallengingStage=![],isFullGridWave=![],resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,forceCenterShipNextReset=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],isTouching=![],touchCurrentX=0x0,touchStartX=0x0,isDraggingShip=![],shipTouchOffsetX=0x0,lastTapTime=0x0,touchJustFiredSingle=![],isTouchFiringActive=![];typeof enemySpawnTimeouts!==_0x369c23(0x1c9)&&Array[_0x369c23(0x227)](enemySpawnTimeouts)&&enemySpawnTimeouts['forEach'](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x369c23(0x1ef))showMenuState();}}function _0xca07(_0x3b5308,_0x24151b){const _0xc88d18=_0xc88d();return _0xca07=function(_0xca07ad,_0x357d78){_0xca07ad=_0xca07ad-0x17f;let _0x4f6f1e=_0xc88d18[_0xca07ad];return _0x4f6f1e;},_0xca07(_0x3b5308,_0x24151b);}const createBulletSimple=(_0x106f81,_0x12ff0f=null)=>{const _0x50089e=_0xca07;if(!_0x106f81||playerLives<=0x0||!isInGameState||!ship||isShipCaptured)return![];const _0x1be9ce=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x56a8fc=_0x12ff0f?_0x12ff0f['x']:_0x106f81['x']+_0x106f81['width']/0x2,_0x1714dd=_0x12ff0f?_0x12ff0f['y']:_0x106f81['y']+_0x106f81[_0x50089e(0x267)]/0x2;let _0x56f1b7=0x0,_0x44713f=_0x1be9ce;const _0xa83630=ship['x']+ship[_0x50089e(0x1a8)]/0x2-_0x56a8fc,_0x5d7ca2=ship['y']+ship[_0x50089e(0x267)]/0x2-_0x1714dd,_0x336a92=Math[_0x50089e(0x1db)](_0xa83630*_0xa83630+_0x5d7ca2*_0x5d7ca2);if(_0x336a92>0x0){let _0x4e61b1=0x0;!isChallengingStage&&(_0x4e61b1=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x599f49=Math[_0x50089e(0x272)](_0x5d7ca2,_0xa83630);return _0x56f1b7=Math[_0x50089e(0x1ca)](_0x599f49)*_0x1be9ce*_0x4e61b1,_0x44713f=Math[_0x50089e(0x1db)](_0x1be9ce**0x2-_0x56f1b7**0x2),_0x44713f=Math[_0x50089e(0x1d7)](_0x1be9ce*(0x1-_0x4e61b1)*0.5,_0x44713f),_0x5d7ca2<0x0&&(_0x44713f=Math[_0x50089e(0x20c)](_0x44713f)),enemyBullets[_0x50089e(0x238)]({'x':_0x56a8fc-ENEMY_BULLET_WIDTH/0x2,'y':_0x1714dd,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x56f1b7,'vy':_0x44713f,'type':_0x106f81[_0x50089e(0x278)]}),!![];}return![];};function scheduleSingleEntranceSquadron(_0x50253f,_0x151fe9,_0x92e65f){const _0x5e8b17=_0xca07;if(isFullGridWave||isChallengingStage){if(_0x50253f?.[_0x5e8b17(0x26b)]?.[_0x5e8b17(0x18d)]>0x0){enemiesSpawnedThisWave+=_0x50253f[_0x5e8b17(0x26b)][_0x5e8b17(0x18d)];if(squadronCompletionStatus[_0x151fe9])squadronCompletionStatus[_0x151fe9]['completed']=squadronCompletionStatus[_0x151fe9][_0x5e8b17(0x1d5)];}return![];}const _0x3888fc=normalWaveEntrancePaths,_0x564c85=_0x50253f[_0x5e8b17(0x273)],_0x519bf3=_0x3888fc[_0x564c85];if(!_0x519bf3||_0x519bf3[_0x5e8b17(0x18d)]===0x0){console[_0x5e8b17(0x20a)](_0x5e8b17(0x1ec)+level+_0x5e8b17(0x189)+_0x564c85+_0x5e8b17(0x219)+_0x151fe9+'\x20invalid\x20or\x20not\x20found\x20in\x20normalWaveEntrancePaths!\x20Skipping\x20squadron.');if(_0x50253f?.[_0x5e8b17(0x26b)]?.[_0x5e8b17(0x18d)]>0x0){enemiesSpawnedThisWave+=_0x50253f['enemies']['length'];if(squadronCompletionStatus[_0x151fe9])squadronCompletionStatus[_0x151fe9][_0x5e8b17(0x235)]=squadronCompletionStatus[_0x151fe9][_0x5e8b17(0x1d5)];}return![];}const _0x348b97=setTimeout(()=>{const _0x171ee4=_0x5e8b17,_0x223537=enemySpawnTimeouts['indexOf'](_0x348b97);if(_0x223537>-0x1)enemySpawnTimeouts[_0x171ee4(0x275)](_0x223537,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){if(_0x50253f?.[_0x171ee4(0x26b)]?.[_0x171ee4(0x18d)]>0x0){enemiesSpawnedThisWave+=_0x50253f[_0x171ee4(0x26b)][_0x171ee4(0x18d)];if(squadronCompletionStatus[_0x151fe9])squadronCompletionStatus[_0x151fe9]['completed']=squadronCompletionStatus[_0x151fe9][_0x171ee4(0x1d5)];}return;}try{!squadronEntranceFiringStatus[_0x151fe9]&&(squadronEntranceFiringStatus[_0x151fe9]={});squadronEntranceFiringStatus[_0x151fe9]['scheduledStartTime']=Date[_0x171ee4(0x21f)]()+_0x92e65f,squadronEntranceFiringStatus[_0x151fe9]['hasFired']=![],squadronEntranceFiringStatus[_0x151fe9]['firstEnemyId']=null;const _0x35b88b=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x2c6e05=_0x35b88b*0x2,_0x3c9c5a=0x1;let _0x13d348=0x0;_0x50253f['enemies'][_0x171ee4(0x19e)]((_0xc7e5fd,_0x346f6b)=>{const _0x38a15c=_0x171ee4;_0x13d348++;if(!_0xc7e5fd||!_0xc7e5fd['type']||typeof _0xc7e5fd['gridRow']===_0x38a15c(0x1c9)||typeof _0xc7e5fd[_0x38a15c(0x1c1)]===_0x38a15c(0x1c9)||!_0xc7e5fd[_0x38a15c(0x277)]){console[_0x38a15c(0x20a)](_0x38a15c(0x262)+_0x151fe9+_0x38a15c(0x207)+_0x564c85+_0x38a15c(0x186)+_0x346f6b+_0x38a15c(0x1a2)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x151fe9]&&squadronCompletionStatus[_0x151fe9][_0x38a15c(0x235)]++;return;}const _0xddd117=_0xc7e5fd['entrancePathId'],_0x526e39=_0x3888fc[_0xddd117];if(!_0x526e39||_0x526e39[_0x38a15c(0x18d)]===0x0){}const _0x2ae21f=_0x526e39&&_0x526e39[_0x38a15c(0x18d)]>0x0?_0x526e39:_0x519bf3,_0xa1fca6=_0x526e39&&_0x526e39[_0x38a15c(0x18d)]>0x0?_0xddd117:_0x564c85;let _0x35990d=0x0;const _0x181e8d=getWaveType(level),_0x5d6cfe=_0x181e8d===_0x38a15c(0x222)&&(_0x151fe9===0x2||_0x151fe9===0x3);if(_0x5d6cfe){const _0x19397c=Math[_0x38a15c(0x21b)](_0x346f6b/0x2);_0x346f6b%0x2===0x0?_0x35990d=_0x19397c*_0x2c6e05:_0x35990d=_0x19397c*_0x2c6e05+_0x3c9c5a;}else _0x35990d=_0x346f6b*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x1cd205=setTimeout(()=>{const _0x1dfb77=_0x38a15c,_0x15ba0f=enemySpawnTimeouts[_0x1dfb77(0x26e)](_0x1cd205);if(_0x15ba0f>-0x1)enemySpawnTimeouts['splice'](_0x15ba0f,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x151fe9]&&squadronCompletionStatus[_0x151fe9]['completed']++;return;}try{let _0x2e8c75=_0xc7e5fd['type'],_0x3d81d6=_0x2e8c75===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x5a6409,_0x95bc5;if(_0x2e8c75===ENEMY1_TYPE)_0x5a6409=ENEMY1_WIDTH,_0x95bc5=ENEMY1_HEIGHT;else _0x2e8c75===ENEMY3_TYPE?(_0x5a6409=BOSS_WIDTH,_0x95bc5=BOSS_HEIGHT):(_0x5a6409=ENEMY_WIDTH,_0x95bc5=ENEMY_HEIGHT);let _0x14d60b=0x0,_0x403f38=0x0;if(_0x2ae21f&&_0x2ae21f[0x0]?.['p0'])_0x14d60b=_0x2ae21f[0x0]['p0']['x'],_0x403f38=_0x2ae21f[0x0]['p0']['y'];else{console['error'](_0x1dfb77(0x1bd)+_0xa1fca6+_0x1dfb77(0x183)+_0x151fe9+',\x20Enemy\x20'+_0x346f6b+_0x1dfb77(0x22d));throw new Error(_0x1dfb77(0x1bd)+_0xa1fca6);}let _0x4b1a00,_0x4c10cd;try{const {x:_0x37cbc6,y:_0x39859f}=getCurrentGridSlotPosition(_0xc7e5fd[_0x1dfb77(0x214)],_0xc7e5fd['gridCol'],_0x5a6409);_0x4b1a00=_0x37cbc6,_0x4c10cd=_0x39859f;}catch(_0x88e4d8){console[_0x1dfb77(0x20a)](_0x1dfb77(0x1e8)+_0xc7e5fd[_0x1dfb77(0x278)]+_0x1dfb77(0x1aa)+_0xc7e5fd[_0x1dfb77(0x214)]+','+_0xc7e5fd[_0x1dfb77(0x1c1)]+']',_0x88e4d8),_0x4b1a00=gameCanvas?.['width']/0x2||0xc8,_0x4c10cd=ENEMY_TOP_MARGIN+_0xc7e5fd[_0x1dfb77(0x214)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x2da0c4=0x0;const _0x5c8fec=_0x5d6cfe,_0x3b4671=_0x5c8fec&&_0x346f6b%0x2!==0x0;_0x3b4671?_0x2da0c4=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x2da0c4=-_0x346f6b*PATH_T_OFFSET_PER_ENEMY;const _0x579033={'x':_0x14d60b,'y':_0x403f38,'width':_0x5a6409,'height':_0x95bc5,'targetGridX':_0x4b1a00,'targetGridY':_0x4c10cd,'speed':0x0,'state':_0x1dfb77(0x1fa),'gridRow':_0xc7e5fd[_0x1dfb77(0x214)],'gridCol':_0xc7e5fd[_0x1dfb77(0x1c1)],'type':_0x2e8c75,'health':_0x3d81d6,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0xa1fca6,'pathSegmentIndex':0x0,'pathT':_0x2da0c4,'squadronId':_0x151fe9,'squadronEnemyIndex':_0x346f6b,'id':_0x1dfb77(0x18b)+_0x151fe9+'-'+_0x346f6b+'-'+Date['now']()+'-'+Math[_0x1dfb77(0x21a)]()[_0x1dfb77(0x1b0)](0x24)[_0x1dfb77(0x18a)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x2e8c75===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x2e8c75===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x1dfb77(0x238)](_0x579033),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x151fe9]&&squadronCompletionStatus[_0x151fe9][_0x1dfb77(0x235)]++,_0x346f6b===0x0&&(squadronEntranceFiringStatus[_0x151fe9]&&(squadronEntranceFiringStatus[_0x151fe9][_0x1dfb77(0x25b)]=_0x579033['id']));}catch(_0x510e5e){console[_0x1dfb77(0x20a)]('Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20'+_0x151fe9+_0x1dfb77(0x242)+_0x346f6b+',\x20Path\x20'+_0x564c85+'):',_0x510e5e),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x151fe9]&&squadronCompletionStatus[_0x151fe9]['completed']++;}},_0x35990d);enemySpawnTimeouts[_0x38a15c(0x238)](_0x1cd205);});const _0x5a84d7=setTimeout(()=>{const _0x147315=_0x171ee4,_0x2e2bc4=enemySpawnTimeouts[_0x147315(0x26e)](_0x5a84d7);if(_0x2e2bc4>-0x1)enemySpawnTimeouts[_0x147315(0x275)](_0x2e2bc4,0x1);const _0x2b4ed4=squadronEntranceFiringStatus[_0x151fe9],_0x4481bd=_0x2b4ed4?_0x2b4ed4['firstEnemyId']:null;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||isFullGridWave||!_0x4481bd)return;const _0x3b00fa=enemies[_0x147315(0x26d)](_0x11c96c=>_0x11c96c&&_0x11c96c['id']===_0x4481bd);_0x3b00fa&&((_0x3b00fa[_0x147315(0x1dc)]==='following_entrance_path'||_0x3b00fa['state']==='moving_to_grid'||_0x3b00fa[_0x147315(0x1dc)]===_0x147315(0x23d))&&fireFixedEnemyBurst(_0x4481bd,null,0x0,0x3));},ENTRANCE_SQUADRON_FIRE_DELAY_MS);enemySpawnTimeouts[_0x171ee4(0x238)](_0x5a84d7);}catch(_0x153afd){console[_0x171ee4(0x20a)](_0x171ee4(0x229)+_0x151fe9+_0x171ee4(0x207)+_0x564c85+'):',_0x153afd),_0x50253f?.['enemies']?.['length']>0x0&&(enemiesSpawnedThisWave+=_0x50253f[_0x171ee4(0x26b)][_0x171ee4(0x18d)],squadronCompletionStatus[_0x151fe9]&&(squadronCompletionStatus[_0x151fe9][_0x171ee4(0x235)]=squadronCompletionStatus[_0x151fe9][_0x171ee4(0x1d5)]));}},_0x92e65f);return enemySpawnTimeouts['push'](_0x348b97),!![];};function startChallengingStageSequence(){const _0x4d20d9=_0xca07;isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object[_0x4d20d9(0x199)](challengingStagePaths)['length']===0x0&&defineChallengingStagePaths();if(Object['keys'](challengingStagePaths)['length']===0x0){console[_0x4d20d9(0x20a)]('CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!'),isWaveTransitioning=!![],setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x25bfdc=['CS3_DiveLoopL_Sharp',_0x4d20d9(0x1b7),_0x4d20d9(0x1c6),'CS_HorizontalFlyByR'],_0x660228=[_0x4d20d9(0x221),'CS_LoopAttack_TR','CS_LoopAttack_BL',_0x4d20d9(0x1b3)],_0x5087ee=[..._0x25bfdc,..._0x660228];for(const _0xb1c4bf of _0x5087ee){if(!challengingStagePaths[_0x4d20d9(0x19f)](_0xb1c4bf)){console['error'](_0x4d20d9(0x27d)+_0xb1c4bf+_0x4d20d9(0x24e)),isWaveTransitioning=!![],setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x1e79f7=[..._0x25bfdc],_0x1cbe75=[..._0x660228][_0x4d20d9(0x192)](()=>Math[_0x4d20d9(0x21a)]()-0.5);_0x1e79f7[_0x4d20d9(0x238)](..._0x1cbe75),currentWaveDefinition=[];for(let _0x30c26c=0x0;_0x30c26c<CHALLENGING_STAGE_SQUADRON_COUNT;_0x30c26c++){const _0x2b952=_0x1e79f7[_0x30c26c%_0x1e79f7[_0x4d20d9(0x18d)]],_0x55e558={'pathId':_0x2b952,'enemies':[]};for(let _0x58e892=0x0;_0x58e892<CHALLENGING_STAGE_SQUADRON_SIZE;_0x58e892++){let _0xb8222d=_0x58e892<Math[_0x4d20d9(0x21b)](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x55e558['enemies'][_0x4d20d9(0x238)]({'type':_0xb8222d,'entrancePathId':_0x2b952});}currentWaveDefinition[_0x4d20d9(0x238)](_0x55e558);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x4d20d9(0x18d)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x2c2d31=0x0;const _0x1bb927=-0x1c,_0x11f4c0=Math[_0x4d20d9(0x21b)](Math[_0x4d20d9(0x1d7)](0x0,level-0x3)/0x4)+0x1,_0x131318=scaleValue(_0x11f4c0,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x4d20d9(0x19e)]((_0x232729,_0x394432)=>{let _0x119472=0x0;if(_0x394432<=0x1)_0x119472=0x0;else _0x394432<=0x3?_0x119472=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x119472=(_0x394432-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x28d59b=_0x131318;(_0x394432===0x2||_0x394432===0x3)&&(_0x28d59b*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x14afbd=setTimeout(()=>{const _0x597448=_0xca07,_0x3c9847=enemySpawnTimeouts['indexOf'](_0x14afbd);if(_0x3c9847>-0x1)enemySpawnTimeouts[_0x597448(0x275)](_0x3c9847,0x1);if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&playerLives>0x0)try{const _0x104baf=_0x232729['pathId'],_0x3d1f09=challengingStagePaths,_0x2ba6e0=_0x3d1f09[_0x104baf];if(!_0x2ba6e0||_0x2ba6e0[_0x597448(0x18d)]===0x0){console[_0x597448(0x20a)]('CS:\x20Path\x20'+_0x104baf+_0x597448(0x219)+_0x394432+_0x597448(0x1b4)),enemiesSpawnedThisWave+=_0x232729[_0x597448(0x26b)][_0x597448(0x18d)];return;}let _0x36bb5e=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x394432>=0x2&&_0x394432<=0x3)_0x36bb5e=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x394432>=0x4&&(_0x36bb5e=CS_LOOP_ATTACK_SPAWN_DELAY);let _0x1c3483=0x0;_0x232729['enemies'][_0x597448(0x19e)]((_0x3245a2,_0x286a9d)=>{const _0xc66007=_0x597448;_0x1c3483++;if(!_0x3245a2||!_0x3245a2[_0xc66007(0x278)]){console[_0xc66007(0x20a)](_0xc66007(0x191)+_0x394432+_0xc66007(0x1f7)+_0x286a9d+_0xc66007(0x1a2)),enemiesSpawnedThisWave++;return;}const _0x5ebb53=_0x286a9d*_0x36bb5e,_0x2b8d77=setTimeout(()=>{const _0x1449af=_0xc66007,_0x51d196=enemySpawnTimeouts[_0x1449af(0x26e)](_0x2b8d77);if(_0x51d196>-0x1)enemySpawnTimeouts['splice'](_0x51d196,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||playerLives<=0x0){enemiesSpawnedThisWave++;return;}try{let _0x23731d=_0x3245a2[_0x1449af(0x278)],_0x3d28d2=_0x23731d===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x5901a6,_0xde93d3;if(_0x23731d===ENEMY1_TYPE)_0x5901a6=ENEMY1_WIDTH,_0xde93d3=ENEMY1_HEIGHT;else _0x23731d===ENEMY3_TYPE?(_0x5901a6=BOSS_WIDTH,_0xde93d3=BOSS_HEIGHT):(_0x5901a6=ENEMY_WIDTH,_0xde93d3=ENEMY_HEIGHT);let _0x452447=0x0,_0x2a5183=0x0;if(_0x2ba6e0[0x0]?.['p0'])_0x452447=_0x2ba6e0[0x0]['p0']['x'],_0x2a5183=_0x2ba6e0[0x0]['p0']['y'];else throw new Error(_0x1449af(0x19d)+_0x104baf);(_0x394432===0x0||_0x394432===0x1)&&(_0x452447+=_0x1bb927);const _0x4bb874=-_0x286a9d*PATH_T_OFFSET_PER_ENEMY,_0x35f9d6={'x':_0x452447,'y':_0x2a5183,'width':_0x5901a6,'height':_0xde93d3,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x1449af(0x1a5),'gridRow':-0x1,'gridCol':-0x1,'type':_0x23731d,'health':_0x3d28d2,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x104baf,'pathSegmentIndex':0x0,'pathT':_0x4bb874,'squadronId':_0x394432,'id':'enemy-cs-'+_0x394432+'-'+_0x286a9d+'-'+Date[_0x1449af(0x21f)]()+'-'+Math[_0x1449af(0x21a)]()[_0x1449af(0x1b0)](0x24)[_0x1449af(0x18a)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x1449af(0x1b1),'hasCapturedShip':_0x23731d===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x23731d===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x28d59b};enemies[_0x1449af(0x238)](_0x35f9d6),enemiesSpawnedThisWave++;}catch(_0x50a574){console[_0x1449af(0x20a)](_0x1449af(0x21c)+_0x394432+_0x1449af(0x242)+_0x286a9d+_0x1449af(0x1bf)+_0x104baf+'):',_0x50a574),enemiesSpawnedThisWave++;}},_0x5ebb53);enemySpawnTimeouts['push'](_0x2b8d77),_0x2c2d31++;});}catch(_0x428e70){console[_0x597448(0x20a)](_0x597448(0x244)+_0x394432+':',_0x428e70),enemiesSpawnedThisWave+=_0x232729['enemies'][_0x597448(0x18d)];}else _0x232729?.['enemies']?.[_0x597448(0x18d)]>0x0&&(enemiesSpawnedThisWave+=_0x232729[_0x597448(0x26b)][_0x597448(0x18d)]);},_0x119472);enemySpawnTimeouts['push'](_0x14afbd);});}else console[_0x4d20d9(0x20f)](_0x4d20d9(0x261)),isWaveTransitioning=!![],setTimeout(()=>{const _0x1aa4b6=_0x4d20d9;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x1aa4b6(0x1ef)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x29425c,_0x394580,_0x1d13dc){const _0x23b43a=_0xca07;if(!_0x29425c||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x331f07=Math[_0x23b43a(0x1ba)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x4d7b28=0x0;_0x4d7b28<_0x331f07;_0x4d7b28++){const _0x53d121=_0x1d13dc+_0x4d7b28*ENTRANCE_FIRE_BURST_DELAY_MS,_0x1df12b=setTimeout(()=>{const _0x2b4b24=_0x23b43a;try{const _0x43f77f=enemySpawnTimeouts[_0x2b4b24(0x26e)](_0x1df12b);_0x43f77f>-0x1&&enemySpawnTimeouts['splice'](_0x43f77f,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x292cd1=enemies['find'](_0x2a9472=>_0x2a9472&&_0x2a9472['id']===_0x29425c);_0x292cd1&&_0x292cd1['state']===_0x394580&&(createBulletSimple(_0x292cd1)&&(_0x4d7b28===0x0&&playSound(enemyShootSound),_0x292cd1[_0x2b4b24(0x269)]=Date[_0x2b4b24(0x21f)]()));}catch(_0x4a845f){console['error']('Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x4d7b28+0x1)+'/'+_0x331f07+_0x2b4b24(0x1e6)+_0x29425c+':',_0x4a845f);}},_0x53d121);enemySpawnTimeouts[_0x23b43a(0x238)](_0x1df12b);}}function fireFixedEnemyBurst(_0x347ada,_0x5a8012,_0x360127,_0x54530b){if(!_0x347ada||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||_0x54530b<=0x0)return;for(let _0x31145a=0x0;_0x31145a<_0x54530b;_0x31145a++){const _0x5013ef=_0x360127+_0x31145a*ENTRANCE_FIRE_BURST_DELAY_MS,_0x4d63c0=setTimeout(()=>{const _0x7c7a1a=_0xca07;try{const _0x289527=enemySpawnTimeouts[_0x7c7a1a(0x26e)](_0x4d63c0);_0x289527>-0x1&&enemySpawnTimeouts['splice'](_0x289527,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x445e43=enemies[_0x7c7a1a(0x26d)](_0x2cd5a9=>_0x2cd5a9&&_0x2cd5a9['id']===_0x347ada);_0x445e43&&((_0x5a8012===null||_0x445e43['state']===_0x5a8012)&&(createBulletSimple(_0x445e43)&&(_0x31145a===0x0&&playSound(enemyShootSound),_0x445e43[_0x7c7a1a(0x269)]=Date[_0x7c7a1a(0x21f)]())));}catch(_0xb77d87){console[_0x7c7a1a(0x20a)](_0x7c7a1a(0x1de)+(_0x31145a+0x1)+'/'+_0x54530b+_0x7c7a1a(0x1e6)+_0x347ada+':',_0xb77d87);}},_0x5013ef);enemySpawnTimeouts['push'](_0x4d63c0);}}function startFullGridWave(){const _0x284754=_0xca07;if(!currentWaveDefinition||currentWaveDefinition['length']===0x0||!isFullGridWave){console[_0x284754(0x20a)](_0x284754(0x236)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts[_0x284754(0x19e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x456314=0x0;currentWaveDefinition['forEach']((_0x190510,_0x553e90)=>{const _0x534fc1=_0x284754;let _0x4b11d1=0x0;_0x190510&&_0x190510[_0x534fc1(0x26b)]&&Array['isArray'](_0x190510['enemies'])?(_0x4b11d1=_0x190510[_0x534fc1(0x26b)]['length'],_0x190510[_0x534fc1(0x26b)][_0x534fc1(0x19e)]((_0x9c9784,_0x2dfca3)=>{const _0xd52ca9=_0x534fc1;try{if(!_0x9c9784||!_0x9c9784[_0xd52ca9(0x278)]||typeof _0x9c9784[_0xd52ca9(0x214)]==='undefined'||typeof _0x9c9784[_0xd52ca9(0x1c1)]===_0xd52ca9(0x1c9)){console['error'](_0xd52ca9(0x204)+_0x553e90+_0xd52ca9(0x1f7)+_0x2dfca3+_0xd52ca9(0x1a2));return;}let _0xd0aa74=_0x9c9784[_0xd52ca9(0x278)],_0x5df9e4=_0xd0aa74===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x4043db,_0x4bfe64;if(_0xd0aa74===ENEMY1_TYPE)_0x4043db=ENEMY1_WIDTH,_0x4bfe64=ENEMY1_HEIGHT;else _0xd0aa74===ENEMY3_TYPE?(_0x4043db=BOSS_WIDTH,_0x4bfe64=BOSS_HEIGHT):(_0x4043db=ENEMY_WIDTH,_0x4bfe64=ENEMY_HEIGHT);let _0x29406f,_0x5efa73;try{const {x:_0x39cb32,y:_0x9b6bb}=getCurrentGridSlotPosition(_0x9c9784[_0xd52ca9(0x214)],_0x9c9784['gridCol'],_0x4043db);_0x29406f=_0x39cb32,_0x5efa73=_0x9b6bb;}catch(_0x3cfe0a){console['error'](_0xd52ca9(0x24b)+_0x9c9784[_0xd52ca9(0x278)]+'\x20at\x20['+_0x9c9784['gridRow']+','+_0x9c9784[_0xd52ca9(0x1c1)]+']',_0x3cfe0a),_0x29406f=gameCanvas?.[_0xd52ca9(0x1a8)]/0x2||0xc8,_0x5efa73=ENEMY_TOP_MARGIN+_0x9c9784[_0xd52ca9(0x214)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x2c55c7={'x':_0x29406f,'y':_0x5efa73,'width':_0x4043db,'height':_0x4bfe64,'targetGridX':_0x29406f,'targetGridY':_0x5efa73,'speed':0x0,'state':_0xd52ca9(0x23d),'gridRow':_0x9c9784[_0xd52ca9(0x214)],'gridCol':_0x9c9784[_0xd52ca9(0x1c1)],'type':_0xd0aa74,'health':_0x5df9e4,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x553e90,'squadronEnemyIndex':_0x2dfca3,'id':_0xd52ca9(0x25c)+_0x553e90+'-'+_0x2dfca3+'-'+Date[_0xd52ca9(0x21f)]()+'-'+Math[_0xd52ca9(0x21a)]()[_0xd52ca9(0x1b0)](0x24)[_0xd52ca9(0x18a)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0xd52ca9(0x1b1),'hasCapturedShip':_0xd0aa74===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0xd0aa74===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x2c55c7),_0x456314++;}catch(_0x204412){console[_0xd52ca9(0x20a)](_0xd52ca9(0x22f)+_0x553e90+_0xd52ca9(0x242)+_0x2dfca3+'):',_0x204412);}})):console[_0x534fc1(0x20f)]('Full\x20Grid:\x20Squadron\x20'+_0x553e90+_0x534fc1(0x1dd)),squadronCompletionStatus[_0x553e90]={'completed':_0x4b11d1,'total':_0x4b11d1};}),totalEnemiesScheduledForWave=_0x456314,enemiesSpawnedThisWave=_0x456314,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date[_0x284754(0x21f)](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x284754(0x21f)](),firstEnemyLanded=!![];}function scheduleEntranceFlightWave(){const _0x201c80=_0xca07;if(isFullGridWave||isChallengingStage){console[_0x201c80(0x20f)](_0x201c80(0x23b)+level+_0x201c80(0x210)+isFullGridWave+_0x201c80(0x1cc)+isChallengingStage+').\x20Skipping.'),isEntrancePhaseActive=![];return;}if(!currentWaveDefinition||currentWaveDefinition[_0x201c80(0x18d)]===0x0){console[_0x201c80(0x20f)](_0x201c80(0x253)),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}const _0x2a22d5=normalWaveEntrancePaths;if(Object[_0x201c80(0x199)](_0x2a22d5)[_0x201c80(0x18d)]===0x0){console[_0x201c80(0x20a)]('CRITICAL:\x20Failed\x20to\x20define\x20Normal\x20Wave\x20entrance\x20paths!'),isEntrancePhaseActive=![],isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x201c80(0x19e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,currentWaveDefinition[_0x201c80(0x19e)](_0x2f65b3=>totalEnemiesScheduledForWave+=_0x2f65b3['enemies']['length']),enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isEntrancePhaseActive=!![],currentWaveDefinition[_0x201c80(0x19e)]((_0x43d6d9,_0x3ecbbe)=>{const _0x5c5430=_0x201c80;squadronCompletionStatus[_0x3ecbbe]={'completed':0x0,'total':_0x43d6d9[_0x5c5430(0x26b)]?.['length']||0x0,'hasFiredPostLanding':![]};const _0x5aad85=scaleValue(level,NORMAL_WAVE_SQUADRON_INTERVAL,MIN_NORMAL_WAVE_SQUADRON_INTERVAL),_0x5a74e0=_0x3ecbbe*_0x5aad85;squadronEntranceFiringStatus[_0x3ecbbe]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x43d6d9,_0x3ecbbe,_0x5a74e0);});}function checkAndScheduleNextSquadron(_0xab9273){}function resetJustReturnedFlags(_0x177180){const _0x19f465=_0xca07;enemies[_0x19f465(0x19e)](_0x653b4d=>{const _0x1ddc7a=_0x19f465;let _0x1ad2aa=![];if(_0x177180 instanceof Set)_0x1ad2aa=_0x177180[_0x1ddc7a(0x27b)](_0x653b4d['id']);else typeof _0x177180===_0x1ddc7a(0x220)&&(_0x1ad2aa=_0x653b4d['id']===_0x177180);_0x653b4d&&_0x653b4d[_0x1ddc7a(0x1dc)]===_0x1ddc7a(0x23d)&&_0x653b4d[_0x1ddc7a(0x1fb)]&&!_0x1ad2aa&&(_0x653b4d[_0x1ddc7a(0x1fb)]=![]);});}function generateAttackPath(_0x3666d3){const _0xab7406=_0xca07;try{if(!_0x3666d3||!gameCanvas)return[];const _0x964e4=_0x3666d3[_0xab7406(0x278)]===ENEMY3_TYPE?BOSS_WIDTH:_0x3666d3[_0xab7406(0x278)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x28934d=_0x3666d3[_0xab7406(0x278)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x3666d3['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x390add=_0x964e4*0.5,_0x11d64b=gameCanvas['width'],_0x5f55c3=gameCanvas['height'];let _0x52b9b7=[];const _0x15791f={'x':_0x3666d3['x'],'y':_0x3666d3['y']},_0x3f8f4b=Math[_0xab7406(0x1bb)](_0x5f55c3*0.06,_0x28934d*1.8),_0xb9de42=Math[_0xab7406(0x1bb)](_0x11d64b*0.04,_0x964e4*1.2),_0xb3daa9=_0x3666d3['x']+_0x964e4/0x2<_0x11d64b/0x2?0x1:-0x1,_0x137c47={'x':_0x15791f['x']-_0xb3daa9*_0xb9de42*0.6,'y':_0x15791f['y']-_0x3f8f4b};_0x137c47['x']=Math['max'](_0x390add,Math[_0xab7406(0x1bb)](_0x11d64b-_0x390add-_0x964e4,_0x137c47['x'])),_0x137c47['y']=Math[_0xab7406(0x1d7)](_0x390add,_0x137c47['y']);const _0x407f9b={'x':_0x15791f['x']+_0xb3daa9*_0xb9de42*0.1,'y':_0x15791f['y']-_0x3f8f4b*1.4},_0x1b029a={'x':_0x137c47['x']+_0xb3daa9*_0xb9de42*0.3,'y':_0x15791f['y']-_0x3f8f4b*1.5},_0x5ad46c={'p0':_0x15791f,'p1':_0x407f9b,'p2':_0x1b029a,'p3':_0x137c47};_0x52b9b7[_0xab7406(0x238)](_0x5ad46c);const _0x28096a=_0x137c47,_0x423771=_0x5f55c3*0.45,_0x56b1f5=_0x11d64b*0.22,_0x27a9ea=_0x5f55c3*0.28,_0x4b097d=0.5,_0x50da9d=0.6,_0x42b5ba=_0x5f55c3*0.85,_0x590d14=Math[_0xab7406(0x21b)](Math['random']()*0x3);let _0x37c515=[];if(_0x590d14===0x0){const _0x16d3d4=_0x423771+Math['random']()*_0x5f55c3*0.1,_0x41cef3=_0x56b1f5+Math['random']()*_0x11d64b*0.08,_0x45918c=_0x27a9ea+Math[_0xab7406(0x21a)]()*_0x5f55c3*0.08,_0x220a04=_0x28096a['x']+_0xb3daa9*_0x41cef3*0.5,_0x55fb59=Math[_0xab7406(0x1bb)](_0x42b5ba,_0x28096a['y']+_0x16d3d4),_0x43e4ee=_0x220a04+_0xb3daa9*_0x41cef3*0.5,_0x17ad62=Math['max'](_0x28096a['y']+0x14,_0x55fb59-_0x45918c),_0x375d5e=_0x43e4ee-_0xb3daa9*_0x41cef3*0.9,_0x22e8e7=Math[_0xab7406(0x1d7)](_0x28096a['y']+0x28,_0x17ad62+_0x45918c*0.6),_0x2c43af=_0x375d5e-_0xb3daa9*_0x41cef3*0.3,_0x32d25d=_0x5f55c3+_0x28934d*0x2,_0x4ae7ac=Math[_0xab7406(0x1d7)](_0x390add,Math['min'](_0x11d64b-_0x390add-_0x964e4,_0x220a04)),_0x4cf736=Math[_0xab7406(0x1d7)](_0x390add,Math[_0xab7406(0x1bb)](_0x11d64b-_0x390add-_0x964e4,_0x43e4ee)),_0x4abe03=Math[_0xab7406(0x1d7)](_0x390add,Math[_0xab7406(0x1bb)](_0x11d64b-_0x390add-_0x964e4,_0x375d5e)),_0x55355d={'x':_0x28096a['x'],'y':_0x28096a['y']+_0x16d3d4*_0x50da9d*0.5},_0x17abe5={'x':_0x4ae7ac-_0xb3daa9*_0x41cef3*_0x4b097d,'y':_0x55fb59},_0x17eaa0={'x':_0x4ae7ac,'y':_0x55fb59},_0x5631a8={'x':_0x4ae7ac+_0xb3daa9*_0x41cef3*_0x4b097d,'y':_0x55fb59},_0x52eebd={'x':_0x4cf736,'y':_0x17ad62+_0x45918c*_0x50da9d},_0x24f5db={'x':_0x4cf736,'y':_0x17ad62},_0x196e87={'x':_0x4cf736,'y':_0x17ad62-_0x45918c*_0x50da9d*0.5},_0xf24c34={'x':_0x4abe03+_0xb3daa9*_0x41cef3*_0x4b097d,'y':_0x22e8e7},_0x39f19e={'x':_0x4abe03,'y':_0x22e8e7},_0x12c98e={'x':_0x39f19e['x'],'y':_0x39f19e['y']+_0x5f55c3*0.1},_0x2d5233={'x':_0x2c43af,'y':_0x32d25d-_0x5f55c3*0.2},_0x23b610={'x':_0x2c43af,'y':_0x32d25d};_0x37c515=[{'p0':_0x28096a,'p1':_0x55355d,'p2':_0x17abe5,'p3':_0x17eaa0},{'p0':_0x17eaa0,'p1':_0x5631a8,'p2':_0x52eebd,'p3':_0x24f5db},{'p0':_0x24f5db,'p1':_0x196e87,'p2':_0xf24c34,'p3':_0x39f19e},{'p0':_0x39f19e,'p1':_0x12c98e,'p2':_0x2d5233,'p3':_0x23b610}];}else{if(_0x590d14===0x1){const _0x1d68d9=_0x423771*0.8+Math[_0xab7406(0x21a)]()*_0x5f55c3*0.1,_0x3051af=_0x56b1f5*1.2+Math[_0xab7406(0x21a)]()*_0x11d64b*0.1,_0x464bb4=_0x27a9ea*0.7+Math[_0xab7406(0x21a)]()*_0x5f55c3*0.1,_0x226959=_0x28096a['x']+_0xb3daa9*_0x3051af*0.4,_0x1f1299=Math[_0xab7406(0x1bb)](_0x42b5ba-_0x464bb4*0.5,_0x28096a['y']+_0x1d68d9*0.6),_0x5e6cc0=_0x226959+_0xb3daa9*_0x3051af*0.6,_0x169bc8=Math['min'](_0x42b5ba,_0x1f1299+_0x464bb4),_0x4e1d78=_0x5e6cc0-_0xb3daa9*_0x3051af*0.5,_0x2eea61=_0x5f55c3+_0x28934d*0x2,_0x120c60=Math[_0xab7406(0x1d7)](_0x390add,Math['min'](_0x11d64b-_0x390add-_0x964e4,_0x226959)),_0x9a959f=Math[_0xab7406(0x1d7)](_0x390add,Math[_0xab7406(0x1bb)](_0x11d64b-_0x390add-_0x964e4,_0x5e6cc0)),_0x11a74a={'x':_0x28096a['x']-_0xb3daa9*_0x3051af*0.1,'y':_0x28096a['y']+_0x1d68d9*0.3},_0x21ae6f={'x':_0x120c60-_0xb3daa9*_0x3051af*_0x4b097d*0.8,'y':_0x1f1299+_0x464bb4*_0x50da9d*0.4},_0x34c4a5={'x':_0x120c60,'y':_0x1f1299},_0x9c5db5={'x':_0x120c60+_0xb3daa9*_0x3051af*_0x4b097d*0.8,'y':_0x1f1299-_0x464bb4*_0x50da9d*0.4},_0x3d32cd={'x':_0x9a959f+_0xb3daa9*_0x3051af*_0x4b097d*0.6,'y':_0x169bc8+_0x464bb4*_0x50da9d*0.5},_0x49c536={'x':_0x9a959f,'y':_0x169bc8},_0x32de1c={'x':_0x9a959f-_0xb3daa9*_0x3051af*0.2,'y':_0x169bc8+_0x5f55c3*0.1},_0x235234={'x':_0x4e1d78,'y':_0x2eea61-_0x5f55c3*0.3},_0x4c657e={'x':_0x4e1d78,'y':_0x2eea61};_0x37c515=[{'p0':_0x28096a,'p1':_0x11a74a,'p2':_0x21ae6f,'p3':_0x34c4a5},{'p0':_0x34c4a5,'p1':_0x9c5db5,'p2':_0x3d32cd,'p3':_0x49c536},{'p0':_0x49c536,'p1':_0x32de1c,'p2':_0x235234,'p3':_0x4c657e}];}else{const _0x90e0fe=_0x423771*0.6+Math[_0xab7406(0x21a)]()*_0x5f55c3*0.05,_0x4066de=_0x56b1f5*0.7+Math['random']()*_0x11d64b*0.05,_0x517c03=_0x27a9ea*0.6+Math[_0xab7406(0x21a)]()*_0x5f55c3*0.05,_0x432fcf=_0x517c03*1.5,_0x1468ff=_0x28096a['x']+_0xb3daa9*_0x4066de*0.5,_0x1a319e=Math['min'](_0x42b5ba-_0x432fcf,_0x28096a['y']+_0x90e0fe),_0x3c09be=_0x1468ff+_0xb3daa9*_0x4066de*0.5,_0x183893=_0x1a319e+_0x517c03,_0x47c3f6=_0x3c09be-_0xb3daa9*_0x4066de*0.8,_0x917162=Math[_0xab7406(0x1bb)](_0x42b5ba,_0x183893+_0x432fcf*0.7),_0x4f53bf=_0x47c3f6+_0xb3daa9*_0x4066de*0.4,_0xba94f1=_0x917162+_0x517c03*0.8,_0x236a7c=_0x4f53bf,_0x53224b=_0x5f55c3+_0x28934d*0x2,_0x38d3ba=Math[_0xab7406(0x1d7)](_0x390add,Math[_0xab7406(0x1bb)](_0x11d64b-_0x390add-_0x964e4,_0x1468ff)),_0x53f921=Math[_0xab7406(0x1d7)](_0x390add,Math[_0xab7406(0x1bb)](_0x11d64b-_0x390add-_0x964e4,_0x3c09be)),_0x4ea502=Math[_0xab7406(0x1d7)](_0x390add,Math['min'](_0x11d64b-_0x390add-_0x964e4,_0x47c3f6)),_0x825752=Math[_0xab7406(0x1d7)](_0x390add,Math[_0xab7406(0x1bb)](_0x11d64b-_0x390add-_0x964e4,_0x4f53bf)),_0x41ea22={'x':_0x28096a['x'],'y':_0x28096a['y']+_0x90e0fe*0.5},_0x14a4e7={'x':_0x38d3ba-_0xb3daa9*_0x4066de*_0x4b097d,'y':_0x1a319e+_0x517c03*_0x50da9d*0.3},_0x29b534={'x':_0x38d3ba,'y':_0x1a319e},_0x3f75c9={'x':_0x38d3ba+_0xb3daa9*_0x4066de*_0x4b097d,'y':_0x1a319e-_0x517c03*_0x50da9d*0.3},_0x285871={'x':_0x53f921+_0xb3daa9*_0x4066de*_0x4b097d,'y':_0x183893+_0x517c03*_0x50da9d*0.5},_0x417aef={'x':_0x53f921,'y':_0x183893},_0x49ad98={'x':_0x53f921-_0xb3daa9*_0x4066de*_0x4b097d,'y':_0x183893-_0x517c03*_0x50da9d*0.5},_0xa109a9={'x':_0x4ea502-_0xb3daa9*_0x4066de*_0x4b097d,'y':_0x917162+_0x517c03*_0x50da9d*0.4},_0x59b54d={'x':_0x4ea502,'y':_0x917162},_0x41c81f={'x':_0x4ea502+_0xb3daa9*_0x4066de*_0x4b097d,'y':_0x917162-_0x517c03*_0x50da9d*0.4},_0x5ef981={'x':_0x825752+_0xb3daa9*_0x4066de*_0x4b097d,'y':_0xba94f1+_0x517c03*_0x50da9d*0.6},_0x32d755={'x':_0x825752,'y':_0xba94f1},_0x17631b={'x':_0x825752-_0xb3daa9*_0x4066de*0.1,'y':_0xba94f1+_0x5f55c3*0.05},_0x13d967={'x':_0x236a7c,'y':_0x53224b-_0x5f55c3*0.2},_0x2bcf9f={'x':_0x236a7c,'y':_0x53224b};_0x37c515=[{'p0':_0x28096a,'p1':_0x41ea22,'p2':_0x14a4e7,'p3':_0x29b534},{'p0':_0x29b534,'p1':_0x3f75c9,'p2':_0x285871,'p3':_0x417aef},{'p0':_0x417aef,'p1':_0x49ad98,'p2':_0xa109a9,'p3':_0x59b54d},{'p0':_0x59b54d,'p1':_0x41c81f,'p2':_0x5ef981,'p3':_0x32d755},{'p0':_0x32d755,'p1':_0x17631b,'p2':_0x13d967,'p3':_0x2bcf9f}];}}return _0x52b9b7[_0xab7406(0x238)](..._0x37c515),_0x52b9b7;}catch(_0x2547bc){return console[_0xab7406(0x20a)](_0xab7406(0x1b9)+_0x3666d3?.['id']+':',_0x2547bc),[];}}function handleEnemyHit(_0x5d5945){const _0x5b7c08=_0xca07;if(!_0x5d5945)return{'destroyed':![],'pointsAwarded':0x0};const _0x5093e5=Date[_0x5b7c08(0x21f)]();let _0x202788=0x0,_0x47fb61=![],_0x411740=_0x5d5945[_0x5b7c08(0x23f)],_0x134d4a=null;const _0x2fd28c=_0x5d5945[_0x5b7c08(0x278)]===ENEMY3_TYPE?BOSS_WIDTH:_0x5d5945[_0x5b7c08(0x278)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3088d4=_0x5d5945[_0x5b7c08(0x278)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x5d5945[_0x5b7c08(0x278)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x139529=_0x5d5945['type']===ENEMY3_TYPE&&_0x5d5945[_0x5b7c08(0x195)],_0x8b307b=_0x5d5945['type']===ENEMY3_TYPE&&_0x5d5945[_0x5b7c08(0x22b)],_0x3378ce=_0x5d5945['x']+_0x2fd28c/0x2,_0x32077a=_0x5d5945['y']+_0x3088d4*0.2;createHitSparks(_0x3378ce,_0x32077a),_0x5d5945[_0x5b7c08(0x1a3)]--;_0x5d5945['type']===ENEMY3_TYPE&&(_0x5d5945[_0x5b7c08(0x23f)]=_0x5d5945[_0x5b7c08(0x1a3)]<ENEMY3_MAX_HITS);if(_0x5d5945['health']<=0x0){_0x47fb61=!![];if(_0x139529&&_0x8b307b){if(_0x5d5945[_0x5b7c08(0x22b)]){const _0x185207=_0x5d5945[_0x5b7c08(0x22b)]['width'],_0x5833ac=_0x5d5945[_0x5b7c08(0x22b)][_0x5b7c08(0x267)],_0x501a12=_0x5d5945['x']+(_0x2fd28c-_0x185207)/0x2+CAPTURED_SHIP_OFFSET_X,_0x1babd9=_0x5d5945['y']+CAPTURED_SHIP_OFFSET_Y,_0x28dcef=fallingShips[_0x5b7c08(0x215)](_0x4b969d=>Math['abs'](_0x4b969d['x']-_0x501a12)<0x1&&Math[_0x5b7c08(0x20c)](_0x4b969d['y']-_0x1babd9)<0x1);!_0x28dcef&&fallingShips[_0x5b7c08(0x238)]({'x':_0x501a12,'y':_0x1babd9,'width':_0x185207,'height':_0x5833ac,'creationTime':_0x5093e5,'tintProgress':0x1,'rotation':0x0});}else console[_0x5b7c08(0x20a)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x5d5945[_0x5b7c08(0x195)]=![],_0x5d5945[_0x5b7c08(0x22b)]=null;}else _0x139529&&!_0x8b307b&&(console['error'](_0x5b7c08(0x1d9)+_0x5d5945['id']+_0x5b7c08(0x24c)),_0x5d5945[_0x5b7c08(0x195)]=![],_0x5d5945[_0x5b7c08(0x22b)]=null);if(isChallengingStage){let _0x49ef56=0x64;const _0x273838=csLastHitTime;csLastHitTime=_0x5093e5,csLastChainHitPosition={'x':_0x5d5945['x'],'y':_0x5d5945['y']},csCurrentChainHits>0x0&&_0x5093e5-_0x273838<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x49ef56*=0x2),_0x202788=_0x49ef56,csCurrentChainScore+=_0x202788,scoreEarnedThisCS+=_0x202788,challengingStageEnemiesHit++,_0x134d4a=explosionSound;}else{if(_0x5d5945[_0x5b7c08(0x1dc)]==='in_grid')_0x202788=_0x5d5945[_0x5b7c08(0x278)]===ENEMY1_TYPE?0x32:_0x5d5945['type']===ENEMY2_TYPE?0x50:0x0,_0x5d5945[_0x5b7c08(0x278)]===ENEMY3_TYPE&&(_0x202788=0x96),_0x134d4a=explosionSound;else{_0x202788=_0x5d5945[_0x5b7c08(0x278)]===ENEMY1_TYPE?0x64:_0x5d5945[_0x5b7c08(0x278)]===ENEMY2_TYPE?0xa0:0x0;if(_0x5d5945['type']===ENEMY3_TYPE){if(_0x139529){const _0x373c9e=[0x3e8,0x5dc,0x7d0,0xbb8];_0x202788=_0x373c9e[Math[_0x5b7c08(0x21b)](Math[_0x5b7c08(0x21a)]()*_0x373c9e[_0x5b7c08(0x18d)])],_0x134d4a=bossHit2Sound;}else _0x411740?(_0x202788=0x190,_0x134d4a=bossHit2Sound):(_0x202788=0x0,_0x134d4a=explosionSound);}else _0x134d4a=explosionSound;if(_0x47fb61&&_0x202788>0x0){const _0x57e467=normalWaveLastHitTime;normalWaveLastHitTime=_0x5093e5,normalWaveLastChainHitPosition={'x':_0x5d5945['x'],'y':_0x5d5945['y']};normalWaveLastChainHitPosition&&_0x5093e5-_0x57e467<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x94c55c=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x29b945=Math[_0x5b7c08(0x1bb)](_0x94c55c['length']-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x38eac4=_0x94c55c[_0x29b945];_0x202788+=_0x38eac4,normalWaveCurrentChainScore+=_0x38eac4;}}}}if(_0x202788>0x0){const _0x5a6f36=score;score+=_0x202788;if(!isManualControl||currentPlayer===0x1||!isTwoPlayerMode){player1Score=score;if(_0x47fb61)player1EnemiesHit++;}else{player2Score=score;if(_0x47fb61)player2EnemiesHit++;}const _0x3e6f3a=score>=highScore&&_0x5a6f36<highScore;highScore=Math[_0x5b7c08(0x1d7)](highScore,score);let _0x477db4=![],_0x2080b3=null;if(!isManualControl)_0x477db4=player1TriggeredHighScoreSound,_0x2080b3=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x477db4=player1TriggeredHighScoreSound,_0x2080b3=()=>{player1TriggeredHighScoreSound=!![];}):(_0x477db4=player2TriggeredHighScoreSound,_0x2080b3=()=>{player2TriggeredHighScoreSound=!![];}):(_0x477db4=player1TriggeredHighScoreSound,_0x2080b3=()=>{player1TriggeredHighScoreSound=!![];});if(_0x3e6f3a&&!_0x477db4){if(_0x2080b3)_0x2080b3();playSound(hiScoreSound);}checkAndAwardExtraLife();const _0x586ad2=_0x5d5945[_0x5b7c08(0x1dc)]==='in_grid'||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x5b7c08(0x238)]({'text':_0x202788['toString'](),'x':_0x5d5945['x']+_0x2fd28c/0x2,'y':_0x5d5945['y'],'color':_0x586ad2,'creationTime':_0x5093e5,'displayStartTime':_0x5093e5+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x5d5945['x']+_0x2fd28c/0x2,_0x5d5945['y']+_0x3088d4/0x2);_0x5d5945['id']===capturingBossId&&stopSound(captureSound);if(_0x5d5945[_0x5b7c08(0x1dc)]==='attacking'||_0x5d5945[_0x5b7c08(0x1dc)]===_0x5b7c08(0x1fa)||_0x5d5945[_0x5b7c08(0x1dc)]===_0x5b7c08(0x1ee)||_0x5d5945[_0x5b7c08(0x1dc)]===_0x5b7c08(0x1a5)||_0x5d5945[_0x5b7c08(0x1dc)]==='returning'||_0x5d5945[_0x5b7c08(0x1dc)]===_0x5b7c08(0x27e)){if(_0x5d5945[_0x5b7c08(0x278)]===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}enemies[_0x5b7c08(0x18d)]===0x1&&enemies[0x0]['id']===_0x5d5945['id']&&isGridSoundPlaying&&stopSound(gridBackgroundSound);}else _0x47fb61=![],_0x5d5945['type']===ENEMY3_TYPE?(_0x134d4a=bossHit1Sound,_0x202788=0x0):_0x202788=0x0;return _0x134d4a&&playSound(_0x134d4a),{'destroyed':_0x47fb61,'pointsAwarded':_0x202788};}function createHitSparks(_0x4b7b21,_0x5e6ea4){const _0x1309a1=_0xca07;if(!gameCtx)return;const _0x2c4c28=Date[_0x1309a1(0x21f)]();for(let _0x22a1c3=0x0;_0x22a1c3<HIT_SPARK_COUNT;_0x22a1c3++){const _0x43204a=Math[_0x1309a1(0x21a)]()*Math['PI']*0x2,_0x175bed=HIT_SPARK_SPEED*(0.7+Math[_0x1309a1(0x21a)]()*0.6),_0x466de9=HIT_SPARK_LIFETIME*(0.8+Math[_0x1309a1(0x21a)]()*0.4);hitSparks[_0x1309a1(0x238)]({'x':_0x4b7b21,'y':_0x5e6ea4,'vx':Math['cos'](_0x43204a)*_0x175bed,'vy':Math[_0x1309a1(0x250)](_0x43204a)*_0x175bed,'creationTime':_0x2c4c28,'lifetime':_0x466de9,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x3973ad=_0xca07,_0x3723a2=Date[_0x3973ad(0x21f)]();for(let _0x488af2=hitSparks[_0x3973ad(0x18d)]-0x1;_0x488af2>=0x0;_0x488af2--){const _0x14d620=hitSparks[_0x488af2],_0x541fc1=_0x3723a2-_0x14d620[_0x3973ad(0x1f3)];_0x541fc1>=_0x14d620[_0x3973ad(0x1ea)]?hitSparks[_0x3973ad(0x275)](_0x488af2,0x1):(_0x14d620['vy']+=HIT_SPARK_GRAVITY,_0x14d620['x']+=_0x14d620['vx'],_0x14d620['y']+=_0x14d620['vy'],_0x14d620[_0x3973ad(0x25e)]=Math[_0x3973ad(0x1d7)](0x0,0x1-_0x541fc1/_0x14d620[_0x3973ad(0x1ea)]));}}function moveEntities(){const _0x477f7d=_0xca07;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x44fc62=ship[_0x477f7d(0x1a8)];isDualShipActive&&(_0x44fc62+=DUAL_SHIP_OFFSET_X);let _0x36233c=ship['x'];if(isManualControl){let _0xf57354=![],_0xf6b471=![];currentPlayer===0x1||!isTwoPlayerMode?(_0xf57354=leftPressed,_0xf6b471=rightPressed):(_0xf57354=p2LeftPressed,_0xf6b471=p2RightPressed);if(_0xf57354&&ship['x']>0x0)_0x36233c=ship['x']-ship[_0x477f7d(0x19a)];else _0xf6b471&&ship['x']<gameCanvas[_0x477f7d(0x1a8)]-_0x44fc62&&(_0x36233c=ship['x']+ship[_0x477f7d(0x19a)]);ship['x']=Math[_0x477f7d(0x1d7)](0x0,Math[_0x477f7d(0x1bb)](gameCanvas[_0x477f7d(0x1a8)]-_0x44fc62,_0x36233c)),ship[_0x477f7d(0x22c)]=ship['x'];}else{if(typeof smoothedShipX!=='undefined'){const _0x1a166d=0.1,_0x1044c9=1.2;smoothedShipX+=(ship[_0x477f7d(0x22c)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x481f70=smoothedShipX-ship['x'],_0x4f932f=ship[_0x477f7d(0x19a)]*_0x1044c9;let _0x142057=0x0;if(Math[_0x477f7d(0x20c)](_0x481f70)>_0x1a166d){const _0x270677=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x142057=_0x481f70*_0x270677,_0x142057=Math['max'](-_0x4f932f,Math[_0x477f7d(0x1bb)](_0x4f932f,_0x142057)),Math[_0x477f7d(0x20c)](_0x142057)>Math['abs'](_0x481f70)&&(_0x142057=_0x481f70),ship['x']+=_0x142057,ship['x']=Math[_0x477f7d(0x1d7)](0x0,Math['min'](gameCanvas['width']-_0x44fc62,ship['x']));}}else ship['x']=Math[_0x477f7d(0x1d7)](0x0,Math[_0x477f7d(0x1bb)](gameCanvas[_0x477f7d(0x1a8)]-_0x44fc62,ship[_0x477f7d(0x22c)]));}}const _0x40dd9c=Date[_0x477f7d(0x21f)]();for(let _0x5cde4d=bullets[_0x477f7d(0x18d)]-0x1;_0x5cde4d>=0x0;_0x5cde4d--){const _0x5a75b2=bullets[_0x5cde4d];_0x5a75b2?(_0x5a75b2['y']-=_0x5a75b2[_0x477f7d(0x19a)],_0x5a75b2['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x477f7d(0x275)](_0x5cde4d,0x1)):bullets['splice'](_0x5cde4d,0x1);}for(let _0x3b7723=enemyBullets[_0x477f7d(0x18d)]-0x1;_0x3b7723>=0x0;_0x3b7723--){const _0x24e38e=enemyBullets[_0x3b7723];if(!_0x24e38e){enemyBullets[_0x477f7d(0x275)](_0x3b7723,0x1);continue;}_0x24e38e['x']+=_0x24e38e['vx'],_0x24e38e['y']+=_0x24e38e['vy'],(_0x24e38e['y']>gameCanvas[_0x477f7d(0x267)]||_0x24e38e['y']<-ENEMY_BULLET_HEIGHT||_0x24e38e['x']<-ENEMY_BULLET_WIDTH||_0x24e38e['x']>gameCanvas[_0x477f7d(0x1a8)])&&enemyBullets['splice'](_0x3b7723,0x1);}for(let _0x504227=fallingShips[_0x477f7d(0x18d)]-0x1;_0x504227>=0x0;_0x504227--){const _0xb4f9b2=fallingShips[_0x504227];if(!_0xb4f9b2){fallingShips[_0x477f7d(0x275)](_0x504227,0x1);continue;}_0xb4f9b2['y']+=FALLING_SHIP_SPEED;const _0x236dcc=_0x40dd9c-_0xb4f9b2[_0x477f7d(0x1f3)];typeof _0xb4f9b2[_0x477f7d(0x187)]===_0x477f7d(0x25a)?_0xb4f9b2[_0x477f7d(0x187)]=Math[_0x477f7d(0x1d7)](0x0,0x1-_0x236dcc/FALLING_SHIP_FADE_DURATION_MS):_0xb4f9b2[_0x477f7d(0x187)]=0x0;if(typeof _0xb4f9b2[_0x477f7d(0x21e)]===_0x477f7d(0x25a)){const _0x5be62f=Math[_0x477f7d(0x1bb)](0x1,_0x236dcc/FALLING_SHIP_ROTATION_DURATION_MS);_0xb4f9b2['rotation']=_0x5be62f*0x2*(0x2*Math['PI']);}else _0xb4f9b2[_0x477f7d(0x21e)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0xb4f9b2['y']+_0xb4f9b2[_0x477f7d(0x267)]>=gameCanvas[_0x477f7d(0x267)]-AUTO_DOCK_THRESHOLD){fallingShips['splice'](_0x504227,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0xb4f9b2['y']>gameCanvas[_0x477f7d(0x267)]+_0xb4f9b2[_0x477f7d(0x267)]&&fallingShips['splice'](_0x504227,0x1);}let _0x116c15=0x0;const _0x1c069b=enemies['some'](_0xbdae6d=>_0xbdae6d?.['state']==='in_grid'),_0x480dae=!isChallengingStage&&!isWaveTransitioning&&_0x1c069b&&!isShowingPlayerGameOverMessage;if(_0x480dae){!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]);const _0x23311d=enemies[_0x477f7d(0x26a)](_0x5637da=>_0x5637da?.[_0x477f7d(0x1dc)]===_0x477f7d(0x23d));if(_0x23311d[_0x477f7d(0x18d)]>0x0){let _0x291ce4=gameCanvas[_0x477f7d(0x1a8)],_0x554925=0x0;_0x23311d[_0x477f7d(0x19e)](_0x4b350f=>{const _0x8faa1c=_0x477f7d;_0x4b350f&&(_0x291ce4=Math[_0x8faa1c(0x1bb)](_0x291ce4,_0x4b350f['x']),_0x554925=Math[_0x8faa1c(0x1d7)](_0x554925,_0x4b350f['x']+_0x4b350f[_0x8faa1c(0x1a8)]));});const _0x51a2fe=gameCanvas[_0x477f7d(0x1a8)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x410316=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x554925>=_0x410316)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x291ce4<=_0x51a2fe&&(gridMoveDirection=0x1);const _0xd157ae=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x116c15=_0xd157ae*gridMoveDirection,currentGridOffsetX+=_0x116c15,enemies['forEach'](_0x4a2997=>{const _0x5256ab=_0x477f7d;if(_0x4a2997&&(_0x4a2997[_0x5256ab(0x1dc)]===_0x5256ab(0x1fe)||_0x4a2997[_0x5256ab(0x1dc)]===_0x5256ab(0x23d)||_0x4a2997[_0x5256ab(0x1dc)]===_0x5256ab(0x1e0)))try{const _0x51e748=_0x4a2997['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x4a2997[_0x5256ab(0x278)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x23c99d,y:_0x536fb5}=getCurrentGridSlotPosition(_0x4a2997[_0x5256ab(0x214)],_0x4a2997['gridCol'],_0x51e748);_0x4a2997['targetGridX']=_0x23c99d,_0x4a2997[_0x5256ab(0x265)]=_0x536fb5;}catch(_0xfabfaa){console[_0x5256ab(0x20a)](_0x5256ab(0x20b)+_0x4a2997?.['id']+_0x5256ab(0x1f0)+_0x4a2997?.['state']+_0x5256ab(0x1b6),_0xfabfaa);}});}}else isGridSoundPlaying&&stopSound(gridBackgroundSound),_0x116c15=0x0;for(let _0x5ef037=enemies[_0x477f7d(0x18d)]-0x1;_0x5ef037>=0x0;_0x5ef037--){let _0x231108=enemies[_0x5ef037];if(!_0x231108)continue;const _0x5660a8=_0x231108['id'];if(_0x231108['capturePrepareTimeout']&&_0x231108[_0x477f7d(0x1dc)]!==_0x477f7d(0x1ed)){clearTimeout(_0x231108['capturePrepareTimeout']);const _0x2de077=enemySpawnTimeouts['indexOf'](_0x231108[_0x477f7d(0x252)]);if(_0x2de077>-0x1)enemySpawnTimeouts[_0x477f7d(0x275)](_0x2de077,0x1);_0x231108[_0x477f7d(0x252)]=null;}const _0xd6ecb3=_0x231108[_0x477f7d(0x278)]===ENEMY3_TYPE?BOSS_WIDTH:_0x231108[_0x477f7d(0x278)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x159e87=_0x231108[_0x477f7d(0x278)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x231108[_0x477f7d(0x278)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x231108[_0x477f7d(0x1dc)]){case _0x477f7d(0x1a5):{break;}case _0x477f7d(0x1fa):{break;}case _0x477f7d(0x1e0):{break;}case _0x477f7d(0x23d):{break;}case _0x477f7d(0x20d):{break;}case _0x477f7d(0x1ed):{break;}case _0x477f7d(0x1ee):{break;}case _0x477f7d(0x193):{break;}case _0x477f7d(0x27e):{break;}case'attacking':{break;}case _0x477f7d(0x1fe):{break;}}if(_0x231108&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x231108['state']===_0x477f7d(0x193))){const _0x3fac71={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0xebfcf8={'x':_0x231108['x'],'y':_0x231108['y'],'width':_0xd6ecb3,'height':_0x159e87};for(let _0x5a943d=bullets[_0x477f7d(0x18d)]-0x1;_0x5a943d>=0x0;_0x5a943d--){const _0x3fb3c2=bullets[_0x5a943d];if(!_0x3fb3c2)continue;_0x3fac71['x']=_0x3fb3c2['x'],_0x3fac71['y']=_0x3fb3c2['y'];if(checkCollision(_0x3fac71,_0xebfcf8)){const _0x502f49=handleEnemyHit(_0x231108);bullets[_0x477f7d(0x275)](_0x5a943d,0x1);if(_0x502f49['destroyed']){enemies[_0x477f7d(0x275)](_0x5ef037,0x1),_0x231108=null;break;}}}}if(_0x231108&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x12c7b2=[_0x477f7d(0x1e4),_0x477f7d(0x1fa),'following_bezier_path','diving_to_capture_position'];if(_0x12c7b2[_0x477f7d(0x1ad)](_0x231108[_0x477f7d(0x1dc)])){const _0x2e468a={'x':_0x231108['x'],'y':_0x231108['y'],'width':_0xd6ecb3,'height':_0x159e87},_0x47f563={'x':ship['x'],'y':ship['y'],'width':ship['width'],'height':ship[_0x477f7d(0x267)]},_0xb00756=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x477f7d(0x1a8)],'height':ship[_0x477f7d(0x267)]}:null;let _0x18d027=![],_0x13e487=![];if(checkCollision(_0x2e468a,_0x47f563))_0x18d027=!![],_0x13e487=![];else _0xb00756&&checkCollision(_0x2e468a,_0xb00756)&&(_0x18d027=!![],_0x13e487=!![]);if(_0x18d027){createExplosion(_0x231108['x']+_0xd6ecb3/0x2,_0x231108['y']+_0x159e87/0x2),playSound(lostLifeSound),enemies[_0x477f7d(0x275)](_0x5ef037,0x1),_0x231108=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x13e487?createExplosion(_0xb00756['x']+ship[_0x477f7d(0x1a8)]/0x2,_0xb00756['y']+ship[_0x477f7d(0x267)]/0x2):createExplosion(_0x47f563['x']+ship[_0x477f7d(0x1a8)]/0x2,_0x47f563['y']+ship[_0x477f7d(0x267)]/0x2),isInvincible=!![],invincibilityEndTime=_0x40dd9c+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x40dd9c+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x477f7d(0x267)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x477f7d(0x20a)](_0x477f7d(0x228));if(playerLives<=0x0){const _0x3411bd=currentPlayer;if(_0x3411bd===0x1)player1Lives=0x0;if(_0x3411bd===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x40dd9c,playerWhoIsGameOver=_0x3411bd;const _0x1b39cd=_0x3411bd===0x1?0x2:0x1,_0x2f4030=_0x1b39cd===0x1?player1Lives:player2Lives;_0x2f4030>0x0?nextActionAfterPlayerGameOver=_0x477f7d(0x276):nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}continue;}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x215af5={'x':ship['x'],'y':ship['y'],'width':ship[_0x477f7d(0x1a8)],'height':ship[_0x477f7d(0x267)]},_0x15640e=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x477f7d(0x1a8)],'height':ship[_0x477f7d(0x267)]}:null;for(let _0x131bd6=enemyBullets[_0x477f7d(0x18d)]-0x1;_0x131bd6>=0x0;_0x131bd6--){const _0x1b6b25=enemyBullets[_0x131bd6];if(!_0x1b6b25){enemyBullets[_0x477f7d(0x275)](_0x131bd6,0x1);continue;}const _0x4a236b={'x':_0x1b6b25['x'],'y':_0x1b6b25['y'],'width':_0x1b6b25['width'],'height':_0x1b6b25[_0x477f7d(0x267)]};let _0x435ae2=checkCollision(_0x215af5,_0x4a236b),_0x4c80f6=0x0;!_0x435ae2&&_0x15640e&&checkCollision(_0x15640e,_0x4a236b)&&(_0x435ae2=!![],_0x4c80f6=0x1);if(_0x435ae2){enemyBullets[_0x477f7d(0x275)](_0x131bd6,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x4c80f6===0x1?createExplosion(_0x15640e['x']+ship[_0x477f7d(0x1a8)]/0x2,_0x15640e['y']+ship[_0x477f7d(0x267)]/0x2):createExplosion(_0x215af5['x']+ship[_0x477f7d(0x1a8)]/0x2,_0x215af5['y']+ship[_0x477f7d(0x267)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x40dd9c+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x477f7d(0x1a8)]/0x2,ship['y']+ship[_0x477f7d(0x267)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x40dd9c+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x477f7d(0x267)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x477f7d(0x20a)](_0x477f7d(0x228));if(playerLives<=0x0){const _0xd29f26=currentPlayer;if(_0xd29f26===0x1)player1Lives=0x0;if(_0xd29f26===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x40dd9c,playerWhoIsGameOver=_0xd29f26;const _0x25cd38=_0xd29f26===0x1?0x2:0x1,_0x94a320=_0x25cd38===0x1?player1Lives:player2Lives;_0x94a320>0x0?nextActionAfterPlayerGameOver=_0x477f7d(0x276):nextActionAfterPlayerGameOver=_0x477f7d(0x1cf),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x477f7d(0x18d)]>0x0&&!isInvincible){const _0x55e522={'x':ship['x'],'y':ship['y'],'width':ship['width'],'height':ship[_0x477f7d(0x267)]};for(let _0x5a9ba4=fallingShips[_0x477f7d(0x18d)]-0x1;_0x5a9ba4>=0x0;_0x5a9ba4--){const _0x62656c=fallingShips[_0x5a9ba4];if(!_0x62656c)continue;const _0xe24cdd={'x':_0x62656c['x'],'y':_0x62656c['y'],'width':_0x62656c['width'],'height':_0x62656c[_0x477f7d(0x267)]};if(checkCollision(_0x55e522,_0xe24cdd)){fallingShips[_0x477f7d(0x275)](_0x5a9ba4,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x59e218){console['error'](_0x477f7d(0x241),_0x59e218,_0x59e218['stack']),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x477f7d(0x1ef))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x477f7d(0x259));}}function switchPlayerTurn(){const _0x3ef868=_0xca07;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x3ef868(0x1d7)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x2679c1=currentPlayer===0x1?0x2:0x1,_0x3de8e9=_0x2679c1===0x1?player1Lives:player2Lives;if(_0x3de8e9<=0x0){const _0x4ab476=currentPlayer===0x1?player1Lives:player2Lives;return _0x4ab476<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2679c1,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x4b70e3=_0xca07;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x92fae8=enemies['filter'](_0x4be8c2=>_0x4be8c2&&_0x4be8c2['state']==='in_grid');if(_0x92fae8['length']===0x0)return;const _0x4c5bc0=Date[_0x4b70e3(0x21f)](),_0x669ad0=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x4c5bc0-lastGridFireCheckTime<_0x669ad0)return;lastGridFireCheckTime=_0x4c5bc0;const _0x2e068c=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x587275=Math[_0x4b70e3(0x1ba)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0xc02ed0=0x0;_0x92fae8[_0x4b70e3(0x192)](()=>Math[_0x4b70e3(0x21a)]()-0.5);for(const _0x1854b6 of _0x92fae8){if(_0xc02ed0>=_0x587275)break;if(_0x1854b6[_0x4b70e3(0x278)]===ENEMY2_TYPE||_0x1854b6[_0x4b70e3(0x278)]===ENEMY3_TYPE){if(_0x1854b6['type']===ENEMY3_TYPE&&_0x1854b6[_0x4b70e3(0x195)])continue;Math['random']()<_0x2e068c&&(createBulletSimple(_0x1854b6)&&(playSound(enemyShootSound),_0x1854b6['lastFiredTime']=_0x4c5bc0,_0xc02ed0++));}}}function firePlayerBullet(_0x56b4aa=![]){const _0x23e002=_0xca07;let _0x1d0ba1=_0x56b4aa?0x1:currentPlayer,_0x91a860=selectedFiringMode===_0x23e002(0x246),_0x1bbec7=!_0x56b4aa&&isTwoPlayerMode&&currentPlayer===0x2;if(isPaused||!isInGameState||playerLives<=0x0||gameOverSequenceStartTime>0x0||!ship||isShipCaptured||isWaitingForRespawn||isShowingIntro||showReadyMessage||isCsCompletionDelayActive||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showCSClearMessage||isShowingPlayerGameOverMessage)return![];try{const _0x4b50f4=ship['y'];let _0x592216=0x0;if(isDualShipActive){const _0x385f60=ship['x']+ship[_0x23e002(0x1a8)]/0x2,_0x1d43af=ship['x']+DUAL_SHIP_OFFSET_X+ship[_0x23e002(0x1a8)]/0x2,_0x1721a0=_0x385f60-PLAYER_BULLET_WIDTH/0x2,_0x204b1f=_0x1d43af-PLAYER_BULLET_WIDTH/0x2;bullets[_0x23e002(0x238)]({'x':_0x1721a0,'y':_0x4b50f4,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),bullets[_0x23e002(0x238)]({'x':_0x204b1f,'y':_0x4b50f4,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x592216=0x2;}else{const _0x2c2f7d=ship['x']+ship[_0x23e002(0x1a8)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets[_0x23e002(0x238)]({'x':_0x2c2f7d,'y':_0x4b50f4,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x592216=0x1;}playSound(playerShootSound);if(_0x1d0ba1===0x1||_0x56b4aa)player1ShotsFired+=_0x592216;else _0x1d0ba1===0x2&&(player2ShotsFired+=_0x592216);return!![];}catch(_0x24a7f8){return console[_0x23e002(0x20a)](_0x23e002(0x1a4),_0x24a7f8),![];}}function handlePlayerInput(){const _0x5bb5ea=_0xca07;try{const _0x1576b0=Date[_0x5bb5ea(0x21f)](),_0x17f300=selectedFiringMode==='single';if(isPaused||!isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isWaitingForRespawn||isShipCaptured||isShowingCaptureMessage){leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],isTouchFiringActive=![];return;}let _0x510db4=![],_0x46d404=![],_0x51ab8c=![],_0x40bc3c=![],_0x2cde95=![],_0x4a71d0=![],_0x417613=![],_0x5da665=![];if(connectedGamepadIndex!==null){const _0x2e1223=navigator[_0x5bb5ea(0x239)]();if(_0x2e1223?.[connectedGamepadIndex]){const _0xcb65=_0x2e1223[connectedGamepadIndex],_0x481239=processSingleController(_0xcb65,previousGameButtonStates);_0x510db4=_0x481239[_0x5bb5ea(0x1f2)],_0x46d404=_0x481239[_0x5bb5ea(0x1ab)],_0x51ab8c=_0x481239[_0x5bb5ea(0x1fd)],_0x5da665=_0x481239[_0x5bb5ea(0x26c)],_0x417613=_0x481239[_0x5bb5ea(0x1d4)],previousGameButtonStates=_0x481239[_0x5bb5ea(0x185)];}else{if(previousGameButtonStates[_0x5bb5ea(0x18d)]>0x0)previousGameButtonStates=[];}}else{if(previousGameButtonStates['length']>0x0)previousGameButtonStates=[];}if(isTwoPlayerMode&&connectedGamepadIndexP2!==null){const _0x54a140=navigator[_0x5bb5ea(0x239)]();if(_0x54a140?.[connectedGamepadIndexP2]){const _0x15d47c=_0x54a140[connectedGamepadIndexP2],_0x120c10=processSingleController(_0x15d47c,previousGameButtonStatesP2);_0x40bc3c=_0x120c10['left'],_0x2cde95=_0x120c10[_0x5bb5ea(0x1ab)],_0x4a71d0=_0x120c10[_0x5bb5ea(0x1fd)],previousGameButtonStatesP2=_0x120c10['newButtonStates'];}else{if(previousGameButtonStatesP2[_0x5bb5ea(0x18d)]>0x0)previousGameButtonStatesP2=[];}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}if(_0x5da665){togglePause();return;}if(_0x417613){stopGameAndShowMenu();return;}let _0x3a815e=keyboardP1LeftDown,_0x3212e9=keyboardP1RightDown,_0x1ff96e=keyboardP1ShootDown,_0x356618=keyboardP2LeftDown,_0x5c2a66=keyboardP2RightDown,_0x34f451=keyboardP2ShootDown,_0x4823c5=_0x1ff96e||_0x51ab8c,_0x23432f=![];const _0x4d972d=isTwoPlayerMode&&connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;isTwoPlayerMode&&(_0x23432f=_0x34f451||_0x4a71d0||_0x4d972d&&_0x51ab8c);let _0x54894b=![];isTouchFiringActive&&!_0x17f300&&(_0x1576b0-playerLastShotTime>=SHOOT_COOLDOWN&&(firePlayerBullet(![])&&(playerLastShotTime=_0x1576b0,_0x54894b=!![],p1JustFiredSingle=![],p2JustFiredSingle=![],touchJustFiredSingle=![])));leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x61b2b8=![],_0x4caaea=![];if(currentPlayer===0x1||!isTwoPlayerMode){leftPressed=_0x3a815e||_0x510db4,rightPressed=_0x3212e9||_0x46d404;if(!_0x54894b){const _0x160fcf=_0x4823c5&&!p1FireInputWasDown,_0x5be0f7=!_0x4823c5&&p1FireInputWasDown;_0x17f300?(_0x160fcf&&!p1JustFiredSingle&&(_0x61b2b8=!![]),_0x5be0f7&&(p1JustFiredSingle=![])):_0x4823c5&&_0x1576b0-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x61b2b8=!![]);}shootPressed=_0x61b2b8;}else{if(isTwoPlayerMode&&currentPlayer===0x2){p2LeftPressed=_0x356618||_0x40bc3c||_0x4d972d&&_0x510db4,p2RightPressed=_0x5c2a66||_0x2cde95||_0x4d972d&&_0x46d404;if(!_0x54894b){const _0x34ef79=_0x23432f&&!p2FireInputWasDown,_0x389a8a=!_0x23432f&&p2FireInputWasDown,_0xe6e7c4=_0x4d972d&&(!_0x51ab8c&&(previousGameButtonStates[PS5_BUTTON_CROSS]??![]));_0x17f300?(_0x34ef79&&!p2JustFiredSingle&&(_0x4caaea=!![]),(_0x389a8a||_0xe6e7c4)&&(p2JustFiredSingle=![])):_0x23432f&&_0x1576b0-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x4caaea=!![]);}p2ShootPressed=_0x4caaea;}}if(!_0x54894b&&(_0x61b2b8||_0x4caaea)){if(firePlayerBullet(![])){playerLastShotTime=_0x1576b0,_0x54894b=!![];if(_0x17f300){if(_0x61b2b8)p1JustFiredSingle=!![];if(_0x4caaea)p2JustFiredSingle=!![];}}}p1FireInputWasDown=_0x4823c5,p2FireInputWasDown=_0x23432f;}catch(_0x3f55f0){console[_0x5bb5ea(0x20a)](_0x5bb5ea(0x1d0),_0x3f55f0),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isTouchFiringActive=![];}}function aiControl(){const _0x50585e=_0xca07;try{if(isPaused||isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isWaitingForRespawn){if(ship)ship[_0x50585e(0x22c)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;return;}smoothedShipX===undefined&&(smoothedShipX=ship['x']);const _0x37e8db=Date['now'](),_0x5a950a=gameCanvas[_0x50585e(0x1a8)],_0x5d70bf=gameCanvas['height'];let _0x944379=ship[_0x50585e(0x1a8)];isDualShipActive&&(_0x944379=DUAL_SHIP_OFFSET_X+ship['width']);const _0x2ef454=ship['x']+_0x944379/0x2,_0x19a87a=ship['y'],_0x495998=_0x5a950a/0x2;let _0x2f1498;isDualShipActive?_0x2f1498=_0x495998-_0x944379/0x2:_0x2f1498=_0x495998-ship[_0x50585e(0x1a8)]/0x2;const _0x3592a5=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive;let _0x65be3=smoothedShipX,_0x4b655d=![],_0x3867cc=![],_0xde9389=smoothedShipX,_0x800490=null,_0x5499ee=![];aiNeedsStabilization&&!_0x3592a5&&(aiStabilizationEndTime=_0x37e8db+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],smoothedShipX=ship['x']);if(_0x37e8db<aiStabilizationEndTime&&!_0x3592a5)_0x65be3=_0x2f1498;else{_0x3867cc=![],_0xde9389=smoothedShipX;if(!isInvincible){let _0x1754ad=[];const _0x2ea3dd=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD:FINAL_DODGE_LOOKAHEAD,_0x1214ba=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER:FINAL_DODGE_BUFFER_BASE,_0x4e04a7={'x':ship['x']-_0x1214ba/0x2,'y':ship['y']-_0x2ea3dd,'width':_0x944379+_0x1214ba,'height':_0x2ea3dd+ship[_0x50585e(0x267)]};for(const _0x1409f5 of enemyBullets){if(_0x1409f5&&_0x1409f5['y']+_0x1409f5[_0x50585e(0x267)]>0x0&&_0x1409f5['y']<_0x5d70bf){const _0x260bb5={'x':_0x1409f5['x'],'y':_0x1409f5['y'],'width':_0x1409f5[_0x50585e(0x1a8)],'height':_0x1409f5[_0x50585e(0x267)]};checkCollision(_0x4e04a7,_0x260bb5)&&_0x1754ad['push'](_0x1409f5);}}if(_0x1754ad[_0x50585e(0x18d)]>0x0){_0x3867cc=!![];let _0x229e03=_0x5a950a,_0xfc6ee1=0x0,_0xaa822a=Infinity;_0x1754ad['forEach'](_0x4fa344=>{const _0x3d3143=_0x50585e;_0x229e03=Math['min'](_0x229e03,_0x4fa344['x']),_0xfc6ee1=Math[_0x3d3143(0x1d7)](_0xfc6ee1,_0x4fa344['x']+_0x4fa344[_0x3d3143(0x1a8)]),_0xaa822a=Math[_0x3d3143(0x1bb)](_0xaa822a,_0x19a87a-(_0x4fa344['y']+_0x4fa344[_0x3d3143(0x267)]));});const _0x4dc58c=(_0x229e03+_0xfc6ee1)/0x2,_0x3e0174=_0x2ef454<_0x4dc58c?-0x1:0x1,_0x4f9e3e=0x1-Math[_0x50585e(0x1bb)](0x1,Math['max'](0x0,_0xaa822a)/_0x2ea3dd),_0x1e7318=isChallengingStage?1.6:isEntrancePhaseActive?2.2:1.8,_0x3d2809=isChallengingStage?1.3:isEntrancePhaseActive?1.8:1.5,_0x5dbbb7=Math['max'](0x0,_0x1754ad[_0x50585e(0x18d)]-0x1)*_0x944379*0.3,_0x38aff1=_0x944379*(_0x1e7318+_0x4f9e3e*_0x3d2809)+_0x5dbbb7;_0xde9389=smoothedShipX+_0x3e0174*_0x38aff1;}if(!_0x3867cc&&!isChallengingStage&&!isFullGridWave){let _0x440e6c=![],_0x263719=Infinity;for(const _0x4c9361 of enemies){if(_0x4c9361&&_0x4c9361[_0x50585e(0x278)]===ENEMY3_TYPE&&_0x4c9361['state']===_0x50585e(0x1ee)&&_0x4c9361['targetX']!=null){const _0x4418b4=AI_COLLISION_LOOKAHEAD*1.5,_0x29c855=FINAL_DODGE_BUFFER_BASE*1.8,_0x57a7b1=0.2,_0x307096=_0x4c9361['x']+(_0x4c9361[_0x50585e(0x22c)]-_0x4c9361['x'])*_0x57a7b1,_0x5003ca={'x':_0x307096,'y':_0x4c9361['y'],'width':_0x4c9361[_0x50585e(0x1a8)],'height':_0x4c9361[_0x50585e(0x267)]},_0x1d16c2={'x':ship['x']-_0x29c855/0x2,'y':ship['y']-_0x4418b4,'width':_0x944379+_0x29c855,'height':_0x4418b4+ship[_0x50585e(0x267)]};if(checkCollision(_0x1d16c2,_0x5003ca)){const _0x45a06c=_0x19a87a-(_0x4c9361['y']+_0x4c9361['height']);if(_0x45a06c<_0x263719){_0x263719=_0x45a06c,_0x3867cc=!![],_0x440e6c=!![];const _0xc23e98=_0x4c9361[_0x50585e(0x22c)]+_0x4c9361['width']/0x2,_0x3a7f5d=_0x5a950a/0x2,_0x37514e=_0xc23e98<_0x3a7f5d?0x1:-0x1,_0xc3f2cb=0x1-Math[_0x50585e(0x1bb)](0x1,Math[_0x50585e(0x1d7)](0x0,_0x45a06c)/_0x4418b4),_0x55665c=_0x944379*(2.5+_0xc3f2cb*0x2);_0xde9389=smoothedShipX+_0x37514e*_0x55665c;}}}}}if(!_0x3867cc){const _0x3565ad=AI_COLLISION_LOOKAHEAD,_0x1e01b3=NORMAL_WAVE_ATTACKING_DODGE_BUFFER_MULTIPLIER,_0x50a21d=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR;let _0x579fab=Infinity;for(const _0x58353c of enemies){if(_0x58353c&&_0x58353c[_0x50585e(0x1dc)]===_0x50585e(0x1e4)&&_0x58353c['y']+_0x58353c['height']>0x0&&_0x58353c['y']<_0x5d70bf){let _0x4e481b=FINAL_DODGE_BUFFER_BASE*_0x1e01b3;_0x58353c[_0x50585e(0x278)]===ENEMY1_TYPE&&(_0x4e481b*=_0x50a21d);const _0x492c2d={'x':ship['x']-_0x4e481b/0x2,'y':ship['y']-_0x3565ad,'width':_0x944379+_0x4e481b,'height':_0x3565ad+ship['height']},_0x2b2758={'x':_0x58353c['x'],'y':_0x58353c['y'],'width':_0x58353c[_0x50585e(0x1a8)],'height':_0x58353c[_0x50585e(0x267)]};if(checkCollision(_0x492c2d,_0x2b2758)){const _0x3f8c59=_0x19a87a-(_0x58353c['y']+_0x58353c[_0x50585e(0x267)]);if(_0x3f8c59<_0x579fab){_0x579fab=_0x3f8c59,_0x3867cc=!![];const _0x5a0683=_0x58353c['x']+_0x58353c[_0x50585e(0x1a8)]/0x2,_0x56b29e=_0x2ef454<_0x5a0683?-0x1:0x1,_0x93ab03=0x1-Math['min'](0x1,Math[_0x50585e(0x1d7)](0x0,_0x3f8c59)/_0x3565ad),_0x4530fe=_0x944379*(0x2+_0x93ab03*1.8);_0xde9389=smoothedShipX+_0x56b29e*_0x4530fe;}}}}}if(!_0x3867cc&&!isFullGridWave){const _0x23c604=AI_COLLISION_LOOKAHEAD;let _0x40bf20=Infinity;for(const _0xc31ae2 of enemies){const _0x3beb1f=_0xc31ae2&&(_0xc31ae2['state']==='following_entrance_path'||_0xc31ae2[_0x50585e(0x1dc)]===_0x50585e(0x1fe));if(_0x3beb1f&&_0xc31ae2['y']+_0xc31ae2[_0x50585e(0x267)]>0x0&&_0xc31ae2['y']<_0x5d70bf){let _0xdf654b=FINAL_DODGE_BUFFER_BASE;_0xc31ae2[_0x50585e(0x278)]===ENEMY1_TYPE&&(_0xdf654b*=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR);const _0x1eb08d={'x':ship['x']-_0xdf654b/0x2,'y':ship['y']-_0x23c604,'width':_0x944379+_0xdf654b,'height':_0x23c604+ship[_0x50585e(0x267)]},_0x5ea85b={'x':_0xc31ae2['x'],'y':_0xc31ae2['y'],'width':_0xc31ae2['width'],'height':_0xc31ae2['height']};if(checkCollision(_0x1eb08d,_0x5ea85b)){const _0x263c33=_0x19a87a-(_0xc31ae2['y']+_0xc31ae2[_0x50585e(0x267)]);if(_0x263c33<_0x40bf20){_0x40bf20=_0x263c33,_0x3867cc=!![];const _0x1b1708=_0xc31ae2['x']+_0xc31ae2[_0x50585e(0x1a8)]/0x2,_0x3f19c2=_0x2ef454<_0x1b1708?-0x1:0x1,_0x50ed18=0x1-Math[_0x50585e(0x1bb)](0x1,Math['max'](0x0,_0x263c33)/_0x23c604),_0x58795f=_0x944379*(0x2+_0x50ed18*1.8);_0xde9389=smoothedShipX+_0x3f19c2*_0x58795f;}}}}}}if(_0x3867cc&&!isInvincible){const _0xf9efa0=Math[_0x50585e(0x1d7)](AI_ANTI_CORNER_BUFFER,Math[_0x50585e(0x1bb)](_0x5a950a-_0x944379-AI_ANTI_CORNER_BUFFER,_0xde9389));_0x65be3=_0xf9efa0,_0x800490=null,_0x4b655d=![];}else{if(fallingShips[_0x50585e(0x18d)]>0x0&&!isShipCaptured&&!isWaitingForRespawn){const _0x161048=fallingShips[0x0];if(_0x161048){const _0xc48504=_0x161048['x']+_0x161048[_0x50585e(0x1a8)]/0x2;_0x65be3=_0xc48504-_0x944379/0x2,_0x65be3=Math[_0x50585e(0x1d7)](AI_EDGE_BUFFER,Math[_0x50585e(0x1bb)](_0x5a950a-_0x944379-AI_EDGE_BUFFER,_0x65be3)),_0x800490=null;let _0x1caee8=-Infinity,_0x3c5c25=null;for(const _0x16279d of enemies){if(_0x16279d&&_0x16279d['y']<_0x19a87a){const _0x3bdae7=_0x16279d['x']+_0x16279d[_0x50585e(0x1a8)]/0x2,_0x39f418=Math[_0x50585e(0x20c)](_0x3bdae7-_0x2ef454),_0x4113aa=_0x19a87a-(_0x16279d['y']+_0x16279d[_0x50585e(0x267)]);if(_0x39f418<_0x944379*1.5&&_0x4113aa>0x0){const _0x2aad79=_0x5d70bf-_0x16279d['y']-_0x39f418*0x2-_0x4113aa;_0x2aad79>_0x1caee8&&(_0x1caee8=_0x2aad79,_0x3c5c25=_0x16279d);}}}if(_0x3c5c25){let _0x8b1856=!![];const _0x51814b={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x944379+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x50585e(0x267)]};for(const _0x1243b9 of enemyBullets){if(_0x1243b9&&_0x1243b9['y']+_0x1243b9[_0x50585e(0x267)]>0x0&&_0x1243b9['y']<_0x5d70bf){const _0x504377={'x':_0x1243b9['x'],'y':_0x1243b9['y'],'width':_0x1243b9[_0x50585e(0x1a8)],'height':_0x1243b9[_0x50585e(0x267)]};if(checkCollision(_0x51814b,_0x504377)){_0x8b1856=![];break;}}}_0x8b1856&&!(_0x3c5c25[_0x50585e(0x278)]===ENEMY3_TYPE&&_0x3c5c25[_0x50585e(0x1dc)]===_0x50585e(0x1ed))&&(_0x4b655d=!![],_0x800490=_0x3c5c25);}}}else{let _0x23fed5=![],_0xd4aaa7=null;if(!isFullGridWave&&!isManualControl&&captureBeamActive&&capturingBossId&&playerLives>0x1&&!isShipCaptured&&!isInvincible){_0xd4aaa7=enemies[_0x50585e(0x26d)](_0x1f9139=>_0x1f9139['id']===capturingBossId);if(_0xd4aaa7&&_0xd4aaa7[_0x50585e(0x1dc)]===_0x50585e(0x193)){_0x23fed5=!![];const _0x519733=_0x37e8db-_0xd4aaa7[_0x50585e(0x231)];if(_0x519733>=AI_CAPTURE_WAIT_DURATION_MS){_0x5499ee=!![];const _0x2db9e7=_0xd4aaa7['x']+_0xd4aaa7[_0x50585e(0x1a8)]/0x2;_0x65be3=_0x2db9e7-_0x944379/0x2,_0x800490=null,_0x4b655d=![];}}}if(!_0x5499ee){_0x800490=null;if(isEntrancePhaseActive&&!isChallengingStage&&!isFullGridWave){_0x65be3=_0x2f1498;let _0x461525=-Infinity,_0xb20ff1=null;for(const _0x5dedaf of enemies){if(_0x5dedaf&&(_0x5dedaf[_0x50585e(0x1dc)]===_0x50585e(0x1fa)||_0x5dedaf[_0x50585e(0x1dc)]===_0x50585e(0x1e0))&&_0x5dedaf['y']<_0x19a87a){const _0x44d504=_0x5dedaf['x']+_0x5dedaf[_0x50585e(0x1a8)]/0x2,_0x4fe149=_0x5dedaf['y']+_0x5dedaf[_0x50585e(0x267)]/0x2,_0x3e7c4c=_0x44d504-_0x2ef454,_0x389fe1=_0x19a87a-_0x4fe149,_0x62c418=Math[_0x50585e(0x1db)](_0x3e7c4c*_0x3e7c4c+_0x389fe1*_0x389fe1),_0x2db4c0=Math[_0x50585e(0x1d7)](0x0,_0x944379*1.5-Math['abs'](_0x3e7c4c)),_0xe81da4=(_0x5d70bf-_0x5dedaf['y'])*1.5+_0x2db4c0-_0x62c418*0.5;_0xe81da4>_0x461525&&(_0x461525=_0xe81da4,_0xb20ff1=_0x5dedaf);}}if(_0xb20ff1){_0x800490=_0xb20ff1;const _0x8edacc=_0x800490['x']+_0x800490['width']/0x2,_0x391cd1=Math[_0x50585e(0x20c)](_0x2ef454-_0x8edacc),_0x1cf2c5=_0x944379*ENTRANCE_SHOOT_ALIGNMENT_FACTOR;let _0x1dd9a9=!![];const _0xcd8a87={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x944379+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x50585e(0x267)]};for(const _0xda0cef of enemyBullets){if(_0xda0cef&&_0xda0cef['y']+_0xda0cef['height']>0x0&&_0xda0cef['y']<_0x5d70bf){const _0x29ac0a={'x':_0xda0cef['x'],'y':_0xda0cef['y'],'width':_0xda0cef['width'],'height':_0xda0cef['height']};if(checkCollision(_0xcd8a87,_0x29ac0a)){_0x1dd9a9=![];break;}}}_0x1dd9a9&&_0x391cd1<_0x1cf2c5&&((isDualShipActive||_0x800490[_0x50585e(0x278)]!==ENEMY3_TYPE||captureAttemptMadeThisLevel||isShipCaptured)&&(_0x4b655d=!![]));}}else{if(isChallengingStage){let _0x27ec0b=Infinity;_0x800490=null;for(const _0x5d693d of enemies){if(_0x5d693d&&_0x5d693d[_0x50585e(0x1dc)]===_0x50585e(0x1a5)&&_0x5d693d['y']<_0x19a87a){const _0x32d0c7=_0x5d693d['x']+_0x5d693d[_0x50585e(0x1a8)]/0x2,_0x565abb=Math['abs'](_0x32d0c7-_0x2ef454),_0x4f9248=(0x1-Math[_0x50585e(0x1bb)](0x1,_0x5d693d['y']/_0x19a87a))*0x2,_0x36fbbd=_0x565abb/_0x5a950a*0.5,_0x34fb57=_0x4f9248+_0x36fbbd;_0x34fb57<_0x27ec0b&&(_0x27ec0b=_0x34fb57,_0x800490=_0x5d693d);}}let _0x38871c=_0x2ef454;if(_0x800490){const _0x56413a=_0x800490['x']+_0x800490['width']/0x2,_0x3dedff=_0x800490['y']+_0x800490[_0x50585e(0x267)]/0x2,_0xa78036=_0x19a87a-_0x3dedff;let _0x3d1547=_0x56413a;const _0x388e30=_0x800490[_0x50585e(0x1a7)]===0x2||_0x800490[_0x50585e(0x1a7)]===0x3;if(!_0x388e30&&_0xa78036>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x1c3d9c=Math[_0x50585e(0x1bb)](MAX_PREDICTION_TIME_CS,_0xa78036/PLAYER_BULLET_SPEED),_0x1fd67e=0.4,_0x434eea=(_0x800490[_0x50585e(0x1c2)]||0x0)*_0x1c3d9c;_0x3d1547=_0x56413a+_0x434eea*_0x1fd67e,_0x3d1547=Math[_0x50585e(0x1d7)](_0x800490[_0x50585e(0x1a8)]/0x2,Math[_0x50585e(0x1bb)](_0x5a950a-_0x800490[_0x50585e(0x1a8)]/0x2,_0x3d1547));}_0x38871c=_0x3d1547,_0x65be3=_0x38871c-_0x944379/0x2,_0x65be3=Math[_0x50585e(0x1d7)](AI_EDGE_BUFFER,Math[_0x50585e(0x1bb)](_0x5a950a-_0x944379-AI_EDGE_BUFFER,_0x65be3));const _0x4997e3=_0x944379*1.5,_0x5676ea=Math[_0x50585e(0x20c)](_0x2ef454-_0x38871c);_0x5676ea<_0x4997e3&&(_0x4b655d=!![]);}else{const _0x45aef=Math[_0x50585e(0x250)](_0x37e8db/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE*0.5;_0x65be3=_0x2f1498+_0x45aef,_0x65be3=Math['max'](AI_EDGE_BUFFER,Math[_0x50585e(0x1bb)](_0x5a950a-_0x944379-AI_EDGE_BUFFER,_0x65be3));}}else{let _0x479bf3=-Infinity;_0x800490=null;const _0x32e9e7=_0x23fed5&&!_0x5499ee;for(const _0x36eefd of enemies){if(!_0x36eefd)continue;if(_0x32e9e7&&_0x36eefd['id']===capturingBossId)continue;let _0xafe67c=![],_0x28f0ea=0x0;switch(_0x36eefd[_0x50585e(0x1dc)]){case'in_grid':_0xafe67c=!![],_0x28f0ea=_0x32e9e7?0x4e20:0x4650;break;case _0x50585e(0x1e0):case _0x50585e(0x1fe):_0xafe67c=!![],_0x28f0ea=0x2328;break;case _0x50585e(0x20d):_0xafe67c=!![],_0x28f0ea=0x1b58;break;case _0x50585e(0x1e4):_0xafe67c=!![],_0x28f0ea=0x1770;break;case _0x50585e(0x1ed):_0xafe67c=!![],_0x28f0ea=0x61a8;break;}if(_0xafe67c){let _0x4bae41=_0x28f0ea,_0x1e5977=_0x36eefd[_0x50585e(0x23f)]&&_0x36eefd[_0x50585e(0x278)]===ENEMY3_TYPE?0x1388:0x0,_0x1e8d93=(_0x5d70bf-_0x36eefd['y'])*0x2,_0x23c886=Math[_0x50585e(0x1d7)](0x0,_0x944379*0x1-Math[_0x50585e(0x20c)](_0x36eefd['x']+_0x36eefd[_0x50585e(0x1a8)]/0x2-_0x2ef454))*0x1;_0x4bae41+=_0x1e8d93+_0x1e5977+_0x23c886,_0x4bae41>_0x479bf3&&(_0x479bf3=_0x4bae41,_0x800490=_0x36eefd);}}let _0x1185f9=_0x2f1498+_0x944379/0x2;if(_0x800490){const _0x312d11=_0x800490['x']+_0x800490[_0x50585e(0x1a8)]/0x2,_0x1af6d1=_0x800490['y']+_0x800490['height']/0x2,_0x29b0ae=_0x19a87a-_0x1af6d1;let _0x338961=_0x312d11;if(_0x800490[_0x50585e(0x1dc)]!==_0x50585e(0x23d)&&_0x800490[_0x50585e(0x1dc)]!=='preparing_capture'){if(_0x29b0ae>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x8fe589=Math[_0x50585e(0x1bb)](MAX_PREDICTION_TIME,_0x29b0ae/PLAYER_BULLET_SPEED);let _0x45919d=_0x312d11+(_0x800490['velocityX']||0x0)*_0x8fe589;_0x338961=Math[_0x50585e(0x1d7)](_0x800490['width']/0x2,Math['min'](_0x5a950a-_0x800490[_0x50585e(0x1a8)]/0x2,_0x45919d));}}_0x1185f9=_0x338961,_0x65be3=_0x1185f9-_0x944379/0x2;if(_0x800490[_0x50585e(0x1dc)]===_0x50585e(0x23d)||_0x800490[_0x50585e(0x1dc)]===_0x50585e(0x1ed))_0x65be3=Math['max'](AI_EDGE_BUFFER,Math[_0x50585e(0x1bb)](_0x5a950a-_0x944379-AI_EDGE_BUFFER,_0x65be3));else{const _0x39b581=_0x5a950a*0.6/0x2,_0x16d910=_0x495998-_0x39b581,_0x4d3d53=_0x495998+_0x39b581-_0x944379;_0x65be3=Math[_0x50585e(0x1d7)](_0x16d910,Math[_0x50585e(0x1bb)](_0x4d3d53,_0x65be3)),_0x65be3=Math[_0x50585e(0x1d7)](AI_EDGE_BUFFER,Math[_0x50585e(0x1bb)](_0x5a950a-_0x944379-AI_EDGE_BUFFER,_0x65be3));}let _0x4e4ede=![],_0x531ec1=Math['abs'](_0x2ef454-_0x1185f9),_0x1bac88=_0x800490[_0x50585e(0x1dc)]===_0x50585e(0x23d)||_0x800490[_0x50585e(0x1dc)]==='preparing_capture'?_0x944379*GRID_SHOOT_ALIGNMENT_FACTOR:_0x944379*FINAL_SHOOT_ALIGNMENT_THRESHOLD;const _0x19aeca=ship['x']<AI_EDGE_BUFFER*AI_EDGE_SHOOT_BUFFER_FACTOR,_0x17e954=ship['x']>_0x5a950a-_0x944379-AI_EDGE_SHOOT_BUFFER_FACTOR,_0x1f5de2=_0x1185f9>_0x5a950a*AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR,_0x15d1a9=_0x1185f9<_0x5a950a*(0x1-AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR);(_0x19aeca&&_0x1f5de2||_0x17e954&&_0x15d1a9)&&(_0x4e4ede=!![]);if(!_0x4e4ede&&_0x531ec1<_0x1bac88){let _0x4daeb8=![];if(_0x800490[_0x50585e(0x1dc)]!==_0x50585e(0x23d)&&_0x800490[_0x50585e(0x1dc)]!=='preparing_capture')for(const _0x48e30f of enemies){if(!_0x48e30f||_0x48e30f===_0x800490)continue;if(_0x32e9e7&&_0x48e30f['id']===capturingBossId)continue;if(_0x48e30f['y']<_0x19a87a&&_0x48e30f['y']+_0x48e30f[_0x50585e(0x267)]>_0x800490['y']){const _0x3cde01=_0x48e30f['x']-AI_SHOT_CLEARANCE_BUFFER,_0x2fd341=_0x48e30f['x']+_0x48e30f['width']+AI_SHOT_CLEARANCE_BUFFER;if(_0x1185f9>_0x3cde01&&_0x1185f9<_0x2fd341){_0x4daeb8=!![];break;}}}!_0x4daeb8&&((!_0x32e9e7||_0x800490['id']!==capturingBossId)&&(_0x4b655d=!![]));}}else{const _0x2926f9=Math['sin'](_0x37e8db/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE;_0x65be3=_0x2f1498+_0x2926f9,_0x65be3=Math[_0x50585e(0x1d7)](AI_EDGE_BUFFER,Math[_0x50585e(0x1bb)](_0x5a950a-_0x944379-AI_EDGE_BUFFER,_0x65be3));}}}}}}}ship[_0x50585e(0x22c)]=_0x65be3;if(_0x4b655d&&!_0x3867cc&&!_0x5499ee){let _0x23cfc4=!![];!isChallengingStage&&(_0x23cfc4=_0x37e8db>=aiCanShootTime),_0x23cfc4&&_0x37e8db-aiLastShotTime>=AI_SHOOT_COOLDOWN&&(firePlayerBullet(!![])&&(aiLastShotTime=_0x37e8db));}}catch(_0x19be8b){console[_0x50585e(0x20a)](_0x50585e(0x23c),_0x19be8b,_0x19be8b[_0x50585e(0x223)]);if(ship)ship[_0x50585e(0x22c)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;}}function findAndDetachEnemy(){const _0x4c42dd=_0xca07;try{if(!isFullGridWave&&isShipCaptured){const _0x54366d=enemies[_0x4c42dd(0x26d)](_0x441e1d=>_0x441e1d&&_0x441e1d[_0x4c42dd(0x278)]===ENEMY3_TYPE&&_0x441e1d[_0x4c42dd(0x195)]&&_0x441e1d['state']==='in_grid');if(_0x54366d){console[_0x4c42dd(0x226)](_0x4c42dd(0x211)+_0x54366d['id']+_0x4c42dd(0x27a)),_0x54366d[_0x4c42dd(0x1fb)]=!![],_0x54366d[_0x4c42dd(0x25d)]=_0x4c42dd(0x1b1);const _0x1fa1c5=new Set([_0x54366d['id']]);return resetJustReturnedFlags(_0x1fa1c5),[_0x54366d];}}if(isEntrancePhaseActive)return null;let _0x3cfe2d=enemies['filter'](_0x5568d8=>_0x5568d8&&_0x5568d8[_0x4c42dd(0x1dc)]===_0x4c42dd(0x23d)&&!_0x5568d8[_0x4c42dd(0x1fb)]);if(_0x3cfe2d['length']===0x0){_0x3cfe2d=enemies[_0x4c42dd(0x26a)](_0x358089=>_0x358089&&_0x358089[_0x4c42dd(0x1dc)]==='in_grid');if(_0x3cfe2d['length']===0x0)return null;}if(_0x3cfe2d[_0x4c42dd(0x18d)]===0x0)return null;_0x3cfe2d['sort']((_0x3d3ed9,_0x3022a4)=>(_0x3022a4[_0x4c42dd(0x214)]||0x0)-(_0x3d3ed9[_0x4c42dd(0x214)]||0x0));const _0xcc629=_0x3cfe2d['length']<=0x3;let _0x27594c=[];const _0x51a9bc=_0x4c42dd(0x1b1);gridJustCompleted&&(gridJustCompleted=![]);let _0x3dfacf=![];if(level>0x1&&!_0xcc629&&_0x3cfe2d[_0x4c42dd(0x18d)]>=0x3){const _0x327fe0=_0x3cfe2d[_0x4c42dd(0x26a)](_0x8e03e5=>_0x8e03e5[_0x4c42dd(0x278)]===ENEMY3_TYPE&&!_0x8e03e5['hasCapturedShip']);for(const _0x503897 of _0x327fe0){const _0x4c90a2=_0x3cfe2d['find'](_0x5f420c=>_0x5f420c['type']===ENEMY2_TYPE&&_0x5f420c[_0x4c42dd(0x214)]===_0x503897['gridRow']&&_0x5f420c['gridCol']===_0x503897[_0x4c42dd(0x1c1)]-0x1),_0x5052c3=_0x3cfe2d['find'](_0x998bf2=>_0x998bf2[_0x4c42dd(0x278)]===ENEMY2_TYPE&&_0x998bf2[_0x4c42dd(0x214)]===_0x503897[_0x4c42dd(0x214)]&&_0x998bf2[_0x4c42dd(0x1c1)]===_0x503897[_0x4c42dd(0x1c1)]+0x1);if(_0x4c90a2&&_0x5052c3){_0x27594c=[_0x503897,_0x4c90a2,_0x5052c3],_0x3dfacf=!![];break;}}}if(!_0x3dfacf&&!_0xcc629){const _0x5d5fd6=_0x3cfe2d['filter'](_0x388382=>_0x388382[_0x4c42dd(0x278)]===ENEMY1_TYPE),_0xea00e1=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x5d5fd6['length']>=0x2&&Math['random']()<_0xea00e1){const _0x1e8396=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x28345d=_0x5d5fd6[_0x4c42dd(0x18d)]>=0x3&&Math[_0x4c42dd(0x21a)]()<_0x1e8396?0x3:0x2;let _0x5ef162=![];_0x5d5fd6[_0x4c42dd(0x192)](()=>Math[_0x4c42dd(0x21a)]()-0.5);for(let _0x30316c=0x0;_0x30316c<_0x5d5fd6[_0x4c42dd(0x18d)];_0x30316c++){const _0x3c41e5=_0x5d5fd6[_0x30316c];let _0x58ea63=[_0x3c41e5];const _0xa14d4a=_0x5d5fd6[_0x4c42dd(0x26a)](_0x3f784f=>_0x3f784f['id']!==_0x3c41e5['id']&&_0x3f784f[_0x4c42dd(0x214)]===_0x3c41e5['gridRow']);_0xa14d4a['sort']((_0x1525d1,_0x38ae02)=>Math['abs'](_0x1525d1['gridCol']-_0x3c41e5[_0x4c42dd(0x1c1)])-Math['abs'](_0x38ae02[_0x4c42dd(0x1c1)]-_0x3c41e5['gridCol']));for(let _0x3ee97f=0x0;_0x3ee97f<_0xa14d4a[_0x4c42dd(0x18d)]&&_0x58ea63[_0x4c42dd(0x18d)]<_0x28345d;_0x3ee97f++){_0x58ea63[_0x4c42dd(0x238)](_0xa14d4a[_0x3ee97f]);}if(_0x58ea63[_0x4c42dd(0x18d)]===_0x28345d){_0x27594c=_0x58ea63,_0x3dfacf=!![],_0x5ef162=!![];break;}}!_0x5ef162&&_0x5d5fd6[_0x4c42dd(0x18d)]>=_0x28345d&&(_0x27594c=_0x5d5fd6['slice'](0x0,_0x28345d),_0x3dfacf=!![]);}}if(!_0x3dfacf&&!_0xcc629){const _0x152bc5=_0x3cfe2d[_0x4c42dd(0x26a)](_0x2dedbc=>_0x2dedbc[_0x4c42dd(0x278)]===ENEMY2_TYPE),_0x4effa9=0.2;if(_0x152bc5[_0x4c42dd(0x18d)]>=0x2&&Math[_0x4c42dd(0x21a)]()<_0x4effa9){const _0xdd9d7b=0x2;let _0x51610c=![];_0x152bc5[_0x4c42dd(0x192)](()=>Math['random']()-0.5);for(let _0x34cc4b=0x0;_0x34cc4b<_0x152bc5[_0x4c42dd(0x18d)];_0x34cc4b++){const _0xddf14d=_0x152bc5[_0x34cc4b];let _0x2e183d=[_0xddf14d];const _0xc5ba42=_0x152bc5['filter'](_0x26c9de=>_0x26c9de['id']!==_0xddf14d['id']&&_0x26c9de['gridRow']===_0xddf14d[_0x4c42dd(0x214)]);_0xc5ba42[_0x4c42dd(0x192)]((_0x3fa393,_0x40e324)=>Math[_0x4c42dd(0x20c)](_0x3fa393['gridCol']-_0xddf14d[_0x4c42dd(0x1c1)])-Math[_0x4c42dd(0x20c)](_0x40e324['gridCol']-_0xddf14d[_0x4c42dd(0x1c1)]));for(let _0x2e13c3=0x0;_0x2e13c3<_0xc5ba42[_0x4c42dd(0x18d)]&&_0x2e183d[_0x4c42dd(0x18d)]<_0xdd9d7b;_0x2e13c3++){_0x2e183d[_0x4c42dd(0x238)](_0xc5ba42[_0x2e13c3]);}if(_0x2e183d['length']===_0xdd9d7b){_0x27594c=_0x2e183d,_0x3dfacf=!![],_0x51610c=!![];break;}}!_0x51610c&&_0x152bc5[_0x4c42dd(0x18d)]>=_0xdd9d7b&&(_0x27594c=_0x152bc5['slice'](0x0,_0xdd9d7b),_0x3dfacf=!![]);}}if(!_0x3dfacf&&_0x3cfe2d['length']>0x0){const _0xcd429f=_0x3cfe2d[0x0];_0x27594c[_0x4c42dd(0x238)](_0xcd429f);if(_0x3cfe2d[_0x4c42dd(0x18d)]>0x1&&!_0xcc629&&Math[_0x4c42dd(0x21a)]()<0.2){const _0x516168=_0x3cfe2d[_0x4c42dd(0x26d)](_0x51b11c=>_0x51b11c['id']!==_0xcd429f['id']&&_0x51b11c[_0x4c42dd(0x214)]===_0xcd429f[_0x4c42dd(0x214)]&&_0x51b11c[_0x4c42dd(0x1c1)]===_0xcd429f[_0x4c42dd(0x1c1)]-0x1),_0x2c80ba=_0x3cfe2d[_0x4c42dd(0x26d)](_0x141e8e=>_0x141e8e['id']!==_0xcd429f['id']&&_0x141e8e[_0x4c42dd(0x214)]===_0xcd429f[_0x4c42dd(0x214)]&&_0x141e8e[_0x4c42dd(0x1c1)]===_0xcd429f[_0x4c42dd(0x1c1)]+0x1),_0xa55da7=_0x516168||_0x2c80ba;if(_0xa55da7){const _0x442a03=_0xcd429f['type']===ENEMY3_TYPE&&_0xa55da7[_0x4c42dd(0x278)]===ENEMY3_TYPE;!_0x442a03&&_0x27594c[_0x4c42dd(0x238)](_0xa55da7);}}_0x3dfacf=!![];}if(_0x27594c['length']>0x0){_0x27594c=_0x27594c[_0x4c42dd(0x26a)](_0x20586b=>_0x20586b);if(_0x27594c[_0x4c42dd(0x18d)]===0x0)return null;_0x27594c['forEach'](_0x335c7b=>{_0x335c7b&&(_0x335c7b['justReturned']=!![],_0x335c7b['attackType']=_0x51a9bc);});const _0xaa3fbb=new Set(_0x27594c[_0x4c42dd(0x1f8)](_0x40d916=>_0x40d916['id']));return resetJustReturnedFlags(_0xaa3fbb),_0x27594c;}return null;}catch(_0x5e7164){return console[_0x4c42dd(0x20a)](_0x4c42dd(0x17f),_0x5e7164),null;}}function triggerImmediateCaptureDive(){const _0x87019f=_0xca07;try{if(playerLives<=0x1||isChallengingStage||isShipCaptured||isDualShipActive||captureAttemptMadeThisLevel)return;const _0x505d68=enemies[_0x87019f(0x26a)](_0x5d01ea=>_0x5d01ea&&_0x5d01ea[_0x87019f(0x1dc)]===_0x87019f(0x23d)&&_0x5d01ea['type']===ENEMY3_TYPE&&!_0x5d01ea[_0x87019f(0x195)]);if(_0x505d68[_0x87019f(0x18d)]>0x0){const _0xf327cc=_0x505d68[Math[_0x87019f(0x21b)](Math[_0x87019f(0x21a)]()*_0x505d68['length'])],_0xd84d37=Date[_0x87019f(0x21f)]();captureAttemptMadeThisLevel=!![],_0xf327cc[_0x87019f(0x1fb)]=!![];const _0x23414b=new Set([_0xf327cc['id']]);resetJustReturnedFlags(_0x23414b);const _0x48af51=Math[_0x87019f(0x21a)]()<0.5?_0x87019f(0x1f2):_0x87019f(0x1ab),_0x577f42=_0x48af51==='left'?gameCanvas[_0x87019f(0x1a8)]*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas['width']*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x3e9bcf=gameCanvas[_0x87019f(0x267)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0xf327cc[_0x87019f(0x1dc)]=_0x87019f(0x1ed),_0xf327cc['targetX']=_0x577f42,_0xf327cc['targetY']=_0x3e9bcf,_0xf327cc[_0x87019f(0x1ae)]=_0xd84d37,playSound(bossGalagaDiveSound);const _0x585a53=_0xf327cc['id'];_0xf327cc['capturePrepareTimeout']=setTimeout(()=>{const _0xcb6ce1=_0x87019f,_0x551acc=enemies[_0xcb6ce1(0x26d)](_0x4a36be=>_0x4a36be?.['id']===_0x585a53);_0x551acc&&_0x551acc['state']===_0xcb6ce1(0x1ed)&&(_0x551acc[_0xcb6ce1(0x1dc)]='diving_to_capture_position');if(_0x551acc)_0x551acc[_0xcb6ce1(0x252)]=null;const _0x177218=enemySpawnTimeouts['findIndex'](_0x5c8053=>_0x5c8053===_0xf327cc['capturePrepareTimeout']);if(_0x177218>-0x1)enemySpawnTimeouts[_0xcb6ce1(0x275)](_0x177218,0x1);},0x12c),enemySpawnTimeouts[_0x87019f(0x238)](_0xf327cc['capturePrepareTimeout']);}}catch(_0x502e98){console[_0x87019f(0x20a)]('Error\x20in\x20triggerImmediateCaptureDive:',_0x502e98);}}function resetJustReturnedFlags(_0x2920f0){const _0x3c1099=_0xca07;enemies[_0x3c1099(0x19e)](_0x17e2be=>{const _0x57caf3=_0x3c1099;let _0x37e4a4=![];if(_0x2920f0 instanceof Set)_0x37e4a4=_0x2920f0['has'](_0x17e2be['id']);else typeof _0x2920f0===_0x57caf3(0x220)&&(_0x37e4a4=_0x17e2be['id']===_0x2920f0);_0x17e2be&&_0x17e2be[_0x57caf3(0x1dc)]===_0x57caf3(0x23d)&&_0x17e2be['justReturned']&&!_0x37e4a4&&(_0x17e2be[_0x57caf3(0x1fb)]=![]);});}function updateFloatingScores(){const _0x548e24=_0xca07;if(isPaused)return;try{const _0x133d64=Date[_0x548e24(0x21f)]();floatingScores=floatingScores[_0x548e24(0x26a)](_0x506a7a=>_0x133d64-_0x506a7a['creationTime']<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x185cd3){console['error'](_0x548e24(0x1e3),_0x185cd3),floatingScores=[];}}function updateExplosions(){const _0x332503=_0xca07;if(isPaused)return;try{const _0x2fb67e=Date[_0x332503(0x21f)]();for(let _0x1ced61=explosions[_0x332503(0x18d)]-0x1;_0x1ced61>=0x0;_0x1ced61--){const _0x301e3d=explosions[_0x1ced61],_0x445edb=_0x2fb67e-_0x301e3d[_0x332503(0x1f3)];if(_0x445edb>_0x301e3d[_0x332503(0x1a6)]){explosions[_0x332503(0x275)](_0x1ced61,0x1);continue;}_0x301e3d[_0x332503(0x1e7)][_0x332503(0x19e)](_0x3ab160=>{const _0x17ab68=_0x332503;_0x3ab160['x']+=_0x3ab160['vx'],_0x3ab160['y']+=_0x3ab160['vy'],_0x3ab160[_0x17ab68(0x25e)]=Math[_0x17ab68(0x1d7)](0x0,0x1-_0x445edb/_0x301e3d['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0xf5c5ed){console[_0x332503(0x20a)](_0x332503(0x1b5),_0xf5c5ed),explosions=[];}}function moveEntities(){const _0x1b1853=_0xca07;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x4732f7=ship[_0x1b1853(0x1a8)];isDualShipActive&&(_0x4732f7+=DUAL_SHIP_OFFSET_X);let _0x4876d6=ship['x'];if(isManualControl){let _0x2b9b0e=![],_0xb8e8d8=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x2b9b0e=leftPressed,_0xb8e8d8=rightPressed):(_0x2b9b0e=p2LeftPressed,_0xb8e8d8=p2RightPressed);if(_0x2b9b0e&&ship['x']>0x0)_0x4876d6=ship['x']-ship['speed'];else _0xb8e8d8&&ship['x']<gameCanvas[_0x1b1853(0x1a8)]-_0x4732f7&&(_0x4876d6=ship['x']+ship['speed']);ship['x']=Math[_0x1b1853(0x1d7)](0x0,Math[_0x1b1853(0x1bb)](gameCanvas[_0x1b1853(0x1a8)]-_0x4732f7,_0x4876d6)),ship[_0x1b1853(0x22c)]=ship['x'];}else{if(typeof smoothedShipX!==_0x1b1853(0x1c9)){const _0x3d1e71=0.1,_0x4b52c0=1.2;smoothedShipX+=(ship[_0x1b1853(0x22c)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0xbcde87=smoothedShipX-ship['x'],_0x31a0a3=ship[_0x1b1853(0x19a)]*_0x4b52c0;let _0x4d6266=0x0;if(Math[_0x1b1853(0x20c)](_0xbcde87)>_0x3d1e71){const _0x5baec0=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x4d6266=_0xbcde87*_0x5baec0,_0x4d6266=Math[_0x1b1853(0x1d7)](-_0x31a0a3,Math['min'](_0x31a0a3,_0x4d6266)),Math['abs'](_0x4d6266)>Math[_0x1b1853(0x20c)](_0xbcde87)&&(_0x4d6266=_0xbcde87),ship['x']+=_0x4d6266,ship['x']=Math['max'](0x0,Math[_0x1b1853(0x1bb)](gameCanvas[_0x1b1853(0x1a8)]-_0x4732f7,ship['x']));}}else ship['x']=Math[_0x1b1853(0x1d7)](0x0,Math[_0x1b1853(0x1bb)](gameCanvas[_0x1b1853(0x1a8)]-_0x4732f7,ship[_0x1b1853(0x22c)]));}}const _0x4ab34e=Date[_0x1b1853(0x21f)]();for(let _0x3ec527=bullets[_0x1b1853(0x18d)]-0x1;_0x3ec527>=0x0;_0x3ec527--){const _0x432ec6=bullets[_0x3ec527];_0x432ec6?(_0x432ec6['y']-=_0x432ec6[_0x1b1853(0x19a)],_0x432ec6['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x1b1853(0x275)](_0x3ec527,0x1)):bullets[_0x1b1853(0x275)](_0x3ec527,0x1);}for(let _0x687612=enemyBullets[_0x1b1853(0x18d)]-0x1;_0x687612>=0x0;_0x687612--){const _0x26ea3f=enemyBullets[_0x687612];if(!_0x26ea3f){enemyBullets[_0x1b1853(0x275)](_0x687612,0x1);continue;}_0x26ea3f['x']+=_0x26ea3f['vx'],_0x26ea3f['y']+=_0x26ea3f['vy'],(_0x26ea3f['y']>gameCanvas[_0x1b1853(0x267)]||_0x26ea3f['y']<-ENEMY_BULLET_HEIGHT||_0x26ea3f['x']<-ENEMY_BULLET_WIDTH||_0x26ea3f['x']>gameCanvas['width'])&&enemyBullets[_0x1b1853(0x275)](_0x687612,0x1);}for(let _0x57ec7e=fallingShips[_0x1b1853(0x18d)]-0x1;_0x57ec7e>=0x0;_0x57ec7e--){const _0x1bd4cc=fallingShips[_0x57ec7e];if(!_0x1bd4cc){fallingShips[_0x1b1853(0x275)](_0x57ec7e,0x1);continue;}_0x1bd4cc['y']+=FALLING_SHIP_SPEED;const _0x317d3e=_0x4ab34e-_0x1bd4cc[_0x1b1853(0x1f3)];typeof _0x1bd4cc[_0x1b1853(0x187)]===_0x1b1853(0x25a)?_0x1bd4cc['tintProgress']=Math['max'](0x0,0x1-_0x317d3e/FALLING_SHIP_FADE_DURATION_MS):_0x1bd4cc[_0x1b1853(0x187)]=0x0;if(typeof _0x1bd4cc['rotation']===_0x1b1853(0x25a)){const _0x5ab0e6=Math[_0x1b1853(0x1bb)](0x1,_0x317d3e/FALLING_SHIP_ROTATION_DURATION_MS);_0x1bd4cc[_0x1b1853(0x21e)]=_0x5ab0e6*0x2*(0x2*Math['PI']);}else _0x1bd4cc[_0x1b1853(0x21e)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x1bd4cc['y']+_0x1bd4cc[_0x1b1853(0x267)]>=gameCanvas[_0x1b1853(0x267)]-AUTO_DOCK_THRESHOLD){fallingShips[_0x1b1853(0x275)](_0x57ec7e,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x1bd4cc['y']>gameCanvas[_0x1b1853(0x267)]+_0x1bd4cc[_0x1b1853(0x267)]&&fallingShips['splice'](_0x57ec7e,0x1);}let _0x7a6f48=0x0;const _0x4d37b1=enemies[_0x1b1853(0x215)](_0x286b5d=>_0x286b5d?.[_0x1b1853(0x1dc)]==='in_grid'),_0xc15fd9=!isChallengingStage&&!isWaveTransitioning&&_0x4d37b1&&!isShowingPlayerGameOverMessage;if(_0xc15fd9){!isGridSoundPlaying&&playSound(gridBackgroundSound,!![]);const _0xa44ee1=enemies[_0x1b1853(0x26a)](_0x3f96cc=>_0x3f96cc?.[_0x1b1853(0x1dc)]==='in_grid');if(_0xa44ee1[_0x1b1853(0x18d)]>0x0){let _0xea8cba=gameCanvas[_0x1b1853(0x1a8)],_0x499f7e=0x0;_0xa44ee1[_0x1b1853(0x19e)](_0x2b861f=>{const _0x17016a=_0x1b1853;_0x2b861f&&(_0xea8cba=Math[_0x17016a(0x1bb)](_0xea8cba,_0x2b861f['x']),_0x499f7e=Math[_0x17016a(0x1d7)](_0x499f7e,_0x2b861f['x']+_0x2b861f[_0x17016a(0x1a8)]));});const _0x3d0509=gameCanvas[_0x1b1853(0x1a8)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x2fe227=gameCanvas[_0x1b1853(0x1a8)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x499f7e>=_0x2fe227)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0xea8cba<=_0x3d0509&&(gridMoveDirection=0x1);const _0x314c9c=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x7a6f48=_0x314c9c*gridMoveDirection,currentGridOffsetX+=_0x7a6f48,enemies['forEach'](_0x4585bf=>{const _0x41e2fc=_0x1b1853;if(_0x4585bf&&(_0x4585bf[_0x41e2fc(0x1dc)]===_0x41e2fc(0x1fe)||_0x4585bf['state']===_0x41e2fc(0x23d)||_0x4585bf[_0x41e2fc(0x1dc)]===_0x41e2fc(0x1e0)))try{const _0x31403c=_0x4585bf[_0x41e2fc(0x278)]===ENEMY3_TYPE?BOSS_WIDTH:_0x4585bf['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x55bfc0,y:_0x4c0155}=getCurrentGridSlotPosition(_0x4585bf['gridRow'],_0x4585bf[_0x41e2fc(0x1c1)],_0x31403c);_0x4585bf[_0x41e2fc(0x194)]=_0x55bfc0,_0x4585bf[_0x41e2fc(0x265)]=_0x4c0155;}catch(_0x100ecf){console[_0x41e2fc(0x20a)](_0x41e2fc(0x20b)+_0x4585bf?.['id']+'\x20(state:\x20'+_0x4585bf?.['state']+_0x41e2fc(0x1b6),_0x100ecf);}});}}else isGridSoundPlaying&&!isChallengingStage&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x7a6f48=0x0;for(let _0x2ffd85=enemies[_0x1b1853(0x18d)]-0x1;_0x2ffd85>=0x0;_0x2ffd85--){let _0x23cffe=enemies[_0x2ffd85];if(!_0x23cffe)continue;const _0x115e20=_0x23cffe['id'];if(_0x23cffe[_0x1b1853(0x252)]&&_0x23cffe[_0x1b1853(0x1dc)]!==_0x1b1853(0x1ed)){clearTimeout(_0x23cffe['capturePrepareTimeout']);const _0x16c6ad=enemySpawnTimeouts[_0x1b1853(0x26e)](_0x23cffe[_0x1b1853(0x252)]);if(_0x16c6ad>-0x1)enemySpawnTimeouts[_0x1b1853(0x275)](_0x16c6ad,0x1);_0x23cffe[_0x1b1853(0x252)]=null;}const _0x148227=_0x23cffe[_0x1b1853(0x278)]===ENEMY3_TYPE?BOSS_WIDTH:_0x23cffe[_0x1b1853(0x278)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x4d53c1=_0x23cffe[_0x1b1853(0x278)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x23cffe['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x23cffe[_0x1b1853(0x1dc)]){case _0x1b1853(0x1a5):{if(isEntrancePhaseActive&&!isChallengingStage)break;const _0x1880a8=challengingStagePaths[_0x23cffe[_0x1b1853(0x277)]];if(!_0x1880a8||_0x1880a8[_0x1b1853(0x18d)]===0x0){console[_0x1b1853(0x20a)]('CS\x20Enemy\x20'+_0x115e20+_0x1b1853(0x1a1)+_0x23cffe['entrancePathId']+_0x1b1853(0x1cb)),enemies[_0x1b1853(0x275)](_0x2ffd85,0x1);continue;}if(_0x23cffe[_0x1b1853(0x209)]>=_0x1880a8[_0x1b1853(0x18d)]){console[_0x1b1853(0x20f)](_0x1b1853(0x25f)+_0x115e20+_0x1b1853(0x24d)+_0x23cffe[_0x1b1853(0x209)]+_0x1b1853(0x217)),enemies['splice'](_0x2ffd85,0x1);continue;}const _0x4df107=_0x1880a8[_0x23cffe[_0x1b1853(0x209)]];if(!_0x4df107?.['p0']){console[_0x1b1853(0x20a)]('CS\x20Enemy\x20'+_0x115e20+_0x1b1853(0x205)+_0x23cffe[_0x1b1853(0x209)]+_0x1b1853(0x1cb)),enemies[_0x1b1853(0x275)](_0x2ffd85,0x1);continue;}const _0x39ca69=_0x23cffe[_0x1b1853(0x1d2)]||0x1,_0x421acd=CS_ENTRANCE_PATH_SPEED*_0x39ca69;_0x23cffe['pathT']+=_0x421acd;let _0x55e8d8,_0x27b35c;const _0xf448b=_0x23cffe['x'],_0x7b87f1=_0x23cffe['y'];if(_0x23cffe[_0x1b1853(0x19b)]>=0x1){_0x55e8d8=calculateBezierPoint(0x1,_0x4df107['p0']['x'],_0x4df107['p1']['x'],_0x4df107['p2']['x'],_0x4df107['p3']['x']),_0x27b35c=calculateBezierPoint(0x1,_0x4df107['p0']['y'],_0x4df107['p1']['y'],_0x4df107['p2']['y'],_0x4df107['p3']['y']),_0x23cffe[_0x1b1853(0x19b)]=0x0,_0x23cffe[_0x1b1853(0x209)]++;if(_0x23cffe[_0x1b1853(0x209)]>=_0x1880a8[_0x1b1853(0x18d)]){enemies['splice'](_0x2ffd85,0x1);continue;}}else _0x55e8d8=calculateBezierPoint(_0x23cffe[_0x1b1853(0x19b)],_0x4df107['p0']['x'],_0x4df107['p1']['x'],_0x4df107['p2']['x'],_0x4df107['p3']['x']),_0x27b35c=calculateBezierPoint(_0x23cffe[_0x1b1853(0x19b)],_0x4df107['p0']['y'],_0x4df107['p1']['y'],_0x4df107['p2']['y'],_0x4df107['p3']['y']);_0x23cffe['velocityX']=_0x55e8d8-_0xf448b,_0x23cffe[_0x1b1853(0x197)]=_0x27b35c-_0x7b87f1,_0x23cffe['x']=_0x55e8d8,_0x23cffe['y']=_0x27b35c;const _0x1fe1cd=Math[_0x1b1853(0x1d7)](_0x148227,_0x4d53c1)*2.5;let _0x5af1bf=_0x23cffe['y']>gameCanvas[_0x1b1853(0x267)]+_0x1fe1cd||_0x23cffe['y']<-_0x1fe1cd||_0x23cffe['x']<-_0x1fe1cd||_0x23cffe['x']>gameCanvas[_0x1b1853(0x1a8)]+_0x1fe1cd;if(_0x5af1bf&&_0x23cffe[_0x1b1853(0x209)]>0x0){enemies[_0x1b1853(0x275)](_0x2ffd85,0x1);continue;}break;}case'following_entrance_path':{if(isChallengingStage)break;const _0x205caa=normalWaveEntrancePaths[_0x23cffe['entrancePathId']];if(!_0x205caa||_0x205caa['length']===0x0){console[_0x1b1853(0x20a)](_0x1b1853(0x1b8)+_0x115e20+'\x20following\x20invalid\x20path\x20'+_0x23cffe[_0x1b1853(0x277)]+_0x1b1853(0x18c)),_0x23cffe[_0x1b1853(0x1dc)]=_0x1b1853(0x1e0);break;}if(_0x23cffe[_0x1b1853(0x209)]>=_0x205caa[_0x1b1853(0x18d)]){_0x23cffe['state']='moving_to_grid';break;}const _0x2b6335=_0x205caa[_0x23cffe[_0x1b1853(0x209)]];if(!_0x2b6335?.['p0']){console[_0x1b1853(0x20a)]('Enemy\x20'+_0x115e20+'\x20has\x20invalid\x20segment\x20'+_0x23cffe[_0x1b1853(0x209)]+_0x1b1853(0x18c)),_0x23cffe[_0x1b1853(0x1dc)]=_0x1b1853(0x1e0);break;}let _0x15f9b5=0x1;(_0x23cffe[_0x1b1853(0x277)]==='boss_loop_left'||_0x23cffe[_0x1b1853(0x277)]===_0x1b1853(0x1e5))&&(_0x15f9b5=BOSS_LOOP_ENTRANCE_PATH_SPEED/NORMAL_ENTRANCE_PATH_SPEED);const _0xb1a478=NORMAL_ENTRANCE_PATH_SPEED*_0x15f9b5;_0x23cffe[_0x1b1853(0x19b)]+=_0xb1a478;let _0x5aac5d,_0x4c6738;const _0xa4b507=_0x23cffe['x'],_0x102cf4=_0x23cffe['y'];_0x23cffe[_0x1b1853(0x19b)]>=0x1?(_0x5aac5d=calculateBezierPoint(0x1,_0x2b6335['p0']['x'],_0x2b6335['p1']['x'],_0x2b6335['p2']['x'],_0x2b6335['p3']['x']),_0x4c6738=calculateBezierPoint(0x1,_0x2b6335['p0']['y'],_0x2b6335['p1']['y'],_0x2b6335['p2']['y'],_0x2b6335['p3']['y']),_0x23cffe[_0x1b1853(0x19b)]=0x0,_0x23cffe['pathSegmentIndex']++,_0x23cffe[_0x1b1853(0x209)]>=_0x205caa['length']&&(_0x23cffe[_0x1b1853(0x1dc)]=_0x1b1853(0x1e0),_0x23cffe['x']=_0x5aac5d,_0x23cffe['y']=_0x4c6738)):(_0x5aac5d=calculateBezierPoint(_0x23cffe['pathT'],_0x2b6335['p0']['x'],_0x2b6335['p1']['x'],_0x2b6335['p2']['x'],_0x2b6335['p3']['x']),_0x4c6738=calculateBezierPoint(_0x23cffe[_0x1b1853(0x19b)],_0x2b6335['p0']['y'],_0x2b6335['p1']['y'],_0x2b6335['p2']['y'],_0x2b6335['p3']['y']));if(_0x23cffe['state']===_0x1b1853(0x1fa)){let _0x5d2f62=_0x5aac5d;const _0x3ee24e=currentWavePatternIndex===0x1&&(_0x23cffe['squadronId']===0x2||_0x23cffe[_0x1b1853(0x1a7)]===0x3),_0x56f3cc=typeof _0x23cffe[_0x1b1853(0x184)]===_0x1b1853(0x25a)&&_0x23cffe[_0x1b1853(0x184)]%0x2!==0x0;if(_0x3ee24e&&_0x56f3cc){let _0x181a33=0x1;_0x23cffe[_0x1b1853(0x277)]&&_0x23cffe[_0x1b1853(0x277)][_0x1b1853(0x256)]()[_0x1b1853(0x1ad)]('left')&&(_0x181a33=-0x1);const _0x1b3611=_0x148227/0x2+ENTRANCE_PAIR_HORIZONTAL_GAP/0x2;_0x5d2f62=_0x5aac5d+_0x1b3611*_0x181a33;}_0x23cffe[_0x1b1853(0x1c2)]=_0x5d2f62-_0xa4b507,_0x23cffe[_0x1b1853(0x197)]=_0x4c6738-_0x102cf4,_0x23cffe['x']=_0x5d2f62,_0x23cffe['y']=_0x4c6738;}break;}case _0x1b1853(0x1e0):{if(_0x23cffe[_0x1b1853(0x194)]==null||_0x23cffe[_0x1b1853(0x265)]==null){console[_0x1b1853(0x20f)](_0x1b1853(0x1b8)+_0x115e20+_0x1b1853(0x182));try{const {x:_0xefc25e,y:_0x4047c7}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe['gridCol'],_0x148227);_0x23cffe[_0x1b1853(0x194)]=_0xefc25e,_0x23cffe[_0x1b1853(0x265)]=_0x4047c7;}catch(_0x33e00f){console[_0x1b1853(0x20a)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x115e20+_0x1b1853(0x188),_0x33e00f),_0x23cffe[_0x1b1853(0x1dc)]=_0x1b1853(0x23d),_0x23cffe['x']=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe['y']=ENEMY_TOP_MARGIN;break;}}const _0x139848=_0x23cffe[_0x1b1853(0x194)],_0x514a01=_0x23cffe['targetGridY'],_0x198178=_0x139848-_0x23cffe['x'],_0x1cf3d9=_0x514a01-_0x23cffe['y'],_0x14bb9e=Math[_0x1b1853(0x1db)](_0x198178*_0x198178+_0x1cf3d9*_0x1cf3d9),_0x5e901f=ENTRANCE_SPEED*1.2,_0x4c824b=_0x5e901f*0.5;if(_0x14bb9e>_0x4c824b)_0x23cffe['velocityX']=_0x198178/_0x14bb9e*_0x5e901f,_0x23cffe['velocityY']=_0x1cf3d9/_0x14bb9e*_0x5e901f,_0x23cffe['x']+=_0x23cffe[_0x1b1853(0x1c2)],_0x23cffe['y']+=_0x23cffe[_0x1b1853(0x197)];else{_0x23cffe['x']=_0x139848,_0x23cffe['y']=_0x514a01,_0x23cffe['velocityX']=0x0,_0x23cffe[_0x1b1853(0x197)]=0x0;const _0x78cc68=_0x23cffe[_0x1b1853(0x1dc)];_0x23cffe[_0x1b1853(0x1dc)]='in_grid',_0x23cffe[_0x1b1853(0x1fb)]=![];!isGridSoundPlaying&&!isChallengingStage&&playSound(gridBackgroundSound,!![]);GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x4ab34e,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x1b1853(0x21f)](),firstEnemyLanded=!![]);if(_0x78cc68===_0x1b1853(0x1e0)&&!isChallengingStage&&!isFullGridWave&&_0x23cffe[_0x1b1853(0x1a7)]!==undefined){const _0x5beaee=_0x23cffe[_0x1b1853(0x1a7)],_0x230b6b=squadronCompletionStatus[_0x5beaee];if(_0x230b6b&&!_0x230b6b['hasFiredPostLanding']){const _0x3957b5=enemies[_0x1b1853(0x1c5)](_0x1334cb=>{const _0x168c51=_0x1b1853;if(_0x1334cb&&_0x1334cb['squadronId']===_0x5beaee)return _0x1334cb[_0x168c51(0x1dc)]==='in_grid'||!enemies[_0x168c51(0x215)](_0x35fb30=>_0x35fb30['id']===_0x1334cb['id']);return!![];});if(_0x3957b5){_0x230b6b[_0x1b1853(0x260)]=!![];const _0x2e9f10=enemies[_0x1b1853(0x26a)](_0x41b0dd=>_0x41b0dd&&_0x41b0dd[_0x1b1853(0x1a7)]===_0x5beaee&&_0x41b0dd[_0x1b1853(0x1dc)]===_0x1b1853(0x23d)&&(_0x41b0dd[_0x1b1853(0x278)]===ENEMY2_TYPE||_0x41b0dd[_0x1b1853(0x278)]===ENEMY3_TYPE)&&!(_0x41b0dd['type']===ENEMY3_TYPE&&_0x41b0dd['hasCapturedShip']));if(_0x2e9f10['length']>0x0){const _0x34033c=_0x2e9f10[Math[_0x1b1853(0x21b)](Math[_0x1b1853(0x21a)]()*_0x2e9f10[_0x1b1853(0x18d)])],_0x3d8efc=_0x34033c['id'],_0x5ee5ce=0xc8+Math['random']()*0x190,_0x54d11a=setTimeout(()=>{const _0x3df74f=_0x1b1853;try{const _0x5a2b94=enemySpawnTimeouts[_0x3df74f(0x26e)](_0x54d11a);if(_0x5a2b94>-0x1)enemySpawnTimeouts[_0x3df74f(0x275)](_0x5a2b94,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0xd0f62a=enemies['find'](_0xdae50b=>_0xdae50b&&_0xdae50b['id']===_0x3d8efc);_0xd0f62a&&_0xd0f62a['state']===_0x3df74f(0x23d)&&(createBulletSimple(_0xd0f62a)&&(playSound(enemyShootSound),_0xd0f62a[_0x3df74f(0x269)]=Date['now']()));}catch(_0x4bf93d){console[_0x3df74f(0x20a)]('Error\x20during\x20post-landing\x20fire\x20for\x20'+_0x3d8efc+':',_0x4bf93d);}},_0x5ee5ce);enemySpawnTimeouts['push'](_0x54d11a);}}}}}break;}case _0x1b1853(0x23d):{try{const _0x1fb7f0=_0x23cffe['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x23cffe[_0x1b1853(0x278)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x4c1c09,y:_0x5555ee}=getCurrentGridSlotPosition(_0x23cffe['gridRow'],_0x23cffe[_0x1b1853(0x1c1)],_0x1fb7f0);typeof _0x4c1c09===_0x1b1853(0x25a)&&!isNaN(_0x4c1c09)&&(_0x23cffe['x']=_0x4c1c09),typeof _0x5555ee===_0x1b1853(0x25a)&&!isNaN(_0x5555ee)&&(_0x23cffe['y']=_0x5555ee),_0x23cffe['targetGridX']=_0x4c1c09,_0x23cffe[_0x1b1853(0x265)]=_0x5555ee;}catch(_0x365f87){console[_0x1b1853(0x20a)]('Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20'+_0x23cffe['id']+':',_0x365f87);}_0x23cffe[_0x1b1853(0x1c2)]=_0xc15fd9?_0x7a6f48:0x0,_0x23cffe[_0x1b1853(0x197)]=0x0;_0x23cffe[_0x1b1853(0x278)]===ENEMY3_TYPE&&_0x23cffe['hasCapturedShip']&&_0x23cffe['capturedShipDimensions']&&(_0x23cffe[_0x1b1853(0x1c3)]=_0x23cffe['x']+CAPTURED_SHIP_OFFSET_X,_0x23cffe[_0x1b1853(0x271)]=_0x23cffe['y']+CAPTURED_SHIP_OFFSET_Y);break;}case'preparing_attack':{_0x23cffe[_0x1b1853(0x1c2)]=0x0,_0x23cffe[_0x1b1853(0x197)]=0x0;break;}case _0x1b1853(0x1ed):{_0x23cffe[_0x1b1853(0x1c2)]=0x0,_0x23cffe[_0x1b1853(0x197)]=0x0;break;}case _0x1b1853(0x1ee):{if(isShipCaptured){_0x23cffe['state']=_0x1b1853(0x1fe);try{const {x:_0x23d243,y:_0x257106}=getCurrentGridSlotPosition(_0x23cffe['gridRow'],_0x23cffe['gridCol'],_0x148227);_0x23cffe['targetGridX']=_0x23d243,_0x23cffe['targetGridY']=_0x257106;}catch(_0x43c1a4){console[_0x1b1853(0x20a)](_0x1b1853(0x201)+_0x23cffe['id']+':',_0x43c1a4),_0x23cffe[_0x1b1853(0x194)]=gameCanvas['width']/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}break;}const _0x44a13a=_0x23cffe[_0x1b1853(0x22c)],_0x5d6f32=_0x23cffe[_0x1b1853(0x1b2)];if(_0x44a13a==null||_0x5d6f32==null){console['error'](_0x1b1853(0x233)+_0x23cffe['id']+'\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.'),_0x23cffe['state']='returning';try{const {x:_0xc579cd,y:_0x112f6b}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe['gridCol'],_0x148227);_0x23cffe[_0x1b1853(0x194)]=_0xc579cd,_0x23cffe[_0x1b1853(0x265)]=_0x112f6b;}catch(_0x1a9e75){console['error'](_0x1b1853(0x201)+_0x23cffe['id']+':',_0x1a9e75),_0x23cffe['targetGridX']=gameCanvas['width']/0x2,_0x23cffe['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x3885bc=_0x44a13a-_0x23cffe['x'],_0x4fa90e=_0x5d6f32-_0x23cffe['y'],_0x3a828c=Math[_0x1b1853(0x1db)](_0x3885bc*_0x3885bc+_0x4fa90e*_0x4fa90e),_0x24f27e=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x229ac4=_0x24f27e*0.6;_0x3a828c>_0x229ac4?(_0x23cffe['velocityX']=_0x3885bc/_0x3a828c*_0x24f27e,_0x23cffe['velocityY']=_0x4fa90e/_0x3a828c*_0x24f27e,_0x23cffe['x']+=_0x23cffe[_0x1b1853(0x1c2)],_0x23cffe['y']+=_0x23cffe[_0x1b1853(0x197)]):(_0x23cffe['x']=_0x44a13a,_0x23cffe['y']=_0x5d6f32,_0x23cffe[_0x1b1853(0x1c2)]=0x0,_0x23cffe[_0x1b1853(0x197)]=0x0,_0x23cffe[_0x1b1853(0x1dc)]='capturing',_0x23cffe[_0x1b1853(0x231)]=_0x4ab34e,capturingBossId=_0x23cffe['id'],captureBeamActive=!![],captureBeamSource={'x':_0x23cffe['x']+_0x148227/0x2,'y':_0x23cffe['y']+_0x4d53c1},captureBeamTargetY=_0x23cffe['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case _0x1b1853(0x193):{_0x23cffe['velocityX']=0x0,_0x23cffe[_0x1b1853(0x197)]=0x0;if(isShipCaptured&&_0x23cffe['id']!==capturedBossIdWithMessage){captureBeamActive=![];if(capturingBossId===_0x23cffe['id'])capturingBossId=null;_0x23cffe[_0x1b1853(0x1dc)]='returning',stopSound(captureSound);try{const {x:_0x384310,y:_0x5945c5}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe['targetGridX']=_0x384310,_0x23cffe['targetGridY']=_0x5945c5;}catch(_0x35a786){console[_0x1b1853(0x20a)](_0x1b1853(0x201)+_0x23cffe['id']+':',_0x35a786),_0x23cffe[_0x1b1853(0x194)]=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}break;}const _0x495a3a=_0x4ab34e-_0x23cffe[_0x1b1853(0x231)],_0x17c7e6=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x494f70=CAPTURE_BEAM_DURATION_MS;if(_0x495a3a<_0x17c7e6)captureBeamProgress=_0x495a3a/_0x17c7e6;else{if(_0x495a3a<_0x494f70-_0x17c7e6)captureBeamProgress=0x1;else{if(_0x495a3a<_0x494f70)captureBeamProgress=0x1-(_0x495a3a-(_0x494f70-_0x17c7e6))/_0x17c7e6;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x23cffe['state']=_0x1b1853(0x1e4),_0x23cffe[_0x1b1853(0x249)]=generateAttackPath(_0x23cffe),_0x23cffe[_0x1b1853(0x18e)]=0x0,_0x23cffe[_0x1b1853(0x23e)]=0x0,_0x23cffe['speed']=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x23cffe[_0x1b1853(0x269)]=0x0,_0x23cffe[_0x1b1853(0x1c0)]=!![],_0x23cffe[_0x1b1853(0x24f)]=0x0,_0x23cffe[_0x1b1853(0x1df)]=null;break;}}}captureBeamProgress=Math['max'](0x0,Math[_0x1b1853(0x1bb)](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x26b116=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x381fad=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x58ff6e=_0x23cffe['x']+_0x148227/0x2,_0x14c3a3=_0x23cffe['y']+_0x4d53c1,_0x161667=gameCanvas[_0x1b1853(0x267)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x388555=Math[_0x1b1853(0x1d7)](_0x26b116,_0x381fad),_0x4d9f00=_0x58ff6e-_0x388555/0x2,_0x216cba=_0x14c3a3,_0x5d2bc2=_0x161667-_0x14c3a3;if(_0x5d2bc2>0x0){const _0x3c58ab={'x':_0x4d9f00,'y':_0x216cba,'width':_0x388555,'height':_0x5d2bc2},_0x56835e={'x':ship['x'],'y':ship['y'],'width':ship[_0x1b1853(0x1a8)],'height':ship['height']};if(checkCollision(_0x56835e,_0x3c58ab)){isShipCaptured=!![],_0x23cffe[_0x1b1853(0x22b)]={'width':ship[_0x1b1853(0x1a8)],'height':ship[_0x1b1853(0x267)]},_0x23cffe[_0x1b1853(0x195)]=!![],stopSound(captureSound),_0x23cffe[_0x1b1853(0x1dc)]='showing_capture_message',_0x23cffe[_0x1b1853(0x194)]=null,_0x23cffe['targetGridY']=null,_0x23cffe[_0x1b1853(0x212)]=ship['y'],_0x23cffe[_0x1b1853(0x251)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x4ab34e,capturedBossIdWithMessage=_0x23cffe['id'],playSound(shipCapturedSound);const _0x18b303=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x18b303===0x1)player1Lives=0x0;if(_0x18b303===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x4ab34e,playerWhoIsGameOver=_0x18b303;const _0x5d7c8c=_0x18b303===0x1?0x2:0x1,_0x3ee8e0=_0x5d7c8c===0x1?player1Lives:player2Lives;_0x3ee8e0>0x0?nextActionAfterPlayerGameOver=_0x1b1853(0x276):nextActionAfterPlayerGameOver=_0x1b1853(0x1cf);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x18b303===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x18b303===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x4ab34e+INVINCIBILITY_DURATION_MS;}}}else console[_0x1b1853(0x20f)](_0x1b1853(0x190),_0x5d2bc2);}break;}case'showing_capture_message':{_0x23cffe[_0x1b1853(0x1c2)]=0x0,_0x23cffe['velocityY']=0x0;if(_0x23cffe[_0x1b1853(0x195)]&&_0x23cffe[_0x1b1853(0x22b)]&&typeof _0x23cffe[_0x1b1853(0x212)]===_0x1b1853(0x25a)){const _0x19c0f1=_0x4ab34e-captureMessageStartTime,_0x35efbd=Math[_0x1b1853(0x1bb)](0x1,_0x19c0f1/CAPTURE_MESSAGE_DURATION),_0x4076c2=_0x23cffe['y']+CAPTURED_SHIP_OFFSET_Y,_0x33c3b9=_0x23cffe[_0x1b1853(0x212)];_0x23cffe[_0x1b1853(0x271)]=_0x33c3b9+(_0x4076c2-_0x33c3b9)*_0x35efbd,_0x23cffe[_0x1b1853(0x1c3)]=_0x23cffe['x']+CAPTURED_SHIP_OFFSET_X;}else _0x23cffe[_0x1b1853(0x1c3)]=_0x23cffe['x']+CAPTURED_SHIP_OFFSET_X,_0x23cffe[_0x1b1853(0x271)]=_0x23cffe['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x1b1853(0x1e4):{if(isEntrancePhaseActive)break;const _0x3538a4=_0x23cffe[_0x1b1853(0x249)],_0x220632=3.8;if(!_0x3538a4||_0x3538a4['length']===0x0){console['error'](_0x1b1853(0x1b8)+_0x115e20+'\x20attacking\x20without\x20path!\x20Returning.'),_0x23cffe['state']=_0x1b1853(0x1fe);try{const {x:_0x3b6982,y:_0x54052e}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe[_0x1b1853(0x194)]=_0x3b6982,_0x23cffe[_0x1b1853(0x265)]=_0x54052e;}catch(_0x76410c){console[_0x1b1853(0x20a)](_0x1b1853(0x263)+_0x115e20+_0x1b1853(0x1c4),_0x76410c),_0x23cffe[_0x1b1853(0x194)]=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}break;}if(_0x23cffe[_0x1b1853(0x18e)]>=_0x3538a4[_0x1b1853(0x18d)]){console['warn'](_0x1b1853(0x1b8)+_0x115e20+_0x1b1853(0x1f9)+_0x23cffe['attackPathSegmentIndex']+_0x1b1853(0x1eb)+_0x3538a4[_0x1b1853(0x18d)]+')!\x20Returning.'),_0x23cffe[_0x1b1853(0x1dc)]=_0x1b1853(0x1fe);try{const {x:_0x415571,y:_0x174f9a}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe[_0x1b1853(0x194)]=_0x415571,_0x23cffe[_0x1b1853(0x265)]=_0x174f9a;}catch(_0x500665){console[_0x1b1853(0x20a)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0x115e20+_0x1b1853(0x243),_0x500665),_0x23cffe[_0x1b1853(0x194)]=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}break;}const _0x338040=_0x3538a4[_0x23cffe['attackPathSegmentIndex']];if(!_0x338040||!_0x338040['p0']||!_0x338040['p1']||!_0x338040['p2']||!_0x338040['p3']){console[_0x1b1853(0x20a)]('Enemy\x20'+_0x115e20+_0x1b1853(0x248)+_0x23cffe[_0x1b1853(0x18e)]+_0x1b1853(0x255)),_0x23cffe[_0x1b1853(0x1dc)]='returning';try{const {x:_0x1f963c,y:_0x330539}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe[_0x1b1853(0x194)]=_0x1f963c,_0x23cffe['targetGridY']=_0x330539;}catch(_0x368a7c){console[_0x1b1853(0x20a)](_0x1b1853(0x263)+_0x115e20+_0x1b1853(0x1bc),_0x368a7c),_0x23cffe[_0x1b1853(0x194)]=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}break;}const _0x4e7f0a=_0x23cffe[_0x1b1853(0x19a)]/0x3e8*_0x220632;_0x23cffe[_0x1b1853(0x23e)]+=_0x4e7f0a;let _0xdb0f1b,_0x4eaf13;const _0x4a3191=_0x23cffe['x'],_0x261c8e=_0x23cffe['y'];if(_0x23cffe[_0x1b1853(0x23e)]>=0x1){try{_0xdb0f1b=calculateBezierPoint(0x1,_0x338040['p0']['x'],_0x338040['p1']['x'],_0x338040['p2']['x'],_0x338040['p3']['x']),_0x4eaf13=calculateBezierPoint(0x1,_0x338040['p0']['y'],_0x338040['p1']['y'],_0x338040['p2']['y'],_0x338040['p3']['y']);}catch(_0x45a3bb){console[_0x1b1853(0x20a)]('Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20'+_0x23cffe['id']+':',_0x45a3bb),_0xdb0f1b=_0x23cffe['x'],_0x4eaf13=_0x23cffe['y'],_0x23cffe[_0x1b1853(0x1dc)]='returning';try{const {x:_0x1b27ff,y:_0x151d3e}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe['targetGridX']=_0x1b27ff,_0x23cffe[_0x1b1853(0x265)]=_0x151d3e;}catch(_0xbbd924){console[_0x1b1853(0x20a)](_0x1b1853(0x264)+_0x23cffe['id']+':',_0xbbd924),_0x23cffe[_0x1b1853(0x194)]=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe['targetGridY']=ENEMY_TOP_MARGIN;}break;}_0x23cffe['attackPathT']=0x0,_0x23cffe[_0x1b1853(0x18e)]++;if(_0x23cffe[_0x1b1853(0x18e)]>=_0x3538a4['length']){_0x23cffe['state']='returning',_0x23cffe['lastFiredTime']=0x0,_0x23cffe['attackFormationOffsetX']=0x0,_0x23cffe['attackGroupId']=null;try{const {x:_0x524b9,y:_0x18af6b}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe['gridCol'],_0x148227);_0x23cffe['targetGridX']=_0x524b9,_0x23cffe['targetGridY']=_0x18af6b;}catch(_0x5cb721){console[_0x1b1853(0x20a)](_0x1b1853(0x263)+_0x115e20+'\x20after\x20attack:',_0x5cb721),_0x23cffe[_0x1b1853(0x194)]=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}}else{const _0x394165=_0x3538a4[_0x23cffe[_0x1b1853(0x18e)]];if(!_0x394165?.['p0']){console[_0x1b1853(0x20a)](_0x1b1853(0x1b8)+_0x115e20+_0x1b1853(0x208)+_0x23cffe[_0x1b1853(0x18e)]+_0x1b1853(0x255)),_0xdb0f1b=_0x23cffe['x'],_0x4eaf13=_0x23cffe['y'],_0x23cffe['state']='returning';try{const {x:_0xd1e394,y:_0x3cf631}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe['gridCol'],_0x148227);_0x23cffe[_0x1b1853(0x194)]=_0xd1e394,_0x23cffe[_0x1b1853(0x265)]=_0x3cf631;}catch(_0x4c21b1){console['error'](_0x1b1853(0x1da)+_0x23cffe['id']+':',_0x4c21b1),_0x23cffe[_0x1b1853(0x194)]=gameCanvas[_0x1b1853(0x1a8)]/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0xdb0f1b=calculateBezierPoint(_0x23cffe[_0x1b1853(0x23e)],_0x338040['p0']['x'],_0x338040['p1']['x'],_0x338040['p2']['x'],_0x338040['p3']['x']),_0x4eaf13=calculateBezierPoint(_0x23cffe[_0x1b1853(0x23e)],_0x338040['p0']['y'],_0x338040['p1']['y'],_0x338040['p2']['y'],_0x338040['p3']['y']);}catch(_0x5d241a){console[_0x1b1853(0x20a)](_0x1b1853(0x202)+_0x23cffe['id']+':',_0x5d241a),_0xdb0f1b=_0x23cffe['x'],_0x4eaf13=_0x23cffe['y'],_0x23cffe[_0x1b1853(0x1dc)]='returning';try{const {x:_0x30fa24,y:_0x18df62}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe['targetGridX']=_0x30fa24,_0x23cffe[_0x1b1853(0x265)]=_0x18df62;}catch(_0x3167c4){console['error'](_0x1b1853(0x266)+_0x23cffe['id']+':',_0x3167c4),_0x23cffe[_0x1b1853(0x194)]=gameCanvas['width']/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}break;}if(_0x23cffe&&_0x23cffe[_0x1b1853(0x1dc)]===_0x1b1853(0x1e4)){const _0x581a2b=_0x23cffe['attackFormationOffsetX']||0x0,_0x56a87f=_0xdb0f1b+_0x581a2b,_0x369ebd=_0x4eaf13;_0x23cffe[_0x1b1853(0x1c2)]=_0x56a87f-_0x4a3191,_0x23cffe['velocityY']=_0x369ebd-_0x261c8e,_0x23cffe['x']=_0x56a87f,_0x23cffe['y']=_0x369ebd;if(_0x23cffe['y']>gameCanvas[_0x1b1853(0x267)]+_0x4d53c1*1.5){_0x23cffe[_0x1b1853(0x1dc)]=_0x1b1853(0x1fe),_0x23cffe[_0x1b1853(0x18e)]=0x0,_0x23cffe['attackPathT']=0x0,_0x23cffe[_0x1b1853(0x269)]=0x0,_0x23cffe[_0x1b1853(0x24f)]=0x0,_0x23cffe[_0x1b1853(0x1df)]=null,_0x23cffe['y']=-_0x4d53c1*(1.1+Math['random']()*0.4),_0x23cffe['x']=Math[_0x1b1853(0x21a)]()*(gameCanvas[_0x1b1853(0x1a8)]-_0x148227),_0x23cffe[_0x1b1853(0x1c2)]=0x0,_0x23cffe[_0x1b1853(0x197)]=0x0;try{const {x:_0x3ce128,y:_0x450692}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe[_0x1b1853(0x194)]=_0x3ce128,_0x23cffe['targetGridY']=_0x450692;}catch(_0x21d48f){console['error'](_0x1b1853(0x263)+_0x115e20+_0x1b1853(0x1d6),_0x21d48f),_0x23cffe[_0x1b1853(0x194)]=gameCanvas['width']/0x2,_0x23cffe[_0x1b1853(0x265)]=ENEMY_TOP_MARGIN;}}}break;}case'returning':{if(isEntrancePhaseActive)break;if(_0x23cffe[_0x1b1853(0x194)]==null||_0x23cffe['targetGridY']==null){console[_0x1b1853(0x20f)](_0x1b1853(0x1b8)+_0x115e20+_0x1b1853(0x240));try{const {x:_0x23c4bc,y:_0x438d64}=getCurrentGridSlotPosition(_0x23cffe[_0x1b1853(0x214)],_0x23cffe[_0x1b1853(0x1c1)],_0x148227);_0x23cffe['targetGridX']=_0x23c4bc,_0x23cffe[_0x1b1853(0x265)]=_0x438d64;}catch(_0x25a68e){console[_0x1b1853(0x20a)](_0x1b1853(0x237)+_0x115e20+_0x1b1853(0x1e1),_0x25a68e),_0x23cffe['state']='in_grid',_0x23cffe['x']=gameCanvas['width']/0x2,_0x23cffe['y']=ENEMY_TOP_MARGIN;break;}}const _0x4ac837=_0x23cffe[_0x1b1853(0x194)],_0x22177b=_0x23cffe[_0x1b1853(0x265)],_0x19ac21=_0x4ac837-_0x23cffe['x'],_0xa3311e=_0x22177b-_0x23cffe['y'],_0x5e4a38=Math[_0x1b1853(0x1db)](_0x19ac21*_0x19ac21+_0xa3311e*_0xa3311e),_0x32285a=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x5682eb=BASE_RETURN_SPEED*_0x32285a,_0x37a918=_0x5682eb*0.5;_0x5e4a38>_0x37a918?(_0x23cffe[_0x1b1853(0x1c2)]=_0x19ac21/_0x5e4a38*_0x5682eb,_0x23cffe[_0x1b1853(0x197)]=_0xa3311e/_0x5e4a38*_0x5682eb,_0x23cffe['x']+=_0x23cffe[_0x1b1853(0x1c2)],_0x23cffe['y']+=_0x23cffe[_0x1b1853(0x197)]):(_0x23cffe['x']=_0x4ac837,_0x23cffe['y']=_0x22177b,_0x23cffe[_0x1b1853(0x1c2)]=0x0,_0x23cffe[_0x1b1853(0x197)]=0x0,_0x23cffe[_0x1b1853(0x1dc)]=_0x1b1853(0x23d),_0x23cffe[_0x1b1853(0x1fb)]=!![],_0x23cffe[_0x1b1853(0x24f)]=0x0,_0x23cffe[_0x1b1853(0x1df)]=null,_0x23cffe[_0x1b1853(0x19f)]('returnLogDone')&&delete _0x23cffe[_0x1b1853(0x225)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x23cffe&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x23cffe[_0x1b1853(0x1dc)]===_0x1b1853(0x193))){const _0x2e03db={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x5d088d={'x':_0x23cffe['x'],'y':_0x23cffe['y'],'width':_0x148227,'height':_0x4d53c1};for(let _0x166307=bullets[_0x1b1853(0x18d)]-0x1;_0x166307>=0x0;_0x166307--){const _0x5d31d8=bullets[_0x166307];if(!_0x5d31d8)continue;_0x2e03db['x']=_0x5d31d8['x'],_0x2e03db['y']=_0x5d31d8['y'];if(checkCollision(_0x2e03db,_0x5d088d)){const _0x15440f=handleEnemyHit(_0x23cffe);bullets[_0x1b1853(0x275)](_0x166307,0x1);if(_0x15440f['destroyed']){enemies[_0x1b1853(0x275)](_0x2ffd85,0x1),_0x23cffe=null;break;}}}}if(_0x23cffe&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x95bea0=[_0x1b1853(0x1e4),_0x1b1853(0x1fa),_0x1b1853(0x1a5),_0x1b1853(0x1ee)];if(_0x95bea0[_0x1b1853(0x1ad)](_0x23cffe[_0x1b1853(0x1dc)])){const _0x1ea6fb={'x':_0x23cffe['x'],'y':_0x23cffe['y'],'width':_0x148227,'height':_0x4d53c1},_0x3fe03f={'x':ship['x'],'y':ship['y'],'width':ship[_0x1b1853(0x1a8)],'height':ship[_0x1b1853(0x267)]},_0x1da320=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x1b1853(0x1a8)],'height':ship['height']}:null;let _0x34f39d=![],_0x560f8d=![];if(checkCollision(_0x1ea6fb,_0x3fe03f))_0x34f39d=!![],_0x560f8d=![];else _0x1da320&&checkCollision(_0x1ea6fb,_0x1da320)&&(_0x34f39d=!![],_0x560f8d=!![]);if(_0x34f39d){createExplosion(_0x23cffe['x']+_0x148227/0x2,_0x23cffe['y']+_0x4d53c1/0x2),playSound(lostLifeSound),enemies[_0x1b1853(0x275)](_0x2ffd85,0x1),_0x23cffe=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x560f8d?createExplosion(_0x1da320['x']+ship['width']/0x2,_0x1da320['y']+ship['height']/0x2):createExplosion(_0x3fe03f['x']+ship[_0x1b1853(0x1a8)]/0x2,_0x3fe03f['y']+ship['height']/0x2),isInvincible=!![],invincibilityEndTime=_0x4ab34e+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x4ab34e+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x1b1853(0x267)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x1b1853(0x20a)](_0x1b1853(0x228));if(playerLives<=0x0){const _0x12a0c7=currentPlayer;if(_0x12a0c7===0x1)player1Lives=0x0;if(_0x12a0c7===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x4ab34e,playerWhoIsGameOver=_0x12a0c7;const _0x34655d=_0x12a0c7===0x1?0x2:0x1,_0x59c969=_0x34655d===0x1?player1Lives:player2Lives;_0x59c969>0x0?nextActionAfterPlayerGameOver=_0x1b1853(0x276):nextActionAfterPlayerGameOver='show_results',bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}continue;}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x57f065={'x':ship['x'],'y':ship['y'],'width':ship[_0x1b1853(0x1a8)],'height':ship[_0x1b1853(0x267)]},_0x1b84ed=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x1b1853(0x1a8)],'height':ship[_0x1b1853(0x267)]}:null;for(let _0x5c2499=enemyBullets[_0x1b1853(0x18d)]-0x1;_0x5c2499>=0x0;_0x5c2499--){const _0x11ed62=enemyBullets[_0x5c2499];if(!_0x11ed62){enemyBullets[_0x1b1853(0x275)](_0x5c2499,0x1);continue;}const _0x609231={'x':_0x11ed62['x'],'y':_0x11ed62['y'],'width':_0x11ed62[_0x1b1853(0x1a8)],'height':_0x11ed62[_0x1b1853(0x267)]};let _0x3050b4=checkCollision(_0x57f065,_0x609231),_0x82ef87=0x0;!_0x3050b4&&_0x1b84ed&&checkCollision(_0x1b84ed,_0x609231)&&(_0x3050b4=!![],_0x82ef87=0x1);if(_0x3050b4){enemyBullets[_0x1b1853(0x275)](_0x5c2499,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x82ef87===0x1?createExplosion(_0x1b84ed['x']+ship[_0x1b1853(0x1a8)]/0x2,_0x1b84ed['y']+ship[_0x1b1853(0x267)]/0x2):createExplosion(_0x57f065['x']+ship[_0x1b1853(0x1a8)]/0x2,_0x57f065['y']+ship[_0x1b1853(0x267)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x4ab34e+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship['width']/0x2,ship['y']+ship[_0x1b1853(0x267)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x4ab34e+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x1b1853(0x267)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console['error']('Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.');if(playerLives<=0x0){const _0x5b79eb=currentPlayer;if(_0x5b79eb===0x1)player1Lives=0x0;if(_0x5b79eb===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x4ab34e,playerWhoIsGameOver=_0x5b79eb;const _0x208381=_0x5b79eb===0x1?0x2:0x1,_0x4cfd42=_0x208381===0x1?player1Lives:player2Lives;_0x4cfd42>0x0?nextActionAfterPlayerGameOver=_0x1b1853(0x276):nextActionAfterPlayerGameOver=_0x1b1853(0x1cf),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x1b1853(0x18d)]>0x0&&!isInvincible){const _0x170d01={'x':ship['x'],'y':ship['y'],'width':ship[_0x1b1853(0x1a8)],'height':ship[_0x1b1853(0x267)]};for(let _0x274e2b=fallingShips[_0x1b1853(0x18d)]-0x1;_0x274e2b>=0x0;_0x274e2b--){const _0xde4755=fallingShips[_0x274e2b];if(!_0xde4755)continue;const _0x49128f={'x':_0xde4755['x'],'y':_0xde4755['y'],'width':_0xde4755[_0x1b1853(0x1a8)],'height':_0xde4755['height']};if(checkCollision(_0x170d01,_0x49128f)){fallingShips[_0x1b1853(0x275)](_0x274e2b,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x3bd896){console[_0x1b1853(0x20a)]('FATAL\x20Error\x20in\x20moveEntities:',_0x3bd896,_0x3bd896['stack']),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState==='function')showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x1b1853(0x259));}}function _0xc88d(){const _0xeb6c58=['Beam\x20collision\x20box\x20has\x20invalid\x20height:','CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','sort','capturing','targetGridX','hasCapturedShip','[Capture\x20Message\x20End]\x20Could\x20not\x20find\x20Boss\x20','velocityY','939932rareBy','keys','speed','pathT','!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!','Invalid\x20start\x20segment\x20for\x20path\x20','forEach','hasOwnProperty','5907312tuokYs','\x20following\x20invalid\x20path\x20','.\x20Skipping.','health','Error\x20creating\x20player\x20bullet(s):','following_bezier_path','duration','squadronId','width',':\x20Squadron\x20\x22','\x20at\x20[','right','FATAL\x20Error\x20in\x20resetWave:','includes','diveStartTime','5710842zTyHQk','toString','normal','targetY','CS_LoopAttack_BR','\x20invalid!\x20Skipping.','Error\x20updating\x20explosions:',')\x20during\x20shift:','CS3_DiveLoopR_Sharp','Enemy\x20','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','round','min','\x20(invalid\x20attack\x20segment):','Invalid\x20start\x20segment\x20for\x20active\x20path\x20','[Player\x20GO\x20Delay\x20End]\x20Invalid\x20next\x20action:',',\x20Path\x20','canFireThisDive','gridCol','velocityX','capturedShipX','\x20(no\x20attack\x20path):','every','CS_HorizontalFlyByL',')!\x20Cannot\x20validate\x20paths.','CRITICAL:\x20waveEntrancePatterns\x20is\x20not\x20defined\x20or\x20invalid\x20in\x20generateWaveDefinition\x20(Level\x20','undefined','cos','!\x20Removing.',',\x20isCS:\x20','2dLgEPa','[Capture\x20Message\x20End]\x20Boss\x20','show_results','Error\x20handling\x20player\x20input:','capturedShipLastFiredTime','pathSpeedMultiplier','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Entrance\x201:','back','total','\x20off\x20screen:','max','\x20(Full\x20Grid):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20','sqrt','state','\x20has\x20invalid\x20enemy\x20data.','Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20','attackGroupId','moving_to_grid','\x20in\x20returning','869010PdrMvF','Error\x20updating\x20floating\x20scores:','attacking','boss_loop_right',')\x20for\x20','particles','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','Wave\x20','lifetime','\x20out\x20of\x20bounds\x20(','Entrance\x20Wave\x20(Level\x20','preparing_capture','diving_to_capture_position','function','\x20(state:\x20','\x20voor\x20level\x20','left','creationTime','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','Onbekend\x20wave\x20patroon\x20index\x20','Error\x20deep\x20copying\x20selected\x20pattern\x201\x20for\x20Entrance\x202:',',\x20index\x20','map','\x20attacking,\x20index\x20','following_entrance_path','justReturned','Canvas/ship\x20not\x20ready\x20in\x20resetWave.','shoot','returning',',\x20Pattern\x20','\x20state\x20changed\x20unexpectedly.\x20Resetting\x20rotation.','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','\x20has\x20invalid\x20segment\x20','stringify','\x20(Path\x20','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','pathSegmentIndex','error','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','abs','preparing_attack','21996ncjKax','warn',',\x20isFullGrid:\x20','[findAndDetachEnemy\x20-\x20PRIORITY]\x20Ship\x20captured.\x20Selecting\x20Boss\x20','initialCaptureAnimationY','CRITICAL:\x20normalWaveEntrancePaths\x20is\x20not\x20defined\x20or\x20empty\x20in\x20generateWaveDefinition\x20(Level\x20','gridRow','some','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Full\x20Grid:','\x20out\x20of\x20bounds!\x20Removing.','1303930toPGLQ','\x20for\x20squadron\x20','random','floor','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20',':\x20Squadron\x20pathId\x20\x22','rotation','now','string','CS_LoopAttack_TL','entrance_flight_2','stack','16vXKIEZ','returnLogDone','log','isArray','Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','.\x20Skipping\x20attack.','capturedShipDimensions','targetX',').\x20Throwing\x20error.','5qKMqbn','Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20','challenging_stage','captureStartTime','\x20(Entrance\x202):\x20Basis\x20patroon\x201\x20is\x20ongeldig\x20of\x20leeg!','Boss\x20',',\x20Squadron\x20','completed','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','Error\x20getting\x20grid\x20pos\x20for\x20','push','getGamepads','parse','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','Error\x20in\x20aiControl:','in_grid','attackPathT','isDamaged','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','FATAL\x20Error\x20in\x20moveEntities:',',\x20Idx\x20','\x20(invalid\x20attack\x20index):','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','add','single','Error\x20checking/awarding\x20extra\x20life:','\x20attacking,\x20invalid\x20segment\x20','attackPathSegments','Error\x20starting\x20attack\x20for\x20','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','\x20path\x20index\x20','\x22\x20not\x20found!\x20Aborting\x20CS.','attackFormationOffsetX','sin','captureAnimationRotation','capturePrepareTimeout','Attempted\x20to\x20schedule\x20entrance\x20flight\x20wave\x20without\x20valid\x20definition.','5091567SckfYl','!\x20Returning.','toLowerCase','\x22\x20has\x20no\x20valid\x20enemies\x20array.\x20Removing.','full_grid','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','number','firstEnemyId','enemy-grid-','attackType','alpha','CS\x20Enemy\x20','hasFiredPostLanding','CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','targetGridY','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','height','size','lastFiredTime','filter','enemies','pause','find','indexOf','\x22\x20invalid\x20or\x20missing\x20in\x20normalWaveEntrancePaths!\x20Removing\x20enemy.','object','capturedShipY','atan2','pathId','Error:\x20Tried\x20to\x20start\x20wave\x20for\x20player\x20with\x200\x20lives.\x20Triggering\x20Game\x20Over.','splice','switch_player','entrancePathId','type','[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','\x20for\x20MUST\x20DIVE\x20(Normal\x20attack).','has','\x22\x20became\x20empty\x20after\x20enemy\x20path\x20validation.\x20Removing.','CRITICAL:\x20Required\x20CS\x20path\x20\x22','showing_capture_message','Error\x20in\x20findAndDetachEnemy:','121LDofRq','\x20(Entrance\x201):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','\x20(Sq\x20','squadronEnemyIndex','newButtonStates','),\x20index\x20','tintProgress','\x20in\x20moving_to_grid','):\x20Path\x20','substring','enemy-entr-','!\x20Moving\x20to\x20grid.','length','attackPathSegmentIndex','3157KwsAjT'];_0xc88d=function(){return _0xeb6c58;};return _0xc88d();}function switchPlayerTurn(){const _0x109b1b=_0xca07;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x109b1b(0x1d7)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x53c45d=currentPlayer===0x1?0x2:0x1,_0x2cd76d=_0x53c45d===0x1?player1Lives:player2Lives;if(_0x2cd76d<=0x0){const _0x52a9e5=currentPlayer===0x1?player1Lives:player2Lives;return _0x52a9e5<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x53c45d,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x3071ee=_0xca07;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0xa47807=enemies[_0x3071ee(0x26a)](_0x10ef4b=>_0x10ef4b&&_0x10ef4b[_0x3071ee(0x1dc)]===_0x3071ee(0x23d));if(_0xa47807[_0x3071ee(0x18d)]===0x0)return;const _0x55d25c=Date[_0x3071ee(0x21f)](),_0xb419f3=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x55d25c-lastGridFireCheckTime<_0xb419f3)return;lastGridFireCheckTime=_0x55d25c;const _0x1ecf17=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x433963=Math[_0x3071ee(0x1ba)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x5dc045=0x0;_0xa47807[_0x3071ee(0x192)](()=>Math[_0x3071ee(0x21a)]()-0.5);for(const _0x345f7c of _0xa47807){if(_0x5dc045>=_0x433963)break;if(_0x345f7c[_0x3071ee(0x278)]===ENEMY2_TYPE||_0x345f7c[_0x3071ee(0x278)]===ENEMY3_TYPE){if(_0x345f7c[_0x3071ee(0x278)]===ENEMY3_TYPE&&_0x345f7c[_0x3071ee(0x195)])continue;Math[_0x3071ee(0x21a)]()<_0x1ecf17&&(createBulletSimple(_0x345f7c)&&(playSound(enemyShootSound),_0x345f7c['lastFiredTime']=_0x55d25c,_0x5dc045++));}}}function runSingleGameUpdate(_0x2240ba){const _0x3a0ece=_0xca07;try{const _0x43a4d7=Date['now']();if(isManualControl&&connectedGamepadIndex!==null&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isPaused&&!isShipCaptured){const _0x2460f9=navigator[_0x3a0ece(0x239)]();if(_0x2460f9?.[connectedGamepadIndex]){const _0x2cb689=_0x2460f9[connectedGamepadIndex],_0x16daff=processSingleController(_0x2cb689,previousButtonStates);previousButtonStates=_0x16daff[_0x3a0ece(0x185)];if(_0x16daff[_0x3a0ece(0x1d4)]){stopGameAndShowMenu();return;}}else{if(previousButtonStates['length']>0x0)previousButtonStates=[];}}else{if(connectedGamepadIndex===null){if(previousButtonStates[_0x3a0ece(0x18d)]>0x0)previousButtonStates=[];}}if(connectedGamepadIndexP2===null){if(previousGameButtonStatesP2[_0x3a0ece(0x18d)]>0x0)previousGameButtonStatesP2=[];}if(isPaused){renderGame();return;}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode){if(_0x43a4d7-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![];if(nextActionAfterPlayerGameOver===_0x3a0ece(0x276)){if(switchPlayerTurn()){let _0x3fdcb5=level;playerWhoIsGameOver===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0x3fdcb5=level),currentPlayer===0x1?player1MaxLevelReached=Math[_0x3a0ece(0x1d7)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x3a0ece(0x1d7)](player2MaxLevelReached,level),resetWave();}else triggerFinalGameOverSequence();}else nextActionAfterPlayerGameOver===_0x3a0ece(0x1cf)?triggerFinalGameOverSequence():(console[_0x3a0ece(0x20a)](_0x3a0ece(0x1be),nextActionAfterPlayerGameOver),triggerFinalGameOverSequence());renderGame();return;}else{renderGame();return;}}if(isShowingCaptureMessage){const _0x28cea8=enemies[_0x3a0ece(0x26d)](_0x53e1f3=>_0x53e1f3['id']===capturedBossIdWithMessage);if(_0x28cea8&&_0x28cea8['state']==='showing_capture_message'){const _0x4fd9a8=_0x43a4d7-captureMessageStartTime,_0x262bb4=Math[_0x3a0ece(0x1bb)](0x1,_0x4fd9a8/CAPTURE_MESSAGE_DURATION);_0x28cea8[_0x3a0ece(0x251)]=_0x262bb4*0x2*(0x2*Math['PI']);}else _0x28cea8&&(_0x28cea8[_0x3a0ece(0x251)]=0x0);if(_0x43a4d7-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],stopSound(shipCapturedSound),captureBeamActive=![],capturingBossId=null;if(_0x28cea8&&_0x28cea8['state']===_0x3a0ece(0x27e)){_0x28cea8['state']=_0x3a0ece(0x1fe),_0x28cea8['captureAnimationRotation']=0x0;try{const _0x53b677=_0x28cea8['type']===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x540765,y:_0x2e5df9}=getCurrentGridSlotPosition(_0x28cea8['gridRow'],_0x28cea8[_0x3a0ece(0x1c1)],_0x53b677);_0x28cea8[_0x3a0ece(0x194)]=_0x540765,_0x28cea8[_0x3a0ece(0x265)]=_0x2e5df9;}catch(_0xe57324){console[_0x3a0ece(0x20a)](_0x3a0ece(0x279)+_0x28cea8['id']+':',_0xe57324),_0x28cea8[_0x3a0ece(0x194)]=gameCanvas[_0x3a0ece(0x1a8)]/0x2,_0x28cea8[_0x3a0ece(0x265)]=ENEMY_TOP_MARGIN;}}else _0x28cea8?(console[_0x3a0ece(0x20f)](_0x3a0ece(0x1ce)+capturedBossIdWithMessage+_0x3a0ece(0x200)),_0x28cea8['captureAnimationRotation']=0x0):console['warn'](_0x3a0ece(0x196)+capturedBossIdWithMessage+'\x20to\x20reset\x20state/rotation.');capturedBossIdWithMessage=null;}isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(moveEntities(),updateExplosions(),updateFloatingScores());renderGame();return;}!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(!isManualControl&&isInGameState&&playerLives>0x0&&aiControl(),isInGameState&&isManualControl&&playerLives>0x0&&handlePlayerInput());isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShowingCaptureMessage&&(moveEntities(),updateExplosions(),updateFloatingScores());isInvincible&&_0x43a4d7>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0);if(isCsCompletionDelayActive&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(_0x43a4d7-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY){isCsCompletionDelayActive=![];csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x43a4d7):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x43a4d7);renderGame();return;}else{renderGame();return;}}let _0x44b1b6=![],_0x161bc6=![];if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(showCsHitsMessage)Date[_0x3a0ece(0x21f)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION&&(showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x43a4d7),_0x161bc6=!![];else{if(showPerfectMessage)Date[_0x3a0ece(0x21f)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION&&(showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x43a4d7),_0x161bc6=!![];else{if(showCsBonusScoreMessage)Date['now']()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION&&(showCsBonusScoreMessage=![],_0x44b1b6=!![]),_0x161bc6=!![];else{if(showCSClearMessage)Date[_0x3a0ece(0x21f)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]),Date[_0x3a0ece(0x21f)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]),Date[_0x3a0ece(0x21f)]()-csClearMessageStartTime>=CS_CLEAR_DELAY&&(showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x44b1b6=!![]),_0x161bc6=!![];else showExtraLifeMessage&&(Date[_0x3a0ece(0x21f)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![],_0x44b1b6=!![]),_0x161bc6=!![]);}}}}if(_0x161bc6){renderGame();return;}if(isShowingIntro&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){let _0x1c4520=![];const _0x685d0c=_0x43a4d7-introDisplayStartTime,_0x490111=0xbb8,_0xe987c5=INTRO_DURATION_PER_STEP;if(introStep===0x1)isTwoPlayerMode&&!playerIntroSoundPlayed&&(playSound(levelUpSound),playerIntroSoundPlayed=!![]),level===0x1&&currentPlayer===0x1&&!playerIntroSoundPlayed&&(playSound(startSound),playerIntroSoundPlayed=!![]);else{if(introStep===0x2)!isTwoPlayerMode&&level>0x1&&!isChallengingStage&&!stageIntroSoundPlayed&&(playSound(levelUpSound),stageIntroSoundPlayed=!![]);else introStep===0x3&&(!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}if(introStep===0x1){let _0x36c0e6=isTwoPlayerMode?_0x490111:_0xe987c5;if(level===0x1&&!isTwoPlayerMode)_0x36c0e6=_0xe987c5;_0x685d0c>=_0x36c0e6&&(isChallengingStage?introStep=0x3:introStep=0x2,introDisplayStartTime=_0x43a4d7);}else{if(introStep===0x2){const _0x1d7cca=_0xe987c5;_0x685d0c>=_0x1d7cca&&(_0x1c4520=!![]);}else introStep===0x3&&(_0x685d0c>=_0xe987c5&&(_0x1c4520=!![]));}if(_0x1c4520){isShowingIntro=![],introStep=0x0;!isChallengingStage?aiCanShootTime=Date['now']()+0xbb8:aiCanShootTime=0x0;if(isChallengingStage)startChallengingStageSequence();else{currentWaveDefinition=generateWaveDefinition(level);if(currentWaveDefinition&&currentWaveDefinition[_0x3a0ece(0x18d)]>0x0)isFullGridWave?startFullGridWave():scheduleEntranceFlightWave();else{console['warn'](_0x3a0ece(0x1e9)+level+'\x20definition\x20failed.\x20Transitioning\x20immediately.'),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];const _0x34cbb2=0x64;setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&(playerLives>0x0?resetWave():triggerFinalGameOverSequence());},_0x34cbb2);}}}renderGame();return;}gameJustStarted&&(gameJustStarted=![]);if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&playerLives>0x0){const _0x8cdf72=enemies[_0x3a0ece(0x215)](_0x2dcb95=>_0x2dcb95?.[_0x3a0ece(0x1dc)]===_0x3a0ece(0x23d));if(_0x8cdf72&&isGridBreathingActive){const _0x47bf48=_0x43a4d7-gridBreathStartTime,_0xc52243=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0xb0f8a7=_0x47bf48%_0xc52243;currentGridBreathFactor=(Math[_0x3a0ece(0x250)](_0xb0f8a7/_0xc52243*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0x8cdf72&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0x8cdf72&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x43a4d7,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x52fe37=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x16e697=enemies[_0x3a0ece(0x215)](_0x226333=>_0x226333?.[_0x3a0ece(0x1dc)]==='following_entrance_path'||_0x226333?.[_0x3a0ece(0x1dc)]==='moving_to_grid'||_0x226333?.[_0x3a0ece(0x1dc)]===_0x3a0ece(0x1a5));if(totalEnemiesScheduledForWave>0x0&&_0x52fe37&&!_0x16e697){const _0x1d6b7d=isEntrancePhaseActive;isEntrancePhaseActive=![],_0x1d6b7d&&(stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0x3a0ece(0x19e)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![],!isChallengingStage&&typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive());}}!isChallengingStage&&!isShowingIntro&&!isPaused&&!isWaveTransitioning&&triggerGridFiring();if(!isWaveTransitioning&&playerLives>0x0&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x267949=enemies['length']===0x0,_0x43936c=fallingShips[_0x3a0ece(0x18d)]===0x0,_0x565749=![];isChallengingStage?_0x267949&&!isEntrancePhaseActive&&(_0x565749=!![]):_0x267949&&!isEntrancePhaseActive&&_0x43936c&&(_0x565749=!![]);if(_0x565749){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);!isManualControl&&ship&&gameCanvas?.[_0x3a0ece(0x1a8)]>0x0&&(ship['x']=Math[_0x3a0ece(0x1ba)](gameCanvas[_0x3a0ece(0x1a8)]/0x2-ship[_0x3a0ece(0x1a8)]/0x2),ship[_0x3a0ece(0x22c)]=ship['x']);isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);bullets=[],enemyBullets=[],explosions=[],enemySpawnTimeouts[_0x3a0ece(0x19e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,floatingScores=[];const _0x2aec45=currentPlayer;isTwoPlayerMode&&_0x2aec45===0x1&&(player1CompletedLevel=level);let _0x335b7b;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,isCsCompletionDelayActive=!![],csCompletionDelayStartTime=_0x43a4d7;if(csCompletionResultIsPerfect){const _0x11290a=score;score+=0x2710,highScore=Math[_0x3a0ece(0x1d7)](highScore,score);let _0x4dc81c=![],_0xa1ac7a=null;if(!isManualControl)_0x4dc81c=player1TriggeredHighScoreSound,_0xa1ac7a=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x4dc81c=player1TriggeredHighScoreSound,_0xa1ac7a=()=>{player1TriggeredHighScoreSound=!![];}):(_0x4dc81c=player2TriggeredHighScoreSound,_0xa1ac7a=()=>{player2TriggeredHighScoreSound=!![];}):(_0x4dc81c=player1TriggeredHighScoreSound,_0xa1ac7a=()=>{player1TriggeredHighScoreSound=!![];});if(!_0x4dc81c&&score>highScore-0x2710){if(_0xa1ac7a)_0xa1ac7a();playSound(hiScoreSound);}if(currentPlayer===0x1)player1Score=score;else player2Score=score;checkAndAwardExtraLife(),_0x335b7b=CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else checkAndAwardExtraLife(),_0x335b7b=CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x335b7b+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,_0x335b7b=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x418da3=_0x3a0ece;let _0xce554e=![],_0x5624b0=currentPlayer;if(isTwoPlayerMode){if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0x28a316=switchPlayerTurn();_0x28a316?(_0x5624b0=currentPlayer,_0x2aec45===0x2&&player1CompletedLevel===level?(_0xce554e=!![],player1CompletedLevel=-0x1):_0xce554e=![]):(_0x5624b0=_0x2aec45,_0xce554e=!![],player1CompletedLevel=-0x1);}else _0x5624b0=0x1,_0xce554e=!![];_0xce554e&&level++;const _0x5180fe=_0x5624b0===0x1?player1Lives:player2Lives;_0x5180fe>0x0?(_0x5624b0===0x1?player1MaxLevelReached=Math[_0x418da3(0x1d7)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x418da3(0x1d7)](player2MaxLevelReached,level),resetWave()):(console[_0x418da3(0x20a)](_0x418da3(0x274)),triggerFinalGameOverSequence());},_0x335b7b),renderGame();return;}if(!isChallengingStage){if(enemies['length']>0x0){let _0x4cbe0c=null;const _0x19c391=enemies['filter'](_0xcbc06f=>_0xcbc06f?.[_0x3a0ece(0x1dc)]===_0x3a0ece(0x23d)),_0x592496=_0x19c391[_0x3a0ece(0x18d)]<=0x3,_0x3fe12f=Math['max'](0x1,Math[_0x3a0ece(0x1bb)](level,LEVEL_CAP_FOR_SCALING)),_0x221f6b=0x1068,_0x349e9c=0x320,_0x2b20b5=(_0x3fe12f-0x1)*((_0x221f6b-_0x349e9c)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x189115=Math[_0x3a0ece(0x1d7)](_0x349e9c,_0x221f6b-_0x2b20b5),_0x50a8d0=Math[_0x3a0ece(0x1ba)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x192116=enemies[_0x3a0ece(0x26a)](_0x105d95=>_0x105d95?.[_0x3a0ece(0x1dc)]==='attacking'||_0x105d95?.['state']===_0x3a0ece(0x20d))[_0x3a0ece(0x18d)];if(_0x592496||_0x43a4d7-lastEnemyDetachTime>_0x189115&&_0x19c391[_0x3a0ece(0x18d)]>0x0&&_0x192116<_0x50a8d0){_0x4cbe0c=findAndDetachEnemy();if(_0x4cbe0c&&_0x4cbe0c[_0x3a0ece(0x18d)]>0x0){const _0x4ee639=_0x4cbe0c[_0x3a0ece(0x1f8)](_0x3c4d7c=>enemies['find'](_0x55255c=>_0x55255c?.['id']===_0x3c4d7c['id']))[_0x3a0ece(0x26a)](_0x569808=>_0x569808&&_0x569808[_0x3a0ece(0x1dc)]===_0x3a0ece(0x23d));if(_0x4ee639[_0x3a0ece(0x18d)]>0x0){const _0x5ea569=_0x4ee639[0x0],_0x20d0cf=_0x5ea569[_0x3a0ece(0x25d)];!_0x592496&&(lastEnemyDetachTime=_0x43a4d7);if(_0x20d0cf===_0x3a0ece(0x1b1)){const _0x54bc94=generateAttackPath(_0x5ea569);if(_0x54bc94&&_0x54bc94[_0x3a0ece(0x18d)]>0x0){_0x4ee639['length']===0x3&&_0x5ea569[_0x3a0ece(0x278)]===ENEMY3_TYPE&&level!==0x1&&playSound(tripleAttackSound);let _0xe6a10=[..._0x4ee639];const _0x3d8d73=_0xe6a10[_0x3a0ece(0x18d)];if(_0x3d8d73>0x1){let _0x554c1d=null,_0x430106=[];_0xe6a10[_0x3a0ece(0x19e)](_0x466f22=>{const _0x1e0c6f=_0x3a0ece;if(_0x466f22[_0x1e0c6f(0x278)]===ENEMY3_TYPE)_0x554c1d=_0x466f22;else _0x430106[_0x1e0c6f(0x238)](_0x466f22);});_0x554c1d&&level!==0x1&&_0x3d8d73===0x3&&_0x430106[_0x3a0ece(0x18d)]===0x2?_0xe6a10=[_0x430106[0x0],_0x554c1d,_0x430106[0x1]]:_0xe6a10['sort']((_0x46b772,_0x58fbfe)=>(_0x46b772?.[_0x3a0ece(0x1c1)]??0x0)-(_0x58fbfe?.[_0x3a0ece(0x1c1)]??0x0));const _0x536eac=0x5;let _0xf5f7e5=0x0;_0xe6a10=_0xe6a10['filter'](_0xeab525=>_0xeab525&&typeof _0xeab525[_0x3a0ece(0x1a8)]==='number');const _0x20185c=_0xe6a10[_0x3a0ece(0x18d)];for(let _0x5335b4=0x0;_0x5335b4<_0x20185c;_0x5335b4++){_0xf5f7e5+=_0xe6a10[_0x5335b4][_0x3a0ece(0x1a8)];if(_0x5335b4<_0x20185c-0x1)_0xf5f7e5+=_0x536eac;}const _0x33d070=-_0xf5f7e5/0x2;let _0x1086e7=_0x33d070;for(let _0x4a28b2=0x0;_0x4a28b2<_0x20185c;_0x4a28b2++){const _0x22d167=_0xe6a10[_0x4a28b2];_0x22d167[_0x3a0ece(0x24f)]=_0x1086e7+_0x22d167[_0x3a0ece(0x1a8)]/0x2,_0x1086e7+=_0x22d167[_0x3a0ece(0x1a8)]+_0x536eac;}}else _0xe6a10[_0x3a0ece(0x19e)](_0xd5670d=>_0xd5670d['attackFormationOffsetX']=0x0);const _0x2b5f35='attack-'+_0x5ea569['id']+'-'+_0x43a4d7;_0xe6a10['forEach'](_0x2a545f=>{const _0x3d69b7=_0x3a0ece;if(_0x2a545f)_0x2a545f[_0x3d69b7(0x1df)]=_0x2b5f35;});let _0x210e22=![],_0x52a3e0=GROUP_FIRE_BURST_DELAY;if(_0x5ea569[_0x3a0ece(0x278)]===ENEMY2_TYPE||_0x5ea569[_0x3a0ece(0x278)]===ENEMY3_TYPE)_0x210e22=!![],_0x5ea569[_0x3a0ece(0x278)]===ENEMY2_TYPE&&_0x3d8d73===0x1&&(_0x52a3e0=SOLO_BUTTERFLY_FIRE_DELAY);else _0x5ea569[_0x3a0ece(0x278)]===ENEMY1_TYPE&&(_0x210e22=!![]);_0x592496&&level>0x1&&(_0x210e22=![]),_0x210e22&&_0xe6a10['forEach'](_0x592288=>{const _0x169ebe=_0x3a0ece,_0x2ce9a9=_0x592288&&!(_0x592288['type']===ENEMY3_TYPE&&_0x592288['hasCapturedShip']);_0x2ce9a9&&fireEnemyBurst(_0x592288['id'],_0x169ebe(0x1e4),_0x52a3e0);}),_0xe6a10[_0x3a0ece(0x19e)]((_0xa7a899,_0x4bbf40)=>{const _0x3b6e88=_0x3a0ece;_0xa7a899&&_0xa7a899['state']==='in_grid'&&(_0xa7a899[_0x3b6e88(0x1dc)]=_0x3b6e88(0x20d),_0xa7a899[_0x3b6e88(0x1fb)]=![],_0xa7a899[_0x3b6e88(0x1c2)]=0x0,_0xa7a899[_0x3b6e88(0x197)]=0x0,_0xa7a899['canFireThisDive']=![],setTimeout(()=>{const _0x1f9eee=_0x3b6e88;if(isPaused)return;const _0x126c1e=enemies[_0x1f9eee(0x26d)](_0xa6e962=>_0xa6e962?.['id']===_0xa7a899['id']);if(_0x126c1e&&_0x126c1e[_0x1f9eee(0x1dc)]===_0x1f9eee(0x20d))try{const _0x48cbbb=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x4bc663=0x1;if(_0x126c1e['type']===ENEMY1_TYPE)_0x4bc663=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x126c1e[_0x1f9eee(0x278)]===ENEMY2_TYPE)_0x4bc663=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x126c1e['type']===ENEMY3_TYPE)_0x4bc663=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0xa7a899[_0x1f9eee(0x278)]===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x126c1e[_0x1f9eee(0x1dc)]='attacking',_0x126c1e[_0x1f9eee(0x249)]=_0x54bc94,_0x126c1e[_0x1f9eee(0x18e)]=0x0,_0x126c1e[_0x1f9eee(0x23e)]=0x0,_0x126c1e['speed']=_0x48cbbb*_0x4bc663,_0x126c1e[_0x1f9eee(0x269)]=0x0,_0x126c1e[_0x1f9eee(0x1c0)]=!![];}catch(_0x4f0eee){console['error'](_0x1f9eee(0x24a)+_0xa7a899['id']+':',_0x4f0eee);}},_0x4bbf40*GROUP_DETACH_DELAY_MS));});}else console['warn']('[DEBUG\x20Attack\x20Path\x20Failed]\x20Could\x20not\x20generate\x20path\x20for\x20leader\x20'+_0x5ea569?.['id']+_0x3a0ece(0x22a)),_0x4cbe0c[_0x3a0ece(0x19e)](_0x467acb=>{const _0x30cf6f=_0x3a0ece;if(_0x467acb)_0x467acb[_0x30cf6f(0x1fb)]=![];});}}}}}}enemies[_0x3a0ece(0x19e)](_0x44b86a=>{const _0x3db3e4=_0x3a0ece;if(_0x44b86a&&_0x44b86a['type']===ENEMY3_TYPE&&_0x44b86a[_0x3db3e4(0x195)]&&_0x44b86a['state']===_0x3db3e4(0x1e4)&&_0x44b86a['capturedShipDimensions']&&typeof _0x44b86a[_0x3db3e4(0x1d1)]===_0x3db3e4(0x25a)){if(_0x43a4d7-_0x44b86a[_0x3db3e4(0x1d1)]>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0xc3cf99=_0x44b86a['x']+_0x44b86a[_0x3db3e4(0x1a8)]/0x2,_0x173d54=_0x44b86a['y']+_0x44b86a[_0x3db3e4(0x267)]+_0x44b86a[_0x3db3e4(0x22b)][_0x3db3e4(0x267)]*0.5,_0x4c044c={'x':_0xc3cf99,'y':_0x173d54};createBulletSimple(_0x44b86a,_0x4c044c)&&(_0x44b86a['capturedShipLastFiredTime']=_0x43a4d7,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x2b7b0a=_0x43a4d7-gameOverSequenceStartTime,_0x306bb0=_0x2b7b0a>=GAME_OVER_DURATION;_0x306bb0&&!isShowingResultsScreen&&(isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound,!![]));}}renderGame();}catch(_0x21f723){console[_0x3a0ece(0x20a)](_0x3a0ece(0x19c),_0x21f723,_0x21f723[_0x3a0ece(0x223)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0x3a0ece(0x203)),stopAllGameSounds(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0x3a0ece(0x1ef)&&showMenuState();}catch(_0x4bd324){console[_0x3a0ece(0x20a)](_0x3a0ece(0x1f4),_0x4bd324);}}}function checkAndAwardExtraLife(){const _0x533633=_0xca07;try{let _0x2e0f55;!isManualControl||!isTwoPlayerMode?_0x2e0f55=player1LifeThresholdsMet:_0x2e0f55=currentPlayer===0x1?player1LifeThresholdsMet:player2LifeThresholdsMet;let _0x52f5f1=![];while(!![]){let _0x119aff=![],_0x215935=-0x1;const _0x4f5d1f=_0x2e0f55[_0x533633(0x268)];_0x4f5d1f===0x0?_0x215935=EXTRA_LIFE_THRESHOLD_1:_0x215935=EXTRA_LIFE_THRESHOLD_2+(_0x4f5d1f-0x1)*RECURRING_EXTRA_LIFE_INTERVAL;if(_0x215935!==-0x1&&score>=_0x215935&&!_0x2e0f55[_0x533633(0x27b)](_0x215935)){playerLives++,_0x2e0f55[_0x533633(0x245)](_0x215935),_0x52f5f1=!![],_0x119aff=!![];if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}}if(!_0x119aff)break;}_0x52f5f1&&!showExtraLifeMessage&&(showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x533633(0x21f)](),playSound(extraLifeSound));}catch(_0x27e2da){console[_0x533633(0x20a)](_0x533633(0x247),_0x27e2da);}}function triggerFinalGameOverSequence(){const _0xf8aa7e=_0xca07;if(isInGameState&&gameOverSequenceStartTime===0x0){isPaused=![],isShowingDemoText=![],isShowingIntro=![],isWaveTransitioning=![],showCsHitsMessage=![],showExtraLifeMessage=![],showPerfectMessage=![],showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showReadyMessage=![],showCsBonusScoreMessage=![],isShowingPlayerGameOverMessage=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![];isManualControl&&saveHighScore();stopSound(gridBackgroundSound),stopSound(menuMusicSound),stopSound(resultsMusicSound),stopSound(captureSound),stopSound(entranceSound),isGridSoundPlaying=![];const _0x22dd3d=Date[_0xf8aa7e(0x21f)]();!isTwoPlayerMode?(playSound(gameOverSound),gameOverSequenceStartTime=_0x22dd3d):(gameOverSequenceStartTime=_0x22dd3d-GAME_OVER_DURATION,playSound(resultsMusicSound,!![]),isShowingResultsScreen=!![]),bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![],previousButtonStates=[],previousGameButtonStates=[],previousGameButtonStatesP2=[];}}function triggerGameOver(){triggerFinalGameOverSequence();}